import{d as ne,f as A,a as W,s as de}from"../chunks/BSd0SMRY.js";import{p as ce,o as z,g as e,u as g,s as f,a as pe,b as o,k as fe,e as s,c as me,d as i,n as B,r as a,t as ue,f as ve}from"../chunks/CDxfNvir.js";import{e as xe,r as ge,s as be}from"../chunks/BDbKEsgj.js";import{a as he,b as _e,c as ye}from"../chunks/-xzLaWd6.js";import{b as F}from"../chunks/3MrpOxHJ.js";import{g as k}from"../chunks/BJlyocEZ.js";import{b as D}from"../chunks/C_oBFWYb.js";import{p as we}from"../chunks/JzMgKqpX.js";import{N as Se,l as P}from"../chunks/DpjhzJZR.js";import{M as $e}from"../chunks/B2jRdWkI.js";import{F as ke}from"../chunks/BewwaFnq.js";import{T as De,D as je}from"../chunks/wr9lxb0i.js";import{m as j}from"../chunks/BkllnMPr.js";import{s as V}from"../chunks/BvuqmOFC.js";import{g as Le}from"../chunks/qHyC3OlR.js";import{S as Me}from"../chunks/CmE-KL-b.js";import{S as Te}from"../chunks/CrD9X8TY.js";const Ce=!1,Xe=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ce},Symbol.toStringTag,{value:"Module"}));var Ee=A("<button><!> <span> </span></button>"),Oe=A(`<div class="flex h-screen flex-col bg-white"><main class="flex flex-1 flex-col justify-between overflow-y-auto px-4 py-2.5"><div class="flex w-full flex-col gap-5 pt-2.5 pb-4"><h1 class="text-center text-[22px] leading-7 font-normal text-black">Edit your mood entry</h1> <div class="relative w-full"><input type="text" id="title-input" placeholder="Input" class="h-14 w-full rounded border-[3px] border-indigo-700 px-4 text-base text-gray-900 transition-colors outline-none focus:border-indigo-800"/> <label for="title-input" class="absolute -top-2.5 left-3 bg-white px-1 text-xs text-indigo-700">Title</label></div> <div class="flex flex-col gap-2"><p class="text-sm font-medium text-black">How are you feeling?</p> <!></div> <div class="flex flex-col gap-2"><p class="text-sm font-medium text-black">What's the context?</p> <div class="flex w-full flex-wrap items-center gap-1 py-2"></div></div> <div class="relative w-full"><textarea id="notes-textarea" placeholder="Input" rows="12" class="w-full resize-none rounded border-[3px] border-indigo-700 px-4 py-3 text-base text-gray-900 transition-colors outline-none focus:border-indigo-800"></textarea> <label for="notes-textarea" class="absolute -top-2.5 left-3 bg-white px-1 text-xs text-indigo-700">Notes for this entry</label></div></div> <div class="flex w-full items-center justify-between pb-4"><button class="flex h-14 w-[72px] items-center justify-center rounded-full bg-red-700 text-white shadow-lg transition-transform hover:scale-105 hover:bg-red-800 active:scale-95" aria-label="Delete mood entry"><!></button> <!></div></main> <!></div> <!>`,1);function Ye(H,q){ce(q,!0);const G=()=>_e(we,"$page",J),[J,K]=he(),m=g(()=>G().params.id||""),l=g(()=>j.getEntryById(e(m)));let n=f(!1);z(()=>{(!e(l)||!e(m))&&k(`${D}/`)});let d=f(""),u=f(""),v=f(0),c=f(pe(new Set));z(()=>{e(l)&&(o(d,e(l).title,!0),o(u,e(l).description,!0),o(v,e(l).moodLevel*10),o(c,new Set(e(l).labels.map(t=>t.id)),!0))});const Q=g(()=>Math.round(e(v)/10));function R(t){const r=new Me(e(c));r.has(t)?r.delete(t):r.add(t),o(c,r,!0)}function U(){if(!e(d).trim()){alert("Please enter a title");return}if(!e(l))return;const t=P.all.filter(r=>e(c).has(r.id));j.updateEntry(e(m),{id:e(l).id,title:e(d).trim(),description:e(u).trim(),labels:t,moodLevel:e(Q),date:e(l).date}),V("Mood entry updated","success"),k(`${D}/`)}function X(){o(n,!0)}function Y(){j.deleteEntry(e(m)),o(n,!1),V("Mood entry deleted","success"),k(`${D}/`)}function Z(){o(n,!1)}var L=Oe(),b=fe(L),h=s(b),_=s(h),y=i(s(_),2),M=s(y);ge(M),B(2),a(y);var w=i(y,2),ee=i(s(w),2);$e(ee,{get value(){return e(v)},onValueChange:t=>o(v,t,!0)}),a(w);var S=i(w,2),T=i(s(S),2);xe(T,21,()=>P.all,t=>t.id,(t,r)=>{const se=g(()=>Le(e(r).icon));var p=Ee();p.__click=()=>R(e(r).id);var I=s(p);ye(I,()=>e(se),($,le)=>{le($,{class:"h-4 w-4",strokeWidth:2})});var N=i(I,2),ie=s(N,!0);a(N),a(p),ue($=>{be(p,1,`flex h-8 items-center gap-2 rounded-lg border px-3 py-1.5 text-sm font-medium transition-colors ${$??""}`),de(ie,e(r).name)},[()=>e(c).has(e(r).id)?"border-indigo-700 bg-indigo-50 text-indigo-900":"border-gray-300 text-gray-700 hover:bg-gray-50"]),W(t,p)}),a(T),a(S);var C=i(S,2),E=s(C);ve(E),B(2),a(C),a(_);var O=i(_,2),x=s(O);x.__click=X;var te=s(x);De(te,{class:"h-6 w-6",strokeWidth:2}),a(x);var oe=i(x,2);ke(oe,{get icon(){return Te},onclick:U,label:"Save mood entry"}),a(O),a(h);var ae=i(h,2);Se(ae,{currentTab:"mood-entries"}),a(b);var re=i(b,2);je(re,{title:"Delete mood entry?",onConfirm:Y,onCancel:Z,get isOpen(){return e(n)},set isOpen(t){o(n,t,!0)}}),F(M,()=>e(d),t=>o(d,t)),F(E,()=>e(u),t=>o(u,t)),W(H,L),me(),K()}ne(["click"]);export{Ye as component,Xe as universal};
