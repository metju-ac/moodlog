import{d as ae,f as W,a as N}from"../chunks/CvMI7jnL.js";import{p as se,h as O,g as e,u as x,s as f,a as ie,b as o,i as ne,e as i,c as le,d as n,n as B,r as a,t as de,f as ce}from"../chunks/CLo9gT6R.js";import{s as pe}from"../chunks/CiJ8cSu5.js";import{e as fe,N as me,l as F}from"../chunks/BCej9rq2.js";import{s as ue,a as ve,c as ge}from"../chunks/BAckT0kH.js";import{r as xe,s as be}from"../chunks/D1cKX56f.js";import{b as V}from"../chunks/BUUFz_vM.js";import{g as D}from"../chunks/B62RDYS6.js";import{p as he}from"../chunks/CPQM3L3e.js";import{M as _e}from"../chunks/C4Oi1GO4.js";import{F as ye}from"../chunks/DJu1Uchz.js";import{T as we,D as Se}from"../chunks/Br1FN8vm.js";import{m as k}from"../chunks/PkJdbFDF.js";import{g as De}from"../chunks/CWm6khaQ.js";import{S as ke}from"../chunks/DRRjtHvk.js";import{S as $e}from"../chunks/DL8TUk6M.js";var Le=W("<button><!> <span> </span></button>"),Ce=W('<div class="flex h-screen flex-col bg-white"><main class="flex flex-1 flex-col justify-between overflow-y-auto px-4 py-2.5"><div class="flex w-full flex-col gap-5 pt-2.5 pb-4"><h1 class="text-center text-[22px] leading-7 font-normal text-black">Edit your mood entry</h1> <div class="relative w-full"><input type="text" id="title-input" placeholder="Input" class="h-14 w-full rounded border-[3px] border-indigo-700 px-4 text-base text-gray-900 transition-colors outline-none focus:border-indigo-800"/> <label for="title-input" class="absolute -top-2.5 left-3 bg-white px-1 text-xs text-indigo-700">Title</label></div> <!> <div class="flex h-12 w-full flex-wrap items-center gap-1 py-2"></div> <div class="relative w-full"><textarea id="notes-textarea" placeholder="Input" rows="12" class="w-full resize-none rounded border-[3px] border-indigo-700 px-4 py-3 text-base text-gray-900 transition-colors outline-none focus:border-indigo-800"></textarea> <label for="notes-textarea" class="absolute -top-2.5 left-3 bg-white px-1 text-xs text-indigo-700">Notes for this entry</label></div></div> <div class="flex w-full items-center justify-between pb-4"><button class="flex h-14 w-[72px] items-center justify-center rounded-full bg-red-600 text-white shadow-lg transition-transform hover:scale-105 hover:bg-red-700 active:scale-95" aria-label="Delete mood entry"><!></button> <!></div></main> <!></div> <!>',1);function He(z,A){se(A,!0);const P=()=>ve(he,"$page",q),[q,G]=ue(),m=x(()=>P().params.id||""),s=x(()=>k.getEntryById(e(m)));let l=f(!1);O(()=>{(!e(s)||!e(m))&&D("/")});let d=f(""),u=f(""),v=f(0),c=f(ie(new Set));O(()=>{e(s)&&(o(d,e(s).title,!0),o(u,e(s).description,!0),o(v,e(s).moodLevel*10),o(c,new Set(e(s).labels.map(t=>t.id)),!0))});const H=x(()=>Math.round(e(v)/10));function J(t){const r=new ke(e(c));r.has(t)?r.delete(t):r.add(t),o(c,r,!0)}function K(){if(!e(d).trim()){alert("Please enter a title");return}if(!e(s))return;const t=F.all.filter(r=>e(c).has(r.id));k.updateEntry(e(m),{id:e(s).id,title:e(d).trim(),description:e(u).trim(),labels:t,moodLevel:e(H),date:e(s).date}),D("/")}function Q(){o(l,!0)}function R(){k.deleteEntry(e(m)),o(l,!1),D("/")}function U(){o(l,!1)}var $=Ce(),b=ne($),h=i(b),_=i(h),y=n(i(_),2),L=i(y);xe(L),B(2),a(y);var C=n(y,2);_e(C,{get value(){return e(v)},onValueChange:t=>o(v,t,!0)});var w=n(C,2);fe(w,21,()=>F.all,t=>t.id,(t,r)=>{const te=x(()=>De(e(r).icon));var p=Le();p.__click=()=>J(e(r).id);var T=i(p);ge(T,()=>e(te),(S,re)=>{re(S,{class:"h-4 w-4",strokeWidth:2})});var M=n(T,2),oe=i(M,!0);a(M),a(p),de(S=>{be(p,1,`flex h-8 items-center gap-2 rounded-lg border px-3 py-1.5 text-sm font-medium transition-colors ${S??""}`),pe(oe,e(r).name)},[()=>e(c).has(e(r).id)?"border-indigo-700 bg-indigo-50 text-indigo-900":"border-gray-300 text-gray-700 hover:bg-gray-50"]),N(t,p)}),a(w);var E=n(w,2),j=i(E);ce(j),B(2),a(E),a(_);var I=n(_,2),g=i(I);g.__click=Q;var X=i(g);we(X,{class:"h-6 w-6",strokeWidth:2}),a(g);var Y=n(g,2);ye(Y,{get icon(){return $e},onclick:K,label:"Save mood entry"}),a(I),a(h);var Z=n(h,2);me(Z,{currentTab:"reflections"}),a(b);var ee=n(b,2);Se(ee,{title:"Delete mood entry?",onConfirm:R,onCancel:U,get isOpen(){return e(l)},set isOpen(t){o(l,t,!0)}}),V(L,()=>e(d),t=>o(d,t)),V(j,()=>e(u),t=>o(u,t)),N(z,$),le(),G()}ae(["click"]);export{He as component};
