import{c as Y,a as v,f as K,t as bt,s as gt,d as re}from"../chunks/CMVsHYcO.js";import{p as kt,l as C,c as pt,o as Rt,d as P,f as E,g as t,u as i,r as $,t as xt,s as Nt,a as ne,b as At,e as oe,$ as ie}from"../chunks/Dzkio-oR.js";import{a as Tt,e as Lt,i as Vt,h as se,s as Ct}from"../chunks/BMajUMua.js";import{c as ot,p as et,s as ht,r as Kt}from"../chunks/BcPhfkvl.js";import{S as lt,m as le}from"../chunks/08v0pXEx.js";import{S as de}from"../chunks/DCGNGnMU.js";import{N as ce,l as ue}from"../chunks/CZCsbIkz.js";import{c as Wt,d as ge,S as $t,g as qt}from"../chunks/D0y9iST-.js";import{i as z}from"../chunks/BsUrrD3l.js";import{l as Et,m as Ft,n as Yt,s as Ht,v as fe,w as ve,x as me,h as wt,j as mt,y as it,z as st,g as It,B as Jt,f as yt,D as he,R as Qt,S as Ut,e as ye,E as xe,L as _e,F as Pt,C as be,G as zt,H as Ot,p as Gt,I as we,J as ke,K as pe,o as Zt,q as te,A as jt,r as De,T as Se,u as Me,t as Ae}from"../chunks/CzrTvcfU.js";var Ce=K('<div class="text-sm text-muted-foreground">No mood entries found for the selected criteria</div>'),Pe=K('<div class="flex items-start justify-between"><div><div class="text-sm font-medium text-muted-foreground">Best Day</div> <div class="mt-1 text-lg font-semibold"> </div></div> <div class="text-right"><div class="text-2xl font-bold text-green-600"> </div> <div class="text-xs text-muted-foreground">avg mood</div></div></div>'),Te=K('<div class="flex items-start justify-between border-t border-border pt-4"><div><div class="text-sm font-medium text-muted-foreground">Worst Day</div> <div class="mt-1 text-lg font-semibold"> </div></div> <div class="text-right"><div class="text-2xl font-bold text-red-600"> </div> <div class="text-xs text-muted-foreground">avg mood</div></div></div>'),Re=K('<div class="flex items-start justify-between border-t border-border pt-4"><div><div class="text-sm font-medium text-muted-foreground">Most Common Context</div> <div class="mt-1 flex items-center gap-2"><!> <span class="text-lg font-semibold"> </span></div></div> <div class="text-right"><div class="text-2xl font-bold text-[#485e92]"> </div> <div class="text-xs text-muted-foreground"> </div></div></div>'),Oe=K('<div class="grid gap-4"><!> <!> <!></div>'),Le=K("<!> <!>",1);function je(s,a){kt(a,!0);const e=i(()=>{if(a.entries.length===0)return{bestDay:null,worstDay:null,mostCommonTag:null};const d=Wt(a.entries),h=ge(d);let _=h[0],m=h[0];h.forEach(r=>{r.averageMood>_.averageMood&&(_=r),r.averageMood<m.averageMood&&(m=r)});const n=new $t;a.entries.forEach(r=>{r.labels.forEach(u=>{const c=n.get(u.id);c?c.count++:n.set(u.id,{name:u.name,icon:u.icon,count:1})})});let o=null;return n.forEach(r=>{(!o||r.count>o.count)&&(o=r)}),{bestDay:_,worstDay:m,mostCommonTag:o}});function g(d){return d.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}function w(d){return d>0?`+${d.toFixed(1)}`:d.toFixed(1)}var G=Y(),j=C(G);ot(j,()=>Ht,(d,h)=>{h(d,{class:"w-full",children:(_,m)=>{var n=Le(),o=C(n);ot(o,()=>Et,(u,c)=>{c(u,{children:(k,b)=>{var D=Y(),y=C(D);ot(y,()=>Ft,(S,R)=>{R(S,{class:"text-2xl",children:(B,M)=>{Rt();var T=bt("Highlights");v(B,T)},$$slots:{default:!0}})}),v(k,D)},$$slots:{default:!0}})});var r=P(o,2);ot(r,()=>Yt,(u,c)=>{c(u,{children:(k,b)=>{var D=Y(),y=C(D);{var S=B=>{var M=Ce();v(B,M)},R=B=>{var M=Oe(),T=E(M);{var q=O=>{var l=Pe(),f=E(l),p=P(E(f),2),x=E(p,!0);$(p),$(f);var A=P(f,2),F=E(A),W=E(F,!0);$(F),Rt(2),$(A),$(l),xt((J,U)=>{gt(x,J),gt(W,U)},[()=>g(t(e).bestDay.date),()=>w(t(e).bestDay.averageMood)]),v(O,l)};z(T,O=>{t(e).bestDay&&O(q)})}var Z=P(T,2);{var at=O=>{var l=Te(),f=E(l),p=P(E(f),2),x=E(p,!0);$(p),$(f);var A=P(f,2),F=E(A),W=E(F,!0);$(F),Rt(2),$(A),$(l),xt((J,U)=>{gt(x,J),gt(W,U)},[()=>g(t(e).worstDay.date),()=>w(t(e).worstDay.averageMood)]),v(O,l)};z(Z,O=>{t(e).worstDay&&O(at)})}var rt=P(Z,2);{var X=O=>{const l=i(()=>qt(t(e).mostCommonTag.icon));var f=Re(),p=E(f),x=P(E(p),2),A=E(x);ot(A,()=>t(l),(tt,nt)=>{nt(tt,{class:"h-5 w-5",strokeWidth:2})});var F=P(A,2),W=E(F,!0);$(F),$(x),$(p);var J=P(p,2),U=E(J),ft=E(U,!0);$(U);var H=P(U,2),I=E(H,!0);$(H),$(J),$(f),xt(()=>{gt(W,t(e).mostCommonTag.name),gt(ft,t(e).mostCommonTag.count),gt(I,t(e).mostCommonTag.count===1?"entry":"entries")}),v(O,f)};z(rt,O=>{t(e).mostCommonTag&&O(X)})}$(M),v(B,M)};z(y,B=>{a.entries.length===0?B(S):B(R,!1)})}v(k,D)},$$slots:{default:!0}})}),v(_,n)},$$slots:{default:!0}})}),v(s,G),pt()}function ee(){var s=fe().unknown(void 0),a=s.domain,e=s.range,g=0,w=1,G,j,d=!1,h=0,_=0,m=.5;delete s.unknown;function n(){var o=a().length,r=w<g,u=r?w:g,c=r?g:w;G=(c-u)/Math.max(1,o-h+_*2),d&&(G=Math.floor(G)),u+=(c-u-G*(o-h))*m,j=G*(1-h),d&&(u=Math.round(u),j=Math.round(j));var k=me(o).map(function(b){return u+G*b});return e(r?k.reverse():k)}return s.domain=function(o){return arguments.length?(a(o),n()):a()},s.range=function(o){return arguments.length?([g,w]=o,g=+g,w=+w,n()):[g,w]},s.rangeRound=function(o){return[g,w]=o,g=+g,w=+w,d=!0,n()},s.bandwidth=function(){return j},s.step=function(){return G},s.round=function(o){return arguments.length?(d=!!o,n()):d},s.padding=function(o){return arguments.length?(h=Math.min(1,_=+o),n()):h},s.paddingInner=function(o){return arguments.length?(h=Math.min(1,o),n()):h},s.paddingOuter=function(o){return arguments.length?(_=+o,n()):_},s.align=function(o){return arguments.length?(m=Math.max(0,Math.min(1,o)),n()):m},s.copy=function(){return ee(a(),[g,w]).round(d).paddingInner(h).paddingOuter(_).align(m)},ve.apply(n(),arguments)}function Be(s){const a=s?.all??0,e=s?.x??a,g=s?.y??a,w=s?.left??e,G=s?.right??e,j=s?.top??g,d=s?.bottom??g;return{left:w,right:G,bottom:d,top:j}}function Ge(s,a){const e=i(()=>a?.());return g=>{const w=Be(t(e)?.insets),G=s.xScale.domain(),j=s.yScale.domain(),d=wt(t(e)?.x??s.x),h=wt(t(e)?.y??s.y),_=wt(t(e)?.x1??s.x1),m=wt(t(e)?.y1??s.y1);if(mt(s.yScale)){const n=Xt(s.yScale(h(g))??0)+(s.y1Scale?s.y1Scale(m(g)):0)+w.top,o=Math.max(0,s.yScale.bandwidth?(s.y1Scale?s.y1Scale.bandwidth?.()??0:s.yScale.bandwidth())-w.bottom-w.top:0),r=d(g);let u=0,c=0;Array.isArray(r)?(u=it(r),c=st(r)):r==null?(u=0,c=0):r>0?(u=st([0,G[0]]),c=r):(u=r,c=it([0,G[1]]));const k=s.xScale(u)+w.left,b=Math.max(0,s.xScale(c)-s.xScale(u)-w.left-w.right);return{x:k,y:n,width:b,height:o}}else{const n=Xt(s.xScale(d(g)))+(s.x1Scale?s.x1Scale(_(g)):0)+w.left,o=Math.max(0,s.xScale.bandwidth?(s.x1Scale?s.x1Scale.bandwidth?.()??0:s.xScale.bandwidth())-w.left-w.right:0),r=h(g);let u=0,c=0;Array.isArray(r)?(u=st(r),c=it(r)):r==null?(u=0,c=0):r>0?(u=r,c=st([0,j[0]])):(u=it([0,j[1]]),c=r);const k=s.yScale(u)+w.top,b=s.yScale(c)-s.yScale(u)-w.bottom-w.top;return{x:n,y:k,width:o,height:b}}}}function Xt(s){return Array.isArray(s)?s[0]:s}function ae(s,a){kt(a,!0);const e=It();let g=et(a,"x",19,()=>e.x),w=et(a,"y",19,()=>e.y),G=et(a,"stroke",3,"black"),j=et(a,"strokeWidth",3,0),d=et(a,"radius",3,0),h=et(a,"rounded",3,"all"),_=Kt(a,["$$slots","$$events","$$legacy","data","x","y","x1","y1","fill","fillOpacity","stroke","strokeWidth","opacity","radius","rounded","motion","insets","initialX","initialY","initialHeight","initialWidth"]);const m=i(()=>G()===null||G()===void 0?"black":G()),n=i(()=>Ge(e,()=>({x:g(),y:w(),x1:a.x1,y1:a.y1,insets:a.insets}))),o=i(()=>t(n)(a.data)??{x:0,y:0,width:0,height:0}),r=i(()=>mt(e.xScale)),u=i(()=>wt(t(r)?w():g())),c=i(()=>t(u)(a.data)),k=i(()=>Array.isArray(t(c))?he(t(c)):t(c)),b=i(()=>h()==="edge"?t(r)?t(k)>=0?"top":"bottom":t(k)>=0?"right":"left":h()),D=i(()=>["all","top","left","top-left"].includes(t(b))),y=i(()=>["all","top","right","top-right"].includes(t(b))),S=i(()=>["all","bottom","left","bottom-left"].includes(t(b))),R=i(()=>["all","bottom","right","bottom-right"].includes(t(b))),B=i(()=>t(o).width),M=i(()=>t(o).height),T=i(()=>2*d()),q=i(()=>`M${t(o).x+d()},${t(o).y} h${t(B)-t(T)}
      ${t(y)?`a${d()},${d()} 0 0 1 ${d()},${d()}`:`h${d()}v${d()}`}
      v${t(M)-t(T)}
      ${t(R)?`a${d()},${d()} 0 0 1 ${-d()},${d()}`:`v${d()}h${-d()}`}
      h${t(T)-t(B)}
      ${t(S)?`a${d()},${d()} 0 0 1 ${-d()},${-d()}`:`h${-d()}v${-d()}`}
      v${t(T)-t(M)}
      ${t(D)?`a${d()},${d()} 0 0 1 ${d()},${-d()}`:`v${-d()}h${d()}`}
      z`.split(`
`).join(""));var Z=Y(),at=C(Z);{var rt=O=>{{let l=i(()=>t(o).y+t(o).height),f=i(()=>t(o).x+t(o).width),p=i(()=>yt(_,"bar"));Jt(O,ht({get innerRadius(){return t(o).y},get outerRadius(){return t(l)},get startAngle(){return t(o).x},get endAngle(){return t(f)},get fill(){return a.fill},get fillOpacity(){return a.fillOpacity},get stroke(){return t(m)},get strokeWidth(){return j()},get opacity(){return a.opacity},get cornerRadius(){return d()}},()=>t(p)))}},X=O=>{var l=Y(),f=C(l);{var p=A=>{{let F=i(()=>t(b)==="none"?0:d()),W=i(()=>yt(_,"bar"));Qt(A,ht({get fill(){return a.fill},get fillOpacity(){return a.fillOpacity},get stroke(){return t(m)},get strokeWidth(){return j()},get opacity(){return a.opacity},get rx(){return t(F)},get motion(){return a.motion},get initialX(){return a.initialX},get initialY(){return a.initialY},get initialHeight(){return a.initialHeight},get initialWidth(){return a.initialWidth}},()=>t(o),()=>t(W)))}},x=A=>{const F=i(()=>ye(a.motion));{let W=i(()=>yt(_,"bar"));Ut(A,ht({get pathData(){return t(q)},get fill(){return a.fill},get fillOpacity(){return a.fillOpacity},get stroke(){return t(m)},get strokeWidth(){return j()},get opacity(){return a.opacity},get motion(){return t(F)}},()=>t(W)))}};z(f,A=>{t(b)==="all"||t(b)==="none"||d()===0?A(p):A(x,!1)},!0)}v(O,l)};z(at,O=>{e.radial?O(rt):O(X,!1)})}v(s,Z),pt()}var We=K("<!> <!> <!> <!>",1);function $e(s,a){kt(a,!0);const e=It(),g=xe();let w=et(a,"x",19,()=>e.x),G=et(a,"y",19,()=>e.y),j=et(a,"points",3,!1),d=et(a,"lines",3,!1),h=et(a,"area",3,!1),_=et(a,"bar",3,!1),m=et(a,"motion",3,"spring");const n=i(()=>wt(w())),o=i(()=>wt(G())),r=i(()=>a.data??g.data),u=i(()=>t(n)(t(r))),c=i(()=>Array.isArray(t(u))?t(u).map(l=>e.xScale(l)):e.xScale(t(u))),k=i(()=>mt(e.xScale)&&!e.radial?e.xScale.bandwidth()/2:0),b=i(()=>t(o)(t(r))),D=i(()=>Array.isArray(t(b))?t(b).map(l=>e.yScale(l)):e.yScale(t(b))),y=i(()=>mt(e.yScale)&&!e.radial?e.yScale.bandwidth()/2:0),S=i(()=>a.axis==null?mt(e.yScale)?"y":"x":a.axis),R=i(()=>{let l=[];return t(r)&&((t(S)==="x"||t(S)==="both")&&(Array.isArray(t(c))?l=[...l,...t(c).filter(Ot).map((f,p)=>({x1:f+t(k),y1:it(e.yRange),x2:f+t(k),y2:st(e.yRange)}))]:t(c)!=null&&(l=[...l,{x1:t(c)+t(k),y1:it(e.yRange),x2:t(c)+t(k),y2:st(e.yRange)}])),(t(S)==="y"||t(S)==="both")&&(Array.isArray(t(D))?l=[...l,...t(D).filter(Ot).map((f,p)=>({x1:it(e.xRange),y1:f+t(y),x2:st(e.xRange),y2:f+t(y)}))]:t(D)!=null&&(l=[...l,{x1:it(e.xRange),y1:t(D)+t(y),x2:st(e.xRange),y2:t(D)+t(y)}])),e.radial&&(l=l.map(f=>{const[p,x]=Gt(f.x1,f.y1),[A,F]=Gt(f.x2,f.y2);return{...f,x1:p,y1:x,x2:A,y2:F}}))),l}),B=i(()=>{const l={x:0,y:0,width:0,height:0};if(!t(r))return l;if(t(S)==="x"||t(S)==="both"){if(Array.isArray(t(c)))l.width=st(t(c))-it(t(c));else if(mt(e.xScale))l.width=e.xScale.step();else{const f=e.flatData.findIndex(A=>Number(t(n)(A))===Number(t(n)(t(r)))),x=f+1===e.flatData.length?st(e.xDomain):t(n)(e.flatData[f+1]);l.width=(e.xScale(x)??0)-(t(c)??0)}l.x=(Array.isArray(t(c))?it(t(c)):t(c))-(mt(e.xScale)?e.xScale.padding()*e.xScale.step()/2:0),t(S)==="x"&&(l.y=it(e.yRange),l.height=st(e.yRange)-it(e.yRange))}if(t(S)==="y"||t(S)==="both"){if(Array.isArray(t(D)))l.height=st(t(D))-it(t(D));else if(mt(e.yScale))l.height=e.yScale.step();else{const f=e.flatData.findIndex(A=>Number(t(n)(A))===Number(t(n)(t(r)))),x=f+1===e.flatData.length?st(e.yDomain):t(n)(e.flatData[f+1]);l.height=(e.yScale(x)??0)-(t(D)??0)}l.y=(Array.isArray(t(D))?it(t(D)):t(D))-(mt(e.yScale)?e.yScale.padding()*e.yScale.step()/2:0),t(S)==="y"&&(l.width=st(e.xRange))}return l}),M=i(()=>{let l=[];if(!t(r))return l;if(Array.isArray(t(c)))if(Array.isArray(t(r))){const f=t(r);Array.isArray(e.data)&&(l=e.data.map(x=>({series:x,point:x.find(A=>t(o)(A)===t(o)(f))})).filter(x=>x.point).map((x,A)=>({x:e.xScale(x.point[1])+t(k),y:t(D)+t(y),fill:e.config.c?e.cGet(x.series):null,data:{x:x.point[1],y:t(b)}})))}else l=t(c).filter(Ot).map((f,p)=>{const x=e.config.x?.[p];return{x:f+t(k),y:t(D)+t(y),fill:e.config.c?e.cGet({...t(r),$key:x}):null,data:{x:t(u),y:t(b)}}});else if(Array.isArray(t(D)))if(Array.isArray(t(r))){const f=t(r);Array.isArray(e.data)&&(l=e.data.map(x=>({series:x,point:x.find(A=>t(n)(A)===t(n)(f))})).filter(x=>x.point).map((x,A)=>({x:t(c)+t(k),y:e.yScale(x.point[1])+t(y),fill:e.config.c?e.cGet(x.series):null,data:{x:t(u),y:x.point[1]}})))}else l=t(D).filter(Ot).map((f,p)=>{const x=e.config.y[p];return{x:t(c)+t(k),y:f+t(y),fill:e.config.c?e.cGet({...t(r),$key:x}):null,data:{x:t(u),y:t(b)}}});else t(c)!=null&&t(D)!=null?l=[{x:t(c)+t(k),y:t(D)+t(y),fill:e.config.c?e.cGet(t(r)):null,data:{x:t(u),y:t(b)}}]:l=[];return e.radial&&(l=l.map(f=>{const[p,x]=Gt(f.x,f.y);return{...f,x:p,y:x}})),l}),T=i(()=>yt(h(),"highlight-area")),q=i(()=>yt(_(),"highlight-bar")),Z=i(()=>yt(d(),"highlight-line")),at=i(()=>yt(j(),"highlight-point"));var rt=Y(),X=C(rt);{var O=l=>{var f=We(),p=C(f);{var x=H=>{var I=Y(),tt=C(I);{var nt=L=>{var N=Y(),V=C(N);Tt(V,h,()=>({area:t(B)})),v(L,N)},dt=L=>{var N=Y(),V=C(N);{var ct=ut=>{{let _t=i(()=>m()==="spring"?"spring":void 0),Dt=i(()=>t(B).x+t(B).width),St=i(()=>t(B).y+t(B).height),Mt=i(()=>Pt(!t(T).fill&&"fill-surface-content/5",t(T).class)),Bt=i(()=>a.onAreaClick&&(vt=>a.onAreaClick(vt,{data:t(r)})));Jt(ut,{get motion(){return t(_t)},get startAngle(){return t(B).x},get endAngle(){return t(Dt)},get innerRadius(){return t(B).y},get outerRadius(){return t(St)},get class(){return t(Mt)},get onclick(){return t(Bt)}})}},Q=ut=>{{let _t=i(()=>m()==="spring"?"spring":void 0),Dt=i(()=>Pt(!t(T).fill&&"fill-surface-content/5",t(T).class)),St=i(()=>a.onAreaClick&&(Mt=>a.onAreaClick(Mt,{data:t(r)})));Qt(ut,ht({get motion(){return t(_t)}},()=>t(B),()=>t(T),{get class(){return t(Dt)},get onclick(){return t(St)}}))}};z(V,ut=>{e.radial?ut(ct):ut(Q,!1)},!0)}v(L,N)};z(tt,L=>{typeof h()=="function"?L(nt):L(dt,!1)})}v(H,I)};z(p,H=>{h()&&H(x)})}var A=P(p,2);{var F=H=>{var I=Y(),tt=C(I);{var nt=L=>{var N=Y(),V=C(N);Tt(V,_),v(L,N)},dt=L=>{{let N=i(()=>m()==="spring"?"spring":void 0),V=i(()=>Pt(!t(q).fill&&"fill-primary",t(q).class)),ct=i(()=>a.onBarClick&&(Q=>a.onBarClick(Q,{data:t(r)})));ae(L,ht({get motion(){return t(N)},get data(){return t(r)}},()=>t(q),{get class(){return t(V)},get onclick(){return t(ct)}}))}};z(tt,L=>{typeof _()=="function"?L(nt):L(dt,!1)})}v(H,I)};z(A,H=>{_()&&H(F)})}var W=P(A,2);{var J=H=>{var I=Y(),tt=C(I);{var nt=L=>{var N=Y(),V=C(N);Tt(V,d,()=>({lines:t(R)})),v(L,N)},dt=L=>{var N=Y(),V=C(N);Lt(V,17,()=>t(R),Vt,(ct,Q)=>{{let ut=i(()=>m()==="spring"?"spring":void 0),_t=i(()=>Pt("stroke-surface-content/20 stroke-2 [stroke-dasharray:2,2] pointer-events-none",t(Z).class));_e(ct,ht({get motion(){return t(ut)},get x1(){return t(Q).x1},get y1(){return t(Q).y1},get x2(){return t(Q).x2},get y2(){return t(Q).y2}},()=>t(Z),{get class(){return t(_t)}}))}}),v(L,N)};z(tt,L=>{typeof d()=="function"?L(nt):L(dt,!1)})}v(H,I)};z(W,H=>{d()&&H(J)})}var U=P(W,2);{var ft=H=>{var I=Y(),tt=C(I);{var nt=L=>{var N=Y(),V=C(N);Tt(V,j,()=>({points:t(M)})),v(L,N)},dt=L=>{var N=Y(),V=C(N);Lt(V,17,()=>t(M),Vt,(ct,Q)=>{{let ut=i(()=>m()==="spring"?"spring":void 0),_t=i(()=>Pt("stroke-white [paint-order:stroke] drop-shadow-sm",!t(Q).fill&&(typeof j()=="boolean"||!j().fill)&&"fill-primary",t(at).class)),Dt=i(()=>a.onPointClick&&(vt=>{vt.stopPropagation()})),St=i(()=>a.onPointClick&&(vt=>a.onPointClick(vt,{point:t(Q),data:t(r)}))),Mt=i(()=>a.onPointEnter&&(vt=>{a.onPointClick&&(zt(vt.target).style.cursor="pointer"),a.onPointEnter(vt,{point:t(Q),data:t(r)})})),Bt=i(()=>a.onPointLeave&&(vt=>{a.onPointClick&&(zt(vt.target).style.cursor="default"),a.onPointLeave(vt,{point:t(Q),data:t(r)})}));be(ct,ht({get motion(){return t(ut)},get cx(){return t(Q).x},get cy(){return t(Q).y},get fill(){return t(Q).fill},r:4,strokeWidth:6},()=>t(at),{get class(){return t(_t)},get onpointerdown(){return t(Dt)},get onclick(){return t(St)},get onpointerenter(){return t(Mt)},get onpointerleave(){return t(Bt)}}))}}),v(L,N)};z(tt,L=>{typeof j()=="function"?L(nt):L(dt,!1)})}v(H,I)};z(U,H=>{j()&&H(ft)})}v(l,f)};z(X,l=>{t(r)&&l(O)})}v(s,rt),pt()}function Ee(s,a){kt(a,!0);let e=et(a,"key",3,(m,n)=>n),g=et(a,"onBarClick",3,()=>{}),w=et(a,"radius",3,0),G=et(a,"strokeWidth",3,0),j=et(a,"stroke",3,"black"),d=Kt(a,["$$slots","$$events","$$legacy","fill","key","data","onBarClick","children","radius","strokeWidth","stroke"]);const h=It(),_=i(()=>ke(a.data??h.data));{let m=i(()=>pe("bars"));we(s,{get class(){return t(m)},children:(n,o)=>{var r=Y(),u=C(r);{var c=b=>{var D=Y(),y=C(D);Tt(y,()=>a.children),v(b,D)},k=b=>{var D=Y(),y=C(D);Lt(y,19,()=>t(_),(S,R)=>e()(S,R),(S,R)=>{{let B=i(()=>a.fill??(h.config.c?h.cGet(t(R)):null)),M=i(()=>yt(d,"bars-bar"));ae(S,ht({get data(){return t(R)},get radius(){return w()},get strokeWidth(){return G()},get stroke(){return j()},get fill(){return t(B)},onclick:T=>g()(T,{data:t(R)})},()=>t(M)))}}),v(b,D)};z(u,b=>{a.children?b(c):b(k,!1)})}v(n,r)},$$slots:{default:!0}})}pt()}var Fe=K("Average Mood <!>",1),Ye=K("<!> <!> <!> <!>",1),He=K('<div class="rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl"><div class="font-medium"><!></div> <div class="mt-1 flex items-center gap-2"><div class="h-2 w-2 rounded-full bg-[#485e92]"></div> <span class="text-muted-foreground"> </span></div> <div class="mt-0.5 text-[10px] text-muted-foreground"> </div></div>'),Ie=K("<!> <!>",1),Ne=K('<div class="h-[300px] w-full"><!></div>'),Ve=K('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No mood entries found for the selected criteria</div>'),ze=K("<!> <!>",1);function Xe(s,a){kt(a,!0);const e=i(()=>a.selectedTimeRange==="week"||a.selectedTimeRange==="month"?"day":a.selectedTimeRange==="3months"?"week":"month"),g=i(()=>{if(a.entries.length===0)return[];const h=Wt(a.entries),_=Array.from(h.entries()).map(([n,o])=>{const r=o.reduce((u,c)=>u+c.moodLevel,0)/o.length;return{date:new Date(n+"T12:00:00"),averageMood:r,entryCount:o.length}}).sort((n,o)=>n.date.getTime()-o.date.getTime());if(t(e)==="day")return _.map(n=>({...n,endDate:void 0}));const m=new $t;return _.forEach(n=>{let o,r,u;if(t(e)==="week"){const k=new lt(n.date),b=k.getDay(),D=b===0?-6:1-b;r=new lt(k),r.setDate(k.getDate()+D),r.setHours(12,0,0,0),u=new lt(r),u.setDate(r.getDate()+6),o=r.toISOString().split("T")[0]}else r=new lt(n.date.getFullYear(),n.date.getMonth(),1,12,0,0,0),u=new lt(n.date.getFullYear(),n.date.getMonth()+1,0,12,0,0,0),o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;m.has(o)||m.set(o,{date:r,endDate:u,totalMood:0,entryCount:0});const c=m.get(o);c.totalMood+=n.averageMood*n.entryCount,c.entryCount+=n.entryCount}),Array.from(m.values()).map(n=>({date:n.date,averageMood:n.totalMood/n.entryCount,entryCount:n.entryCount,endDate:n.endDate})).sort((n,o)=>n.date.getTime()-o.date.getTime())}),w=i(()=>{if(t(g).length===0)return[new Date,new Date];const h=t(g).map(_=>_.date.getTime());return[new Date(Math.min(...h)),new Date(Math.max(...h))]}),G=i(()=>{if(t(g).length===0)return[];if(a.selectedTimeRange==="week"||t(g).length<=5)return t(g).map(m=>m.date);const h=[],_=(t(g).length-1)/4;for(let m=0;m<5;m++){const n=Math.round(m*_);h.push(t(g)[n].date)}return h});var j=Y(),d=C(j);ot(d,()=>Ht,(h,_)=>{_(h,{class:"w-full",children:(m,n)=>{var o=ze(),r=C(o);ot(r,()=>Et,(c,k)=>{k(c,{children:(b,D)=>{var y=Y(),S=C(y);ot(S,()=>Ft,(R,B)=>{B(R,{class:"text-2xl",children:(M,T)=>{Rt();var q=Fe(),Z=P(C(q));{var at=X=>{var O=bt("(by week)");v(X,O)},rt=X=>{var O=Y(),l=C(O);{var f=p=>{var x=bt("(by month)");v(p,x)};z(l,p=>{t(e)==="month"&&p(f)},!0)}v(X,O)};z(Z,X=>{t(e)==="week"?X(at):X(rt,!1)})}v(M,q)},$$slots:{default:!0}})}),v(b,y)},$$slots:{default:!0}})});var u=P(r,2);ot(u,()=>Yt,(c,k)=>{k(c,{children:(b,D)=>{var y=Y(),S=C(y);{var R=M=>{var T=Ne(),q=E(T);{let Z=i(Ae),at=i(()=>[new lt(t(w)[0]),new lt(t(w)[1])]),rt=i(Me);Zt(q,{get data(){return t(g)},x:"date",get xScale(){return t(Z)},get xDomain(){return t(at)},y:"averageMood",get yScale(){return t(rt)},yDomain:[-10,10],padding:{top:16,bottom:32,left:48,right:16},tooltip:{mode:"bisect-x"},children:(X,O)=>{var l=Ie(),f=C(l);te(f,{children:(x,A)=>{var F=Ye(),W=C(F);jt(W,{placement:"left",grid:!0,rule:!1,ticks:[-10,-5,0,5,10],format:H=>{const I=Math.round(H);return I>0?`+${I}`:String(I)},class:"text-xs text-muted-foreground"});var J=P(W,2);jt(J,{placement:"bottom",rule:!1,get ticks(){return t(G)},format:H=>{const I=t(g).find(tt=>tt.date.getTime()===H.getTime());if(!I)return"";if(t(e)==="day")return I.date.toLocaleDateString("en-GB",{month:"short",day:"numeric"});if(t(e)==="week"){const tt=I.date.getDate(),nt=I.endDate.getDate(),dt=I.date.toLocaleDateString("en-GB",{month:"short"}),L=I.endDate.toLocaleDateString("en-GB",{month:"short"});return dt===L?`${dt} ${tt}-${nt}`:`${dt} ${tt}-${L} ${nt}`}else return I.date.toLocaleDateString("en-GB",{month:"short",year:"numeric"})},class:"text-xs text-muted-foreground"});var U=P(J,2);Ut(U,{get curve(){return De},class:"fill-none stroke-[#485e92] stroke-2"});var ft=P(U,2);$e(ft,{points:!0,lines:!0}),v(x,F)},$$slots:{default:!0}});var p=P(f,2);{const x=(A,F)=>{let W=()=>F?.().data;var J=He(),U=E(J),ft=E(U);{var H=V=>{var ct=bt();xt(Q=>gt(ct,Q),[()=>W().date.toLocaleDateString("en-GB",{month:"short",day:"numeric",year:"numeric"})]),v(V,ct)},I=V=>{var ct=bt();xt((Q,ut)=>gt(ct,`${Q??""}
                    -
                    ${ut??""}`),[()=>W().date.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),()=>W().endDate.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]),v(V,ct)};z(ft,V=>{t(e)==="day"?V(H):V(I,!1)})}$(U);var tt=P(U,2),nt=P(E(tt),2),dt=E(nt);$(nt),$(tt);var L=P(tt,2),N=E(L);$(L),$(J),xt(V=>{gt(dt,`Avg Mood: ${W().averageMood>0?"+":""}${V??""}`),gt(N,`${W().entryCount??""}
                  ${W().entryCount===1?"entry":"entries"}`)},[()=>W().averageMood.toFixed(1)]),v(A,J)};ot(p,()=>Se,(A,F)=>{F(A,{variant:"none",children:x,$$slots:{default:!0}})})}v(X,l)},$$slots:{default:!0}})}$(T),v(M,T)},B=M=>{var T=Ve();v(M,T)};z(S,M=>{t(g).length>0?M(R):M(B,!1)})}v(b,y)},$$slots:{default:!0}})}),v(m,o)},$$slots:{default:!0}})}),v(s,j),pt()}var Ke=K("Entry Count <!>",1),qe=K("<!> <!> <!>",1),Je=K('<div class="h-[300px] w-full"><!></div>'),Qe=K('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No mood entries found for the selected criteria</div>'),Ue=K("<!> <!>",1);function Ze(s,a){kt(a,!0);const e=i(()=>a.selectedTimeRange==="week"||a.selectedTimeRange==="month"?"day":a.selectedTimeRange==="3months"?"week":"month"),g=i(()=>{if(a.entries.length===0)return[];const h=Wt(a.entries),_=Array.from(h.entries()).map(([n,o])=>({date:n,count:o.length,dateObj:new Date(n+"T12:00:00")})).sort((n,o)=>n.dateObj.getTime()-o.dateObj.getTime());if(t(e)==="day")return _.map(n=>({...n,endDate:void 0}));const m=new $t;return _.forEach(n=>{let o,r,u;if(t(e)==="week"){const k=new lt(n.dateObj),b=k.getDay(),D=b===0?-6:1-b;r=new lt(k),r.setDate(k.getDate()+D),r.setHours(0,0,0,0),u=new lt(r),u.setDate(r.getDate()+6),o=r.toISOString().split("T")[0]}else r=new lt(n.dateObj.getFullYear(),n.dateObj.getMonth(),1),u=new lt(n.dateObj.getFullYear(),n.dateObj.getMonth()+1,0),o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;m.has(o)||m.set(o,{dateObj:r,endDate:u,count:0,entries:[]});const c=m.get(o);c.count+=n.count,c.entries.push(n.count)}),Array.from(m.values()).map(n=>({date:n.dateObj.toISOString().split("T")[0],count:n.count,dateObj:n.dateObj,endDate:n.endDate})).sort((n,o)=>n.dateObj.getTime()-o.dateObj.getTime())}),w=i(()=>{if(t(g).length===0)return 10;const h=Math.max(...t(g).map(_=>_.count));return Math.ceil(h*1.1)}),G=i(()=>{if(t(g).length===0)return[];if(a.selectedTimeRange==="week"||t(g).length<=5)return t(g).map(m=>m.date);const h=[],_=(t(g).length-1)/4;for(let m=0;m<5;m++){const n=Math.round(m*_);h.push(t(g)[n].date)}return h});var j=Y(),d=C(j);ot(d,()=>Ht,(h,_)=>{_(h,{class:"w-full",children:(m,n)=>{var o=Ue(),r=C(o);ot(r,()=>Et,(c,k)=>{k(c,{children:(b,D)=>{var y=Y(),S=C(y);ot(S,()=>Ft,(R,B)=>{B(R,{class:"text-2xl",children:(M,T)=>{Rt();var q=Ke(),Z=P(C(q));{var at=X=>{var O=bt("(by week)");v(X,O)},rt=X=>{var O=Y(),l=C(O);{var f=p=>{var x=bt("(by month)");v(p,x)};z(l,p=>{t(e)==="month"&&p(f)},!0)}v(X,O)};z(Z,X=>{t(e)==="week"?X(at):X(rt,!1)})}v(M,q)},$$slots:{default:!0}})}),v(b,y)},$$slots:{default:!0}})});var u=P(r,2);ot(u,()=>Yt,(c,k)=>{k(c,{children:(b,D)=>{var y=Y(),S=C(y);{var R=M=>{var T=Je(),q=E(T);{let Z=i(()=>ee().padding(.2)),at=i(()=>[0,t(w)]);Zt(q,{get data(){return t(g)},x:"date",get xScale(){return t(Z)},y:"count",get yDomain(){return t(at)},padding:{top:16,bottom:32,left:48,right:16},children:(rt,X)=>{te(rt,{children:(O,l)=>{var f=qe(),p=C(f);jt(p,{placement:"left",grid:!0,rule:!1,ticks:5,format:F=>Math.round(F).toString(),class:"text-xs text-muted-foreground"});var x=P(p,2);jt(x,{placement:"bottom",rule:!1,get ticks(){return t(G)},format:F=>{const W=t(g).find(J=>J.date===F);if(!W)return F;if(t(e)==="day")return W.dateObj.toLocaleDateString("en-GB",{month:"short",day:"numeric"});if(t(e)==="week"){const J=W.dateObj.getDate(),U=W.endDate.getDate(),ft=W.dateObj.toLocaleDateString("en-GB",{month:"short"}),H=W.endDate.toLocaleDateString("en-GB",{month:"short"});return ft===H?`${ft} ${J}-${U}`:`${ft} ${J}-${H} ${U}`}else return W.dateObj.toLocaleDateString("en-GB",{month:"short",year:"numeric"})},class:"text-xs text-muted-foreground"});var A=P(x,2);Ee(A,{radius:4,strokeWidth:0,class:"fill-[#485e92]"}),v(O,f)},$$slots:{default:!0}})},$$slots:{default:!0}})}$(T),v(M,T)},B=M=>{var T=Qe();v(M,T)};z(S,M=>{t(g).length>0?M(R):M(B,!1)})}v(b,y)},$$slots:{default:!0}})}),v(m,o)},$$slots:{default:!0}})}),v(s,j),pt()}var ta=K('<button type="button"><!> <span> </span></button>'),ea=K('<div class="flex h-screen flex-col bg-white"><main class="flex flex-1 flex-col gap-6 overflow-y-auto px-4 py-4"><div class="flex flex-wrap gap-2 py-2"><button type="button">Week</button> <button type="button">Month</button> <button type="button">3 Months</button> <button type="button">Year</button></div> <div class="flex flex-wrap gap-2"></div> <!> <!> <!></main> <!></div>');function ga(s,a){kt(a,!0);let e=Nt("3months"),g=Nt(ne(new Set));const w=i(()=>{const y=new Date,S=new lt(y);S.setHours(23,59,59,999);const R=new lt(y);switch(t(e)){case"week":R.setDate(y.getDate()-7);break;case"month":R.setMonth(y.getMonth()-1);break;case"3months":R.setMonth(y.getMonth()-3);break;case"year":R.setFullYear(y.getFullYear()-1);break}return R.setHours(0,0,0,0),{start:R,end:S}}),G=i(()=>le.allEntries.filter(y=>y.date>=t(w).start&&y.date<=t(w).end?t(g).size===0?!0:y.labels.some(R=>t(g).has(R.id)):!1));function j(y){const S=new de(t(g));S.has(y)?S.delete(y):S.add(y),At(g,S,!0)}var d=ea();se("u6zn5i",y=>{oe(()=>{ie.title="Insights - MoodLog"})});var h=E(d),_=E(h),m=E(_);m.__click=()=>At(e,"week");var n=P(m,2);n.__click=()=>At(e,"month");var o=P(n,2);o.__click=()=>At(e,"3months");var r=P(o,2);r.__click=()=>At(e,"year"),$(_);var u=P(_,2);Lt(u,21,()=>ue.all,y=>y.id,(y,S)=>{const R=i(()=>qt(t(S).icon)),B=i(()=>t(g).has(t(S).id));var M=ta();M.__click=()=>j(t(S).id);var T=E(M);ot(T,()=>t(R),(at,rt)=>{rt(at,{class:"h-4 w-4",strokeWidth:2})});var q=P(T,2),Z=E(q,!0);$(q),$(M),xt(()=>{Ct(M,1,`flex items-center gap-2 rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(B)?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),gt(Z,t(S).name)}),v(y,M)}),$(u);var c=P(u,2);je(c,{get entries(){return t(G)}});var k=P(c,2);Xe(k,{get entries(){return t(G)},get selectedTimeRange(){return t(e)}});var b=P(k,2);Ze(b,{get entries(){return t(G)},get selectedTimeRange(){return t(e)}}),$(h);var D=P(h,2);ce(D,{currentTab:"insights"}),$(d),xt(()=>{Ct(m,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="week"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),Ct(n,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="month"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),Ct(o,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="3months"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),Ct(r,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="year"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`)}),v(s,d),pt()}re(["click"]);export{ga as component};
