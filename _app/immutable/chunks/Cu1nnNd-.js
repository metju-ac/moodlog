import{p as Gt,f as R,a as C,c as Y,t as Tt,e as Ot,s as it,d as Bt}from"./BSd0SMRY.js";import{p as tt,g as r,u as o,k as P,d as A,c as et,n as Nt,e as E,t as ct,r as G,o as zt,b as Yt,s as Ft,W as mt}from"./CDxfNvir.js";import{i as $}from"./DkEcSCtK.js";import{a as Rt,e as lt,i as _t,b as U}from"./BDbKEsgj.js";import{p as T,s as at,r as dt,c as p}from"./-xzLaWd6.js";import{g as Xt,h as Vt,i as It,j as Wt,k as jt,d as St,M as st,m as ot,n as nt,o as Ht,p as qt,q as Kt,r as kt,s as Zt,u as bt,C as Jt,a as Qt,b as Ut,c as pt,S as $t,A as Mt,e as te,T as ee,f as re,t as ae,l as ne}from"./Rc0xkDGS.js";import{S as rt,m as ie}from"./Dmi7Tb1t.js";import{C as se,M as oe}from"./SyNIIHuL.js";import{C as ce}from"./XyggEU7f.js";class Dt{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e);break}}this._x0=t,this._y0=e}}function le(a){return new Dt(a,!0)}function de(a){return new Dt(a,!1)}function At(a,t){return Math.abs(a.x-t.x)<1e-6&&Math.abs(a.y-t.y)<1e-6}function ue(a,t){return At(a,t)?"":`M ${a.x} ${a.y} L ${t.x} ${t.y}`}function F(a){return Math.abs(a)<1e-6}function ut({source:a,target:t,sweep:e}){return e==="horizontal-vertical"?`M ${a.x} ${a.y} L ${t.x} ${a.y} L ${t.x} ${t.y}`:`M ${a.x} ${a.y} L ${a.x} ${t.y} L ${t.x} ${t.y}`}function fe(a){const{radius:t,dx:e,dy:h,source:c,target:l,sweep:v}=a,i=Math.max(0,Math.min(t,Math.abs(e),Math.abs(h)));if(F(i))return ut(a);const y=Math.sign(e),g=Math.sign(h);if(v==="horizontal-vertical"){const d={x:l.x-i*y,y:c.y},x={x:l.x,y:c.y+i*g};return`M ${c.x} ${c.y} L ${d.x} ${d.y} L ${x.x} ${x.y} L ${l.x} ${l.y}`}else{const d={x:c.x,y:l.y-i*g},x={x:c.x+i*y,y:l.y};return`M ${c.x} ${c.y} L ${d.x} ${d.y} L ${x.x} ${x.y} L ${l.x} ${l.y}`}}function xe(a){const{radius:t,dx:e,dy:h,source:c,target:l,sweep:v}=a,i=Math.max(0,Math.min(t,Math.abs(e),Math.abs(h)));if(F(i))return ut(a);const y=Math.sign(e),g=Math.sign(h);if(v==="horizontal-vertical"){const d={x:l.x-i*y,y:c.y},x={x:l.x,y:c.y+i*g},S=y*g>0?1:0;return`M ${c.x} ${c.y} L ${d.x} ${d.y} A ${i} ${i} 0 0 ${S} ${x.x} ${x.y} L ${l.x} ${l.y}`}else{const d={x:c.x,y:l.y-i*g},x={x:c.x+i*y,y:l.y},S=y*g>0?0:1;return`M ${c.x} ${c.y} L ${d.x} ${d.y} A ${i} ${i} 0 0 ${S} ${x.x} ${x.y} L ${l.x} ${l.y}`}}const wt={square:ut,beveled:fe,rounded:xe};function ye(a){const{source:t,target:e,type:h}=a;if(At(t,e))return"";const c=e.x-t.x,l=e.y-t.y;return h==="straight"||F(c)||F(l)?ue(t,e):(wt[h]||wt.square)({...a,dx:c,dy:l})}const Ct="M0,0L0,0";function ve({source:a,target:t,sweep:e,curve:h}){const c=t.x-a.x,l=t.y-a.y,v=Xt().curve(h);let i=[];const y=F(c)||F(l);if(e==="none"||y?i=[[a.x,a.y],[t.x,t.y]]:e==="horizontal-vertical"?i=[[a.x,a.y],[t.x,a.y],[t.x,t.y]]:e==="vertical-horizontal"&&(i=[[a.x,a.y],[a.x,t.y],[t.x,t.y]]),i.length===2&&F(c)&&F(c))return Ct;const g=v(i);return!g||g.includes("NaN")?Ct:g}var he=R("<!> <!> <!> <!>",1);function ge(a,t){const e=Gt();tt(t,!0);let h=T(t,"source",19,()=>({x:0,y:0})),c=T(t,"target",19,()=>({x:100,y:100})),l=T(t,"type",3,"rounded"),v=T(t,"radius",3,20),i=T(t,"curve",3,Vt),y=T(t,"pathRef",15),g=dt(t,["$$slots","$$events","$$legacy","source","target","sweep","type","radius","curve","pathRef","pathData","marker","markerStart","markerMid","markerEnd","motion"]);const d=o(()=>t.sweep?t.sweep:l()==="d3"?"none":"horizontal-vertical"),x=o(()=>t.markerStart||t.marker?ot("marker-start",e):""),S=o(()=>t.markerMid||t.marker?ot("marker-mid",e):""),k=o(()=>t.markerEnd||t.marker?ot("marker-end",e):""),n=It(t.motion),M=n?{type:n.type,options:{interpolate:jt,...n.options}}:void 0,D=o(()=>t.pathData?t.pathData:l()==="d3"?ve({source:h(),target:c(),sweep:r(d),curve:i()}):ye({source:h(),target:c(),sweep:r(d),type:l(),radius:v()})),s=Wt("",()=>r(D),M||{type:"none"});var u=he(),f=P(u);{let w=o(()=>r(x)?`url(#${r(x)})`:void 0),O=o(()=>r(S)?`url(#${r(S)})`:void 0),L=o(()=>r(k)?`url(#${r(k)})`:void 0),N=o(()=>nt(g,"connector"));St(f,at({get pathData(){return s.current},get"marker-start"(){return r(w)},get"marker-mid"(){return r(O)},get"marker-end"(){return r(L)}},()=>r(N),()=>g,{get pathRef(){return y()},set pathRef(V){y(V)}}))}var _=A(f,2);st(_,{get id(){return r(x)},get marker(){return t.markerStart}});var m=A(_,2);st(m,{get id(){return r(S)},get marker(){return t.markerMid}});var b=A(m,2);st(b,{get id(){return r(k)},get marker(){return t.markerEnd}}),C(a,u),et()}const q={x:0,y:0};function me(a,t){tt(t,!0);let e=T(t,"sankey",3,!1),h=T(t,"type",3,"d3"),c=T(t,"sweep",3,"none"),l=dt(t,["$$slots","$$events","$$legacy","data","sankey","source","target","orientation","x","y","curve","explicitCoords","type","sweep"]);const v=o(()=>t.source?t.source:e()?n=>({node:n.source,y:n.y0,isSource:!0}):n=>n.source),i=o(()=>t.target?t.target:e()?n=>({node:n.target,y:n.y1,isSource:!1}):n=>n.target),y=o(()=>t.orientation?t.orientation:e()?"horizontal":"vertical"),g=o(()=>t.curve?t.curve:r(y)==="horizontal"?le:de),d=o(()=>t.x?t.x:e()?n=>n.isSource?n.node.x1:n.node.x0:n=>r(y)==="horizontal"?n.y:n.x),x=o(()=>t.y?t.y:e()?n=>n.y:n=>r(y)==="horizontal"?n.x:n.y),S=o(()=>{if(t.explicitCoords)return{x:t.explicitCoords.x1,y:t.explicitCoords.y1};if(!t.data)return q;try{const n=r(v)(t.data);if(n==null)return q;const M=r(d)(n),D=r(x)(n);return{x:Number.isFinite(M)?M:0,y:Number.isFinite(D)?D:0}}catch(n){return console.error("Error accessing source coordinates:",n,"Data:",t.data),q}}),k=o(()=>{if(t.explicitCoords)return{x:t.explicitCoords.x2,y:t.explicitCoords.y2};if(!t.data)return q;try{const n=r(i)(t.data);if(n==null)return q;const M=r(d)(n),D=r(x)(n);return{x:Number.isFinite(M)?M:0,y:Number.isFinite(D)?D:0}}catch(n){return console.error("Error accessing target coordinates:",n,"Data:",t.data),q}});{let n=o(()=>nt(l,"link"));ge(a,at({get source(){return r(S)},get target(){return r(k)},get type(){return h()},get curve(){return r(g)},get sweep(){return c()}},()=>r(n)))}et()}var _e=R("<!> <!>",1);function ke(a,t){tt(t,!0);const e=Ht();let h=T(t,"r",3,5),c=T(t,"links",3,!1),l=dt(t,["$$slots","$$events","$$legacy","data","x","y","r","offsetX","offsetY","links","fill","fillOpacity","stroke","strokeWidth","opacity","children"]);function v(s,u,f){return typeof u=="function"?u(s,e):u??(Zt(f)&&!e.radial?f.bandwidth()/2:0)}const i=o(()=>t.x?kt(t.x):e.x),y=o(()=>t.y?kt(t.y):e.y),g=o(()=>t.data??e.data),d=(s,u,f)=>{const _=e.xScale(s),m=e.yScale(u);return{x:_+v(_,t.offsetX,e.xScale),y:m+v(m,t.offsetY,e.yScale),r:e.config.r?e.rGet(f):h(),xValue:s,yValue:u,data:f}},x=o(()=>r(g).flatMap(s=>{const u=r(i)(s),f=r(y)(s);return Array.isArray(u)?u.filter(Boolean).map(_=>d(_,f,s)):Array.isArray(f)?f.filter(Boolean).map(_=>d(u,_,s)):u!=null&&f!=null?d(u,f,s):[]})),S=o(()=>r(g).flatMap(s=>{const u=r(i)(s),f=r(y)(s);if(Array.isArray(u)){const[_,m]=bt(e.xGet(s)),b=e.yGet(s)+v(e.yGet(s),t.offsetY,e.yScale);return{source:{x:_+v(_,t.offsetX,e.xScale)+(e.config.r?e.rGet(s):h()),y:b},target:{x:m+v(m,t.offsetX,e.xScale)-(e.config.r?e.rGet(s):h()),y:b},data:s}}else if(Array.isArray(f)){const _=e.xGet(s)+v(e.xGet(s),t.offsetX,e.xScale),[m,b]=bt(e.yGet(s));return{source:{x:_,y:m+v(m,t.offsetY,e.yScale)},target:{x:_,y:b+v(b,t.offsetY,e.yScale)},data:s}}}));var k=Y(),n=P(k);{var M=s=>{var u=Y(),f=P(u);Rt(f,()=>t.children,()=>({points:r(x)})),C(s,u)},D=s=>{var u=_e(),f=P(u);{var _=b=>{var w=Y(),O=P(w);lt(O,17,()=>r(S),_t,(L,N)=>{{let V=o(()=>t.fill??(e.config.c?e.cGet(r(N).data):null)),K=o(()=>nt(c(),"points-link"));me(L,at({get data(){return r(N)},get stroke(){return r(V)}},()=>r(K)))}}),C(b,w)};$(f,b=>{c()&&b(_)})}var m=A(f,2);lt(m,17,()=>r(x),_t,(b,w)=>{const O=o(()=>Kt(r(w).x,r(w).y));{let L=o(()=>e.radial?r(O)[0]:r(w).x),N=o(()=>e.radial?r(O)[1]:r(w).y),V=o(()=>t.fill??(e.config.c?e.cGet(r(w).data):null)),K=o(()=>nt(l,"point"));qt(b,at({get cx(){return r(L)},get cy(){return r(N)},get r(){return r(w).r},get fill(){return r(V)},get fillOpacity(){return t.fillOpacity},get stroke(){return t.stroke},get strokeWidth(){return t.strokeWidth},get opacity(){return t.opacity}},()=>r(K)))}}),C(s,u)};$(n,s=>{t.children?s(M):s(D,!1)})}C(a,k),et()}var be=Ot('<circle fill="#485e92" class="transition-all duration-200"></circle>'),Me=R('<div class="rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl"><div class="font-medium"> </div> <div class="mt-1 flex items-center gap-2"><div class="h-2 w-2 rounded-full bg-[#485e92]"></div> <span class="text-muted-foreground"> </span></div> <div class="mt-0.5 text-[10px] text-muted-foreground"> </div></div>'),we=R("<!> <!> <!> <!> <!>",1),Ce=R('<div class="h-[300px] w-full"><!></div>'),Se=R('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No mood entries for this day</div>'),De=R("<!> <!>",1);function Ae(a,t){tt(t,!0);const e=o(()=>t.entries.length===0?[]:[...t.entries].sort((i,y)=>i.date.getTime()-y.date.getTime()).map(i=>({date:i.date,mood:i.moodLevel,id:i.id,title:i.title,isSelected:i.id===t.selectedEntryId}))),h=o(()=>{if(r(e).length===0){const g=new Date,d=new rt(g);d.setHours(0,0,0,0);const x=new rt(g);return x.setHours(24,0,0,0),[d,x]}const v=r(e)[0].date,i=new rt(v);i.setHours(0,0,0,0);const y=new rt(v);return y.setHours(24,0,0,0),[i,y]});var c=Y(),l=P(c);p(l,()=>re,(v,i)=>{i(v,{class:"w-full",children:(y,g)=>{var d=De(),x=P(d);p(x,()=>Jt,(k,n)=>{n(k,{children:(M,D)=>{var s=Y(),u=P(s);p(u,()=>Qt,(f,_)=>{_(f,{children:(m,b)=>{Nt();var w=Tt("Daily Mood Overview");C(m,w)},$$slots:{default:!0}})}),C(M,s)},$$slots:{default:!0}})});var S=A(x,2);p(S,()=>Ut,(k,n)=>{n(k,{children:(M,D)=>{var s=Y(),u=P(s);{var f=m=>{var b=Ce(),w=E(b);{let O=o(ae),L=o(ne);pt(w,{get data(){return r(e)},x:"date",get xScale(){return r(O)},get xDomain(){return r(h)},y:"mood",get yScale(){return r(L)},yDomain:[-10,10],padding:{top:16,bottom:32,left:48,right:16},children:(N,V)=>{$t(N,{children:(K,Pe)=>{var ft=we(),xt=P(ft);Mt(xt,{placement:"left",grid:!0,rule:!1,ticks:[-10,-5,0,5,10],format:I=>{const B=Math.round(I);return B>0?`+${B}`:String(B)},class:"text-xs text-muted-foreground"});var yt=A(xt,2);Mt(yt,{placement:"bottom",rule:!1,ticks:7,format:I=>I.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}),class:"text-xs text-muted-foreground"});var vt=A(yt,2);St(vt,{get curve(){return te},class:"fill-none stroke-[#485e92] stroke-2"});var ht=A(vt,2);ke(ht,{r:4,fill:"#485e92",children:(B,Z)=>{let W=()=>Z?.().points;var j=Y(),J=P(j);lt(J,17,W,Q=>Q.data.id,(Q,X)=>{const H=o(()=>r(X).data);var z=be();ct(()=>{U(z,"cx",r(X).x),U(z,"cy",r(X).y),U(z,"r",r(H).isSelected?9:4),U(z,"stroke",r(H).isSelected?"white":"none"),U(z,"stroke-width",r(H).isSelected?3:0)}),C(Q,z)}),C(B,j)},$$slots:{default:!0}});var Lt=A(ht,2);{const I=(B,Z)=>{let W=()=>Z?.().data;var j=Me(),J=E(j),Q=E(J,!0);G(J);var X=A(J,2),H=A(E(X),2),z=E(H);G(H),G(X);var gt=A(X,2),Pt=E(gt,!0);G(gt),G(j),ct(Et=>{it(Q,W().title),it(z,`Mood: ${W().mood>0?"+":""}${W().mood??""}`),it(Pt,Et)},[()=>W().date.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]),C(B,j)};p(Lt,()=>ee,(B,Z)=>{Z(B,{variant:"none",children:I,$$slots:{default:!0}})})}C(K,ft)},$$slots:{default:!0}})},$$slots:{default:!0}})}G(b),C(m,b)},_=m=>{var b=Se();C(m,b)};$(u,m=>{r(e).length>0?m(f):m(_,!1)})}C(M,s)},$$slots:{default:!0}})}),C(y,d)},$$slots:{default:!0}})}),C(a,c),et()}var Le=R('<div class="flex w-full flex-col items-end gap-2.5"><div class="flex gap-1.5"><button type="button" class="flex h-12 w-[52px] items-center justify-center rounded-full bg-[#d9dff6] transition-colors hover:bg-[#c5cbe8] disabled:cursor-not-allowed disabled:opacity-50" aria-label="Previous entry"><!></button> <button type="button" class="flex h-12 w-[52px] items-center justify-center rounded-full bg-[#d9dff6] transition-colors hover:bg-[#c5cbe8] disabled:cursor-not-allowed disabled:opacity-50" aria-label="Next entry"><!></button></div> <!></div> <div class="w-full"><!></div>',1);function Re(a,t){tt(t,!0);let e=Ft(0);const h=o(()=>ie.entries.filter(k=>k.date.getDate()===t.date.getDate()&&k.date.getMonth()===t.date.getMonth()&&k.date.getFullYear()===t.date.getFullYear()).sort((k,n)=>k.date.getTime()-n.date.getTime())),c=o(()=>r(h)[r(e)]),l=o(()=>r(h).length>0),v=o(()=>r(e)>0),i=o(()=>r(e)<r(h).length-1);function y(){r(v)&&mt(e,-1)}function g(){r(i)&&mt(e)}zt(()=>{t.date,Yt(e,0)});var d=Y(),x=P(d);{var S=k=>{var n=Le(),M=P(n),D=E(M),s=E(D);s.__click=y;var u=E(s);se(u,{class:"h-6 w-6 text-[#404659]",strokeWidth:2}),G(s);var f=A(s,2);f.__click=g;var _=E(f);ce(_,{class:"h-6 w-6 text-[#404659]",strokeWidth:2}),G(f),G(D);var m=A(D,2);{var b=L=>{oe(L,{get entry(){return r(c)},clickable:!1})};$(m,L=>{r(c)&&L(b)})}G(M);var w=A(M,2),O=E(w);{let L=o(()=>r(c)?.id);Ae(O,{get entries(){return r(h)},get selectedEntryId(){return r(L)}})}G(w),ct(()=>{s.disabled=!r(v),f.disabled=!r(i)}),C(k,n)};$(x,k=>{r(l)&&k(S)})}C(a,d),et()}Bt(["click"]);export{Re as D};
