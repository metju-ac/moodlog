import{c as et,a as i,f as B,t as yt,s as dt,d as oe}from"../chunks/CL1gL8u8.js";import{p as Dt,m as E,c as St,q as Ct,f as D,h as T,g as t,u as o,r as y,t as ut,o as _e,s as Ht,b as $t,a as pe,d as be,$ as we}from"../chunks/Dd77Lb4Z.js";import{a as Ot,e as xt,i as Wt,c as bt,b as Nt,s as kt,h as ke}from"../chunks/BF1pAsR3.js";import{c as ct,p as ft,s as Mt,r as se}from"../chunks/Dvhy9Jzs.js";import{S as Tt,l as De}from"../chunks/UajU_CNF.js";import{S as Se}from"../chunks/ZXedDc6L.js";import{m as ie}from"../chunks/CE2ydpzQ.js";import{r as le}from"../chunks/B5p6lEaW.js";import{c as Kt,d as Me,S as Rt,g as de,f as zt,e as qt,h as Xt,i as Qt,j as Ut,s as Jt,a as Ae}from"../chunks/B1Vj_4uI.js";import{N as Ce}from"../chunks/U2N0orLA.js";import{H as Te}from"../chunks/CSYaFblF.js";import{i as nt}from"../chunks/9XiK6310.js";import{l as jt,m as Bt,n as It,s as Gt,v as $e,w as Pe,x as Re,h as Pt,j as wt,y as mt,z as ht,g as Zt,B as ce,f as At,D as Le,R as ue,S as te,e as Ee,E as Oe,L as We,F as Et,C as je,G as re,H as Ft,p as Yt,I as Be,J as Ie,K as Ge,o as ee,q as ae,A as Lt,r as ve,T as fe,u as ge,t as me}from"../chunks/ChxcPS2s.js";import{b as Ne}from"../chunks/PzMlk4C0.js";import{g as Fe}from"../chunks/BKCE8P7c.js";import{b as He}from"../chunks/DTdx9Fcy.js";var Ke=B('<div class="text-sm text-muted-foreground">No mood entries found for the selected criteria</div>'),Ve=B('<div class="flex items-start justify-between"><div><div class="text-sm font-medium text-muted-foreground">Best Day</div> <div class="mt-1 text-lg font-semibold"> </div></div> <div class="text-right"><div class="text-2xl font-bold text-green-600"> </div> <div class="text-xs text-muted-foreground">avg mood</div></div></div>'),Ye=B('<div class="flex items-start justify-between border-t border-border pt-4"><div><div class="text-sm font-medium text-muted-foreground">Worst Day</div> <div class="mt-1 text-lg font-semibold"> </div></div> <div class="text-right"><div class="text-2xl font-bold text-red-600"> </div> <div class="text-xs text-muted-foreground">avg mood</div></div></div>'),ze=B('<div class="flex items-start justify-between border-t border-border pt-4"><div><div class="text-sm font-medium text-muted-foreground">Most Common Context</div> <div class="mt-1 flex items-center gap-2"><!> <span class="text-lg font-semibold"> </span></div></div> <div class="text-right"><div class="text-2xl font-bold text-[#485e92]"> </div> <div class="text-xs text-muted-foreground"> </div></div></div>'),qe=B('<div class="grid gap-4"><!> <!> <!></div>'),Xe=B("<!> <!>",1);function Qe(v,a){Dt(a,!0);const e=o(()=>{if(a.entries.length===0)return{bestDay:null,worstDay:null,mostCommonTag:null};const d=Kt(a.entries),j=Me(d);let W=j[0],$=j[0];j.forEach(n=>{n.averageMood>W.averageMood&&(W=n),n.averageMood<$.averageMood&&($=n)});const _=new Rt;a.entries.forEach(n=>{n.labels.forEach(c=>{const s=_.get(c.id);s?s.count++:_.set(c.id,{name:c.name,icon:c.icon,count:1})})});let r=null;return _.forEach(n=>{(!r||n.count>r.count)&&(r=n)}),{bestDay:W,worstDay:$,mostCommonTag:r}});function O(d){return d.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}function h(d){return d>0?`+${d.toFixed(1)}`:d.toFixed(1)}var N=et(),Y=E(N);ct(Y,()=>Gt,(d,j)=>{j(d,{class:"w-full",children:(W,$)=>{var _=Xe(),r=E(_);ct(r,()=>jt,(c,s)=>{s(c,{children:(m,M)=>{var L=et(),p=E(L);ct(p,()=>Bt,(S,F)=>{F(S,{class:"text-2xl",children:(x,w)=>{Ct();var A=yt("Highlights");i(x,A)},$$slots:{default:!0}})}),i(m,L)},$$slots:{default:!0}})});var n=D(r,2);ct(n,()=>It,(c,s)=>{s(c,{children:(m,M)=>{var L=et(),p=E(L);{var S=x=>{var w=Ke();i(x,w)},F=x=>{var w=qe(),A=T(w);{var H=g=>{var l=Ve(),f=T(l),R=D(T(f),2),u=T(R,!0);y(R),y(f);var b=D(f,2),q=T(b),U=T(q,!0);y(q),Ct(2),y(b),y(l),ut((I,X)=>{dt(u,I),dt(U,X)},[()=>O(t(e).bestDay.date),()=>h(t(e).bestDay.averageMood)]),i(g,l)};nt(A,g=>{t(e).bestDay&&g(H)})}var ot=D(A,2);{var at=g=>{var l=Ye(),f=T(l),R=D(T(f),2),u=T(R,!0);y(R),y(f);var b=D(f,2),q=T(b),U=T(q,!0);y(q),Ct(2),y(b),y(l),ut((I,X)=>{dt(u,I),dt(U,X)},[()=>O(t(e).worstDay.date),()=>h(t(e).worstDay.averageMood)]),i(g,l)};nt(ot,g=>{t(e).worstDay&&g(at)})}var C=D(ot,2);{var z=g=>{const l=o(()=>de(t(e).mostCommonTag.icon));var f=ze(),R=T(f),u=D(T(R),2),b=T(u);ct(b,()=>t(l),(V,lt)=>{lt(V,{class:"h-5 w-5",strokeWidth:2})});var q=D(b,2),U=T(q,!0);y(q),y(u),y(R);var I=D(R,2),X=T(I),st=T(X,!0);y(X);var G=D(X,2),Q=T(G,!0);y(G),y(I),y(f),ut(()=>{dt(U,t(e).mostCommonTag.name),dt(st,t(e).mostCommonTag.count),dt(Q,t(e).mostCommonTag.count===1?"entry":"entries")}),i(g,f)};nt(C,g=>{t(e).mostCommonTag&&g(z)})}y(w),i(x,w)};nt(p,x=>{a.entries.length===0?x(S):x(F,!1)})}i(m,L)},$$slots:{default:!0}})}),i(W,_)},$$slots:{default:!0}})}),i(v,N),St()}function he(){var v=$e().unknown(void 0),a=v.domain,e=v.range,O=0,h=1,N,Y,d=!1,j=0,W=0,$=.5;delete v.unknown;function _(){var r=a().length,n=h<O,c=n?h:O,s=n?O:h;N=(s-c)/Math.max(1,r-j+W*2),d&&(N=Math.floor(N)),c+=(s-c-N*(r-j))*$,Y=N*(1-j),d&&(c=Math.round(c),Y=Math.round(Y));var m=Re(r).map(function(M){return c+N*M});return e(n?m.reverse():m)}return v.domain=function(r){return arguments.length?(a(r),_()):a()},v.range=function(r){return arguments.length?([O,h]=r,O=+O,h=+h,_()):[O,h]},v.rangeRound=function(r){return[O,h]=r,O=+O,h=+h,d=!0,_()},v.bandwidth=function(){return Y},v.step=function(){return N},v.round=function(r){return arguments.length?(d=!!r,_()):d},v.padding=function(r){return arguments.length?(j=Math.min(1,W=+r),_()):j},v.paddingInner=function(r){return arguments.length?(j=Math.min(1,r),_()):j},v.paddingOuter=function(r){return arguments.length?(W=+r,_()):W},v.align=function(r){return arguments.length?($=Math.max(0,Math.min(1,r)),_()):$},v.copy=function(){return he(a(),[O,h]).round(d).paddingInner(j).paddingOuter(W).align($)},Pe.apply(_(),arguments)}function Ue(v){const a=v?.all??0,e=v?.x??a,O=v?.y??a,h=v?.left??e,N=v?.right??e,Y=v?.top??O,d=v?.bottom??O;return{left:h,right:N,bottom:d,top:Y}}function Je(v,a){const e=o(()=>a?.());return O=>{const h=Ue(t(e)?.insets),N=v.xScale.domain(),Y=v.yScale.domain(),d=Pt(t(e)?.x??v.x),j=Pt(t(e)?.y??v.y),W=Pt(t(e)?.x1??v.x1),$=Pt(t(e)?.y1??v.y1);if(wt(v.yScale)){const _=ne(v.yScale(j(O))??0)+(v.y1Scale?v.y1Scale($(O)):0)+h.top,r=Math.max(0,v.yScale.bandwidth?(v.y1Scale?v.y1Scale.bandwidth?.()??0:v.yScale.bandwidth())-h.bottom-h.top:0),n=d(O);let c=0,s=0;Array.isArray(n)?(c=mt(n),s=ht(n)):n==null?(c=0,s=0):n>0?(c=ht([0,N[0]]),s=n):(c=n,s=mt([0,N[1]]));const m=v.xScale(c)+h.left,M=Math.max(0,v.xScale(s)-v.xScale(c)-h.left-h.right);return{x:m,y:_,width:M,height:r}}else{const _=ne(v.xScale(d(O)))+(v.x1Scale?v.x1Scale(W(O)):0)+h.left,r=Math.max(0,v.xScale.bandwidth?(v.x1Scale?v.x1Scale.bandwidth?.()??0:v.xScale.bandwidth())-h.left-h.right:0),n=j(O);let c=0,s=0;Array.isArray(n)?(c=ht(n),s=mt(n)):n==null?(c=0,s=0):n>0?(c=n,s=ht([0,Y[0]])):(c=mt([0,Y[1]]),s=n);const m=v.yScale(c)+h.top,M=v.yScale(s)-v.yScale(c)-h.bottom-h.top;return{x:_,y:m,width:r,height:M}}}}function ne(v){return Array.isArray(v)?v[0]:v}function xe(v,a){Dt(a,!0);const e=Zt();let O=ft(a,"x",19,()=>e.x),h=ft(a,"y",19,()=>e.y),N=ft(a,"stroke",3,"black"),Y=ft(a,"strokeWidth",3,0),d=ft(a,"radius",3,0),j=ft(a,"rounded",3,"all"),W=se(a,["$$slots","$$events","$$legacy","data","x","y","x1","y1","fill","fillOpacity","stroke","strokeWidth","opacity","radius","rounded","motion","insets","initialX","initialY","initialHeight","initialWidth"]);const $=o(()=>N()===null||N()===void 0?"black":N()),_=o(()=>Je(e,()=>({x:O(),y:h(),x1:a.x1,y1:a.y1,insets:a.insets}))),r=o(()=>t(_)(a.data)??{x:0,y:0,width:0,height:0}),n=o(()=>wt(e.xScale)),c=o(()=>Pt(t(n)?h():O())),s=o(()=>t(c)(a.data)),m=o(()=>Array.isArray(t(s))?Le(t(s)):t(s)),M=o(()=>j()==="edge"?t(n)?t(m)>=0?"top":"bottom":t(m)>=0?"right":"left":j()),L=o(()=>["all","top","left","top-left"].includes(t(M))),p=o(()=>["all","top","right","top-right"].includes(t(M))),S=o(()=>["all","bottom","left","bottom-left"].includes(t(M))),F=o(()=>["all","bottom","right","bottom-right"].includes(t(M))),x=o(()=>t(r).width),w=o(()=>t(r).height),A=o(()=>2*d()),H=o(()=>`M${t(r).x+d()},${t(r).y} h${t(x)-t(A)}
      ${t(p)?`a${d()},${d()} 0 0 1 ${d()},${d()}`:`h${d()}v${d()}`}
      v${t(w)-t(A)}
      ${t(F)?`a${d()},${d()} 0 0 1 ${-d()},${d()}`:`v${d()}h${-d()}`}
      h${t(A)-t(x)}
      ${t(S)?`a${d()},${d()} 0 0 1 ${-d()},${-d()}`:`h${-d()}v${-d()}`}
      v${t(A)-t(w)}
      ${t(L)?`a${d()},${d()} 0 0 1 ${d()},${-d()}`:`v${-d()}h${d()}`}
      z`.split(`
`).join(""));var ot=et(),at=E(ot);{var C=g=>{{let l=o(()=>t(r).y+t(r).height),f=o(()=>t(r).x+t(r).width),R=o(()=>At(W,"bar"));ce(g,Mt({get innerRadius(){return t(r).y},get outerRadius(){return t(l)},get startAngle(){return t(r).x},get endAngle(){return t(f)},get fill(){return a.fill},get fillOpacity(){return a.fillOpacity},get stroke(){return t($)},get strokeWidth(){return Y()},get opacity(){return a.opacity},get cornerRadius(){return d()}},()=>t(R)))}},z=g=>{var l=et(),f=E(l);{var R=b=>{{let q=o(()=>t(M)==="none"?0:d()),U=o(()=>At(W,"bar"));ue(b,Mt({get fill(){return a.fill},get fillOpacity(){return a.fillOpacity},get stroke(){return t($)},get strokeWidth(){return Y()},get opacity(){return a.opacity},get rx(){return t(q)},get motion(){return a.motion},get initialX(){return a.initialX},get initialY(){return a.initialY},get initialHeight(){return a.initialHeight},get initialWidth(){return a.initialWidth}},()=>t(r),()=>t(U)))}},u=b=>{const q=o(()=>Ee(a.motion));{let U=o(()=>At(W,"bar"));te(b,Mt({get pathData(){return t(H)},get fill(){return a.fill},get fillOpacity(){return a.fillOpacity},get stroke(){return t($)},get strokeWidth(){return Y()},get opacity(){return a.opacity},get motion(){return t(q)}},()=>t(U)))}};nt(f,b=>{t(M)==="all"||t(M)==="none"||d()===0?b(R):b(u,!1)},!0)}i(g,l)};nt(at,g=>{e.radial?g(C):g(z,!1)})}i(v,ot),St()}var Ze=B("<!> <!> <!> <!>",1);function ye(v,a){Dt(a,!0);const e=Zt(),O=Oe();let h=ft(a,"x",19,()=>e.x),N=ft(a,"y",19,()=>e.y),Y=ft(a,"points",3,!1),d=ft(a,"lines",3,!1),j=ft(a,"area",3,!1),W=ft(a,"bar",3,!1),$=ft(a,"motion",3,"spring");const _=o(()=>Pt(h())),r=o(()=>Pt(N())),n=o(()=>a.data??O.data),c=o(()=>t(_)(t(n))),s=o(()=>Array.isArray(t(c))?t(c).map(l=>e.xScale(l)):e.xScale(t(c))),m=o(()=>wt(e.xScale)&&!e.radial?e.xScale.bandwidth()/2:0),M=o(()=>t(r)(t(n))),L=o(()=>Array.isArray(t(M))?t(M).map(l=>e.yScale(l)):e.yScale(t(M))),p=o(()=>wt(e.yScale)&&!e.radial?e.yScale.bandwidth()/2:0),S=o(()=>a.axis==null?wt(e.yScale)?"y":"x":a.axis),F=o(()=>{let l=[];return t(n)&&((t(S)==="x"||t(S)==="both")&&(Array.isArray(t(s))?l=[...l,...t(s).filter(Ft).map((f,R)=>({x1:f+t(m),y1:mt(e.yRange),x2:f+t(m),y2:ht(e.yRange)}))]:t(s)!=null&&(l=[...l,{x1:t(s)+t(m),y1:mt(e.yRange),x2:t(s)+t(m),y2:ht(e.yRange)}])),(t(S)==="y"||t(S)==="both")&&(Array.isArray(t(L))?l=[...l,...t(L).filter(Ft).map((f,R)=>({x1:mt(e.xRange),y1:f+t(p),x2:ht(e.xRange),y2:f+t(p)}))]:t(L)!=null&&(l=[...l,{x1:mt(e.xRange),y1:t(L)+t(p),x2:ht(e.xRange),y2:t(L)+t(p)}])),e.radial&&(l=l.map(f=>{const[R,u]=Yt(f.x1,f.y1),[b,q]=Yt(f.x2,f.y2);return{...f,x1:R,y1:u,x2:b,y2:q}}))),l}),x=o(()=>{const l={x:0,y:0,width:0,height:0};if(!t(n))return l;if(t(S)==="x"||t(S)==="both"){if(Array.isArray(t(s)))l.width=ht(t(s))-mt(t(s));else if(wt(e.xScale))l.width=e.xScale.step();else{const f=e.flatData.findIndex(b=>Number(t(_)(b))===Number(t(_)(t(n)))),u=f+1===e.flatData.length?ht(e.xDomain):t(_)(e.flatData[f+1]);l.width=(e.xScale(u)??0)-(t(s)??0)}l.x=(Array.isArray(t(s))?mt(t(s)):t(s))-(wt(e.xScale)?e.xScale.padding()*e.xScale.step()/2:0),t(S)==="x"&&(l.y=mt(e.yRange),l.height=ht(e.yRange)-mt(e.yRange))}if(t(S)==="y"||t(S)==="both"){if(Array.isArray(t(L)))l.height=ht(t(L))-mt(t(L));else if(wt(e.yScale))l.height=e.yScale.step();else{const f=e.flatData.findIndex(b=>Number(t(_)(b))===Number(t(_)(t(n)))),u=f+1===e.flatData.length?ht(e.yDomain):t(_)(e.flatData[f+1]);l.height=(e.yScale(u)??0)-(t(L)??0)}l.y=(Array.isArray(t(L))?mt(t(L)):t(L))-(wt(e.yScale)?e.yScale.padding()*e.yScale.step()/2:0),t(S)==="y"&&(l.width=ht(e.xRange))}return l}),w=o(()=>{let l=[];if(!t(n))return l;if(Array.isArray(t(s)))if(Array.isArray(t(n))){const f=t(n);Array.isArray(e.data)&&(l=e.data.map(u=>({series:u,point:u.find(b=>t(r)(b)===t(r)(f))})).filter(u=>u.point).map((u,b)=>({x:e.xScale(u.point[1])+t(m),y:t(L)+t(p),fill:e.config.c?e.cGet(u.series):null,data:{x:u.point[1],y:t(M)}})))}else l=t(s).filter(Ft).map((f,R)=>{const u=e.config.x?.[R];return{x:f+t(m),y:t(L)+t(p),fill:e.config.c?e.cGet({...t(n),$key:u}):null,data:{x:t(c),y:t(M)}}});else if(Array.isArray(t(L)))if(Array.isArray(t(n))){const f=t(n);Array.isArray(e.data)&&(l=e.data.map(u=>({series:u,point:u.find(b=>t(_)(b)===t(_)(f))})).filter(u=>u.point).map((u,b)=>({x:t(s)+t(m),y:e.yScale(u.point[1])+t(p),fill:e.config.c?e.cGet(u.series):null,data:{x:t(c),y:u.point[1]}})))}else l=t(L).filter(Ft).map((f,R)=>{const u=e.config.y[R];return{x:t(s)+t(m),y:f+t(p),fill:e.config.c?e.cGet({...t(n),$key:u}):null,data:{x:t(c),y:t(M)}}});else t(s)!=null&&t(L)!=null?l=[{x:t(s)+t(m),y:t(L)+t(p),fill:e.config.c?e.cGet(t(n)):null,data:{x:t(c),y:t(M)}}]:l=[];return e.radial&&(l=l.map(f=>{const[R,u]=Yt(f.x,f.y);return{...f,x:R,y:u}})),l}),A=o(()=>At(j(),"highlight-area")),H=o(()=>At(W(),"highlight-bar")),ot=o(()=>At(d(),"highlight-line")),at=o(()=>At(Y(),"highlight-point"));var C=et(),z=E(C);{var g=l=>{var f=Ze(),R=E(f);{var u=G=>{var Q=et(),V=E(Q);{var lt=P=>{var k=et(),J=E(k);Ot(J,j,()=>({area:t(x)})),i(P,k)},rt=P=>{var k=et(),J=E(k);{var Z=tt=>{{let it=o(()=>$()==="spring"?"spring":void 0),vt=o(()=>t(x).x+t(x).width),gt=o(()=>t(x).y+t(x).height),_t=o(()=>Et(!t(A).fill&&"fill-surface-content/5",t(A).class)),Vt=o(()=>a.onAreaClick&&(pt=>a.onAreaClick(pt,{data:t(n)})));ce(tt,{get motion(){return t(it)},get startAngle(){return t(x).x},get endAngle(){return t(vt)},get innerRadius(){return t(x).y},get outerRadius(){return t(gt)},get class(){return t(_t)},get onclick(){return t(Vt)}})}},K=tt=>{{let it=o(()=>$()==="spring"?"spring":void 0),vt=o(()=>Et(!t(A).fill&&"fill-surface-content/5",t(A).class)),gt=o(()=>a.onAreaClick&&(_t=>a.onAreaClick(_t,{data:t(n)})));ue(tt,Mt({get motion(){return t(it)}},()=>t(x),()=>t(A),{get class(){return t(vt)},get onclick(){return t(gt)}}))}};nt(J,tt=>{e.radial?tt(Z):tt(K,!1)},!0)}i(P,k)};nt(V,P=>{typeof j()=="function"?P(lt):P(rt,!1)})}i(G,Q)};nt(R,G=>{j()&&G(u)})}var b=D(R,2);{var q=G=>{var Q=et(),V=E(Q);{var lt=P=>{var k=et(),J=E(k);Ot(J,W),i(P,k)},rt=P=>{{let k=o(()=>$()==="spring"?"spring":void 0),J=o(()=>Et(!t(H).fill&&"fill-primary",t(H).class)),Z=o(()=>a.onBarClick&&(K=>a.onBarClick(K,{data:t(n)})));xe(P,Mt({get motion(){return t(k)},get data(){return t(n)}},()=>t(H),{get class(){return t(J)},get onclick(){return t(Z)}}))}};nt(V,P=>{typeof W()=="function"?P(lt):P(rt,!1)})}i(G,Q)};nt(b,G=>{W()&&G(q)})}var U=D(b,2);{var I=G=>{var Q=et(),V=E(Q);{var lt=P=>{var k=et(),J=E(k);Ot(J,d,()=>({lines:t(F)})),i(P,k)},rt=P=>{var k=et(),J=E(k);xt(J,17,()=>t(F),Wt,(Z,K)=>{{let tt=o(()=>$()==="spring"?"spring":void 0),it=o(()=>Et("stroke-surface-content/20 stroke-2 [stroke-dasharray:2,2] pointer-events-none",t(ot).class));We(Z,Mt({get motion(){return t(tt)},get x1(){return t(K).x1},get y1(){return t(K).y1},get x2(){return t(K).x2},get y2(){return t(K).y2}},()=>t(ot),{get class(){return t(it)}}))}}),i(P,k)};nt(V,P=>{typeof d()=="function"?P(lt):P(rt,!1)})}i(G,Q)};nt(U,G=>{d()&&G(I)})}var X=D(U,2);{var st=G=>{var Q=et(),V=E(Q);{var lt=P=>{var k=et(),J=E(k);Ot(J,Y,()=>({points:t(w)})),i(P,k)},rt=P=>{var k=et(),J=E(k);xt(J,17,()=>t(w),Wt,(Z,K)=>{{let tt=o(()=>$()==="spring"?"spring":void 0),it=o(()=>Et("stroke-white [paint-order:stroke] drop-shadow-sm",!t(K).fill&&(typeof Y()=="boolean"||!Y().fill)&&"fill-primary",t(at).class)),vt=o(()=>a.onPointClick&&(pt=>{pt.stopPropagation()})),gt=o(()=>a.onPointClick&&(pt=>a.onPointClick(pt,{point:t(K),data:t(n)}))),_t=o(()=>a.onPointEnter&&(pt=>{a.onPointClick&&(re(pt.target).style.cursor="pointer"),a.onPointEnter(pt,{point:t(K),data:t(n)})})),Vt=o(()=>a.onPointLeave&&(pt=>{a.onPointClick&&(re(pt.target).style.cursor="default"),a.onPointLeave(pt,{point:t(K),data:t(n)})}));je(Z,Mt({get motion(){return t(tt)},get cx(){return t(K).x},get cy(){return t(K).y},get fill(){return t(K).fill},r:4,strokeWidth:6},()=>t(at),{get class(){return t(it)},get onpointerdown(){return t(vt)},get onclick(){return t(gt)},get onpointerenter(){return t(_t)},get onpointerleave(){return t(Vt)}}))}}),i(P,k)};nt(V,P=>{typeof Y()=="function"?P(lt):P(rt,!1)})}i(G,Q)};nt(X,G=>{Y()&&G(st)})}i(l,f)};nt(z,l=>{t(n)&&l(g)})}i(v,C),St()}function ta(v,a){Dt(a,!0);let e=ft(a,"key",3,($,_)=>_),O=ft(a,"onBarClick",3,()=>{}),h=ft(a,"radius",3,0),N=ft(a,"strokeWidth",3,0),Y=ft(a,"stroke",3,"black"),d=se(a,["$$slots","$$events","$$legacy","fill","key","data","onBarClick","children","radius","strokeWidth","stroke"]);const j=Zt(),W=o(()=>Ie(a.data??j.data));{let $=o(()=>Ge("bars"));Be(v,{get class(){return t($)},children:(_,r)=>{var n=et(),c=E(n);{var s=M=>{var L=et(),p=E(L);Ot(p,()=>a.children),i(M,L)},m=M=>{var L=et(),p=E(L);xt(p,19,()=>t(W),(S,F)=>e()(S,F),(S,F)=>{{let x=o(()=>a.fill??(j.config.c?j.cGet(t(F)):null)),w=o(()=>At(d,"bars-bar"));xe(S,Mt({get data(){return t(F)},get radius(){return h()},get strokeWidth(){return N()},get stroke(){return Y()},get fill(){return t(x)},onclick:A=>O()(A,{data:t(F)})},()=>t(w)))}}),i(M,L)};nt(c,M=>{a.children?M(s):M(m,!1)})}i(_,n)},$$slots:{default:!0}})}St()}var ea=B("Average Mood <!>",1),aa=B("<!> <!> <!> <!>",1),ra=B('<div class="rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl"><div class="font-medium"><!></div> <div class="mt-1 flex items-center gap-2"><div class="h-2 w-2 rounded-full bg-[#485e92]"></div> <span class="text-muted-foreground"> </span></div> <div class="mt-0.5 text-[10px] text-muted-foreground"> </div></div>'),na=B("<!> <!>",1),oa=B('<div class="h-[300px] w-full"><!></div>'),sa=B('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No mood entries found for the selected criteria</div>'),ia=B("<!> <!>",1);function la(v,a){Dt(a,!0);const e=o(()=>qt(a.selectedTimeRange)),O=o(()=>Ut(a.entries)),h=o(()=>{if(a.entries.length===0)return[];const W=Kt(a.entries),$=Array.from(W.entries()).map(([r,n])=>{const c=n.reduce((s,m)=>s+m.moodLevel,0)/n.length;return{date:new Date(r+"T12:00:00"),averageMood:c,entryCount:n.length}}).sort((r,n)=>r.date.getTime()-n.date.getTime());if(t(e)==="day")return $.map(r=>({...r,endDate:void 0}));const _=new Rt;return $.forEach(r=>{const n=t(e)==="week"?Xt(r.date):Qt(r.date),c=t(e)==="week"?n.start.toISOString().split("T")[0]:`${n.start.getFullYear()}-${String(n.start.getMonth()+1).padStart(2,"0")}`;_.has(c)||_.set(c,{date:n.start,endDate:n.end,totalMood:0,entryCount:0});const s=_.get(c);s.totalMood+=r.averageMood*r.entryCount,s.entryCount+=r.entryCount}),Array.from(_.values()).map(r=>({date:r.date,averageMood:r.totalMood/r.entryCount,entryCount:r.entryCount,endDate:r.endDate})).sort((r,n)=>r.date.getTime()-n.date.getTime())}),N=o(()=>{if(t(h).length===0)return[new Date,new Date];const W=t(h).map($=>$.date.getTime());return[new Date(Math.min(...W)),new Date(Math.max(...W))]}),Y=o(()=>Jt(t(h).length,a.selectedTimeRange,t(e)).map($=>t(h)[$].date));var d=et(),j=E(d);ct(j,()=>Gt,(W,$)=>{$(W,{class:"w-full",children:(_,r)=>{var n=ia(),c=E(n);ct(c,()=>jt,(m,M)=>{M(m,{children:(L,p)=>{var S=et(),F=E(S);ct(F,()=>Bt,(x,w)=>{w(x,{class:"text-2xl",children:(A,H)=>{Ct();var ot=ea(),at=D(E(ot));{var C=g=>{var l=yt("(by week)");i(g,l)},z=g=>{var l=et(),f=E(l);{var R=u=>{var b=yt("(by month)");i(u,b)};nt(f,u=>{t(e)==="month"&&u(R)},!0)}i(g,l)};nt(at,g=>{t(e)==="week"?g(C):g(z,!1)})}i(A,ot)},$$slots:{default:!0}})}),i(L,S)},$$slots:{default:!0}})});var s=D(c,2);ct(s,()=>It,(m,M)=>{M(m,{children:(L,p)=>{var S=et(),F=E(S);{var x=A=>{var H=oa(),ot=T(H);{let at=o(me),C=o(()=>[new Tt(t(N)[0]),new Tt(t(N)[1])]),z=o(ge);ee(ot,{get data(){return t(h)},x:"date",get xScale(){return t(at)},get xDomain(){return t(C)},y:"averageMood",get yScale(){return t(z)},yDomain:[-10,10],padding:{top:16,bottom:32,left:48,right:16},tooltip:{mode:"bisect-x"},children:(g,l)=>{var f=na(),R=E(f);ae(R,{children:(b,q)=>{var U=aa(),I=E(U);Lt(I,{placement:"left",grid:!0,rule:!1,ticks:[-10,0,10],format:Q=>{const V=Math.round(Q);return V>=7?"Good":V<=-7?"Bad":V>=-3&&V<=3?"Neutral":""},class:"text-xs text-muted-foreground"});var X=D(I,2);Lt(X,{placement:"bottom",rule:!1,get ticks(){return t(Y)},format:Q=>{const V=t(h).find(lt=>lt.date.getTime()===Q.getTime());return V?zt(V.date,V.endDate,t(e),a.selectedTimeRange,t(O)):""},class:"text-xs text-muted-foreground"});var st=D(X,2);te(st,{get curve(){return ve},class:"fill-none stroke-[#485e92] stroke-2"});var G=D(st,2);ye(G,{points:!0,lines:!0}),i(b,U)},$$slots:{default:!0}});var u=D(R,2);{const b=(q,U)=>{let I=()=>U?.().data;var X=ra(),st=T(X),G=T(st);{var Q=Z=>{var K=yt();ut(tt=>dt(K,tt),[()=>I().date.toLocaleDateString("en-GB",{month:"short",day:"numeric",year:"numeric"})]),i(Z,K)},V=Z=>{var K=yt();ut((tt,it)=>dt(K,`${tt??""}
                    -
                    ${it??""}`),[()=>I().date.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),()=>I().endDate.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]),i(Z,K)};nt(G,Z=>{t(e)==="day"?Z(Q):Z(V,!1)})}y(st);var lt=D(st,2),rt=D(T(lt),2),P=T(rt);y(rt),y(lt);var k=D(lt,2),J=T(k);y(k),y(X),ut(Z=>{dt(P,`Avg Mood: ${I().averageMood>0?"+":""}${Z??""}`),dt(J,`${I().entryCount??""}
                  ${I().entryCount===1?"entry":"entries"}`)},[()=>I().averageMood.toFixed(1)]),i(q,X)};ct(u,()=>fe,(q,U)=>{U(q,{variant:"none",children:b,$$slots:{default:!0}})})}i(g,f)},$$slots:{default:!0}})}y(H),i(A,H)},w=A=>{var H=sa();i(A,H)};nt(F,A=>{t(h).length>0?A(x):A(w,!1)})}i(L,S)},$$slots:{default:!0}})}),i(_,n)},$$slots:{default:!0}})}),i(v,d),St()}var da=B("Entry Count <!>",1),ca=B("<!> <!> <!>",1),ua=B('<div class="h-[300px] w-full"><!></div>'),va=B('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No mood entries found for the selected criteria</div>'),fa=B("<!> <!>",1);function ga(v,a){Dt(a,!0);const e=o(()=>qt(a.selectedTimeRange)),O=o(()=>Ut(a.entries)),h=o(()=>{if(a.entries.length===0)return[];const W=Kt(a.entries),$=Array.from(W.entries()).map(([r,n])=>({date:r,count:n.length,dateObj:new Date(r+"T12:00:00")})).sort((r,n)=>r.dateObj.getTime()-n.dateObj.getTime());if(t(e)==="day")return $.map(r=>({...r,endDate:void 0}));const _=new Rt;return $.forEach(r=>{const n=t(e)==="week"?Xt(r.dateObj):Qt(r.dateObj),c=t(e)==="week"?n.start.toISOString().split("T")[0]:`${n.start.getFullYear()}-${String(n.start.getMonth()+1).padStart(2,"0")}`;_.has(c)||_.set(c,{dateObj:n.start,endDate:n.end,count:0,entries:[]});const s=_.get(c);s.count+=r.count,s.entries.push(r.count)}),Array.from(_.values()).map(r=>({date:r.dateObj.toISOString().split("T")[0],count:r.count,dateObj:r.dateObj,endDate:r.endDate})).sort((r,n)=>r.dateObj.getTime()-n.dateObj.getTime())}),N=o(()=>{if(t(h).length===0)return 10;const W=Math.max(...t(h).map($=>$.count));return Math.ceil(W*1.1)}),Y=o(()=>Jt(t(h).length,a.selectedTimeRange,t(e)).map($=>t(h)[$].date));var d=et(),j=E(d);ct(j,()=>Gt,(W,$)=>{$(W,{class:"w-full",children:(_,r)=>{var n=fa(),c=E(n);ct(c,()=>jt,(m,M)=>{M(m,{children:(L,p)=>{var S=et(),F=E(S);ct(F,()=>Bt,(x,w)=>{w(x,{class:"text-2xl",children:(A,H)=>{Ct();var ot=da(),at=D(E(ot));{var C=g=>{var l=yt("(by week)");i(g,l)},z=g=>{var l=et(),f=E(l);{var R=u=>{var b=yt("(by month)");i(u,b)};nt(f,u=>{t(e)==="month"&&u(R)},!0)}i(g,l)};nt(at,g=>{t(e)==="week"?g(C):g(z,!1)})}i(A,ot)},$$slots:{default:!0}})}),i(L,S)},$$slots:{default:!0}})});var s=D(c,2);ct(s,()=>It,(m,M)=>{M(m,{children:(L,p)=>{var S=et(),F=E(S);{var x=A=>{var H=ua(),ot=T(H);{let at=o(()=>he().padding(.2)),C=o(()=>[0,t(N)]);ee(ot,{get data(){return t(h)},x:"date",get xScale(){return t(at)},y:"count",get yDomain(){return t(C)},padding:{top:16,bottom:32,left:48,right:16},children:(z,g)=>{ae(z,{children:(l,f)=>{var R=ca(),u=E(R);Lt(u,{placement:"left",grid:!0,rule:!1,ticks:5,format:U=>Math.round(U).toString(),class:"text-xs text-muted-foreground"});var b=D(u,2);Lt(b,{placement:"bottom",rule:!1,get ticks(){return t(Y)},format:U=>{const I=t(h).find(X=>X.date===U);return I?zt(I.dateObj,I.endDate,t(e),a.selectedTimeRange,t(O)):U},class:"text-xs text-muted-foreground"});var q=D(b,2);ta(q,{radius:4,strokeWidth:0,class:"fill-[#485e92]"}),i(l,R)},$$slots:{default:!0}})},$$slots:{default:!0}})}y(H),i(A,H)},w=A=>{var H=va();i(A,H)};nt(F,A=>{t(h).length>0?A(x):A(w,!1)})}i(L,S)},$$slots:{default:!0}})}),i(_,n)},$$slots:{default:!0}})}),i(v,d),St()}var ma=B(" <!>",1),ha=B("<!> <!> <!> <!>",1),xa=B('<div class="rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl"><div class="font-medium"><!></div> <div class="mt-1 flex items-center gap-2"><div class="h-2 w-2 rounded-full bg-[#485e92]"></div> <span class="text-muted-foreground"> </span></div> <div class="mt-0.5 text-[10px] text-muted-foreground"> </div></div>'),ya=B("<!> <!>",1),_a=B('<div class="h-[300px] w-full"><!></div>'),pa=B('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No reflections found for the selected criteria</div>'),ba=B("<!> <!>",1);function wa(v,a){Dt(a,!0);const e=o(()=>qt(a.selectedTimeRange)),O=o(()=>Ut(a.reflections)),h={sleepQuality:{title:"Sleep Quality",lowLabel:"Poor",highLabel:"Excellent"},physicalActivity:{title:"Physical Activity",lowLabel:"Sedentary",highLabel:"Active"},socialInteractions:{title:"Social Interactions",lowLabel:"Draining",highLabel:"Energizing"},pressure:{title:"Pressure Level",lowLabel:"None",highLabel:"High"}},N=o(()=>h[a.selectedMetric]);function Y(r){const n=new Rt;return r.forEach(c=>{const s=c.date.toISOString().split("T")[0],m=c[a.selectedMetric];n.has(s)||n.set(s,{value:0,count:0});const M=n.get(s);M.value+=m,M.count+=1}),n}const d=o(()=>{if(a.reflections.length===0)return[];const r=Y(a.reflections),n=Array.from(r.entries()).map(([s,m])=>({date:new Date(s+"T12:00:00"),value:m.value/m.count,entryCount:m.count})).sort((s,m)=>s.date.getTime()-m.date.getTime());if(t(e)==="day")return n.map(s=>({...s,endDate:void 0}));const c=new Rt;return n.forEach(s=>{const m=t(e)==="week"?Xt(s.date):Qt(s.date),M=t(e)==="week"?m.start.toISOString().split("T")[0]:`${m.start.getFullYear()}-${String(m.start.getMonth()+1).padStart(2,"0")}`;c.has(M)||c.set(M,{date:m.start,endDate:m.end,totalValue:0,entryCount:0});const L=c.get(M);L.totalValue+=s.value*s.entryCount,L.entryCount+=s.entryCount}),Array.from(c.values()).map(s=>({date:s.date,value:s.totalValue/s.entryCount,entryCount:s.entryCount,endDate:s.endDate})).sort((s,m)=>s.date.getTime()-m.date.getTime())}),j=o(()=>{if(t(d).length===0)return[new Date,new Date];const r=t(d).map(n=>n.date.getTime());return[new Date(Math.min(...r)),new Date(Math.max(...r))]}),W=o(()=>Jt(t(d).length,a.selectedTimeRange,t(e)).map(n=>t(d)[n].date));var $=et(),_=E($);ct(_,()=>Gt,(r,n)=>{n(r,{class:"w-full",children:(c,s)=>{var m=ba(),M=E(m);ct(M,()=>jt,(p,S)=>{S(p,{children:(F,x)=>{var w=et(),A=E(w);ct(A,()=>Bt,(H,ot)=>{ot(H,{class:"text-2xl",children:(at,C)=>{Ct();var z=ma(),g=E(z),l=D(g);{var f=u=>{var b=yt("(by week)");i(u,b)},R=u=>{var b=et(),q=E(b);{var U=I=>{var X=yt("(by month)");i(I,X)};nt(q,I=>{t(e)==="month"&&I(U)},!0)}i(u,b)};nt(l,u=>{t(e)==="week"?u(f):u(R,!1)})}ut(()=>dt(g,`${t(N).title??""} `)),i(at,z)},$$slots:{default:!0}})}),i(F,w)},$$slots:{default:!0}})});var L=D(M,2);ct(L,()=>It,(p,S)=>{S(p,{children:(F,x)=>{var w=et(),A=E(w);{var H=at=>{var C=_a(),z=T(C);{let g=o(me),l=o(()=>[new Tt(t(j)[0]),new Tt(t(j)[1])]),f=o(ge);ee(z,{get data(){return t(d)},x:"date",get xScale(){return t(g)},get xDomain(){return t(l)},y:"value",get yScale(){return t(f)},yDomain:[-6,6],padding:{top:16,bottom:32,left:64,right:16},tooltip:{mode:"bisect-x"},children:(R,u)=>{var b=ya(),q=E(b);ae(q,{children:(I,X)=>{var st=ha(),G=E(st);Lt(G,{placement:"left",grid:!0,rule:!1,ticks:[-6,0,6],format:rt=>{const P=Math.round(rt);return P>=5?t(N).highLabel:P<=-5?t(N).lowLabel:P>=-1&&P<=1?"Neutral":""},class:"text-xs text-muted-foreground"});var Q=D(G,2);Lt(Q,{placement:"bottom",rule:!1,get ticks(){return t(W)},format:rt=>{const P=t(d).find(k=>k.date.getTime()===rt.getTime());return P?zt(P.date,P.endDate,t(e),a.selectedTimeRange,t(O)):""},class:"text-xs text-muted-foreground"});var V=D(Q,2);te(V,{get curve(){return ve},class:"fill-none stroke-[#485e92] stroke-2"});var lt=D(V,2);ye(lt,{points:!0,lines:!0}),i(I,st)},$$slots:{default:!0}});var U=D(q,2);{const I=(X,st)=>{let G=()=>st?.().data;var Q=xa(),V=T(Q),lt=T(V);{var rt=it=>{var vt=yt();ut(gt=>dt(vt,gt),[()=>G().date.toLocaleDateString("en-GB",{month:"short",day:"numeric",year:"numeric"})]),i(it,vt)},P=it=>{var vt=yt();ut((gt,_t)=>dt(vt,`${gt??""}
                    -
                    ${_t??""}`),[()=>G().date.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),()=>G().endDate.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]),i(it,vt)};nt(lt,it=>{t(e)==="day"?it(rt):it(P,!1)})}y(V);var k=D(V,2),J=D(T(k),2),Z=T(J);y(J),y(k);var K=D(k,2),tt=T(K);y(K),y(Q),ut(it=>{dt(Z,`${t(N).title??""}: ${G().value>0?"+":""}${it??""}`),dt(tt,`${G().entryCount??""}
                  ${G().entryCount===1?"reflection":"reflections"}`)},[()=>G().value.toFixed(1)]),i(X,Q)};ct(U,()=>fe,(X,st)=>{st(X,{variant:"none",children:I,$$slots:{default:!0}})})}i(R,b)},$$slots:{default:!0}})}y(C),i(at,C)},ot=at=>{var C=pa();i(at,C)};nt(A,at=>{t(d).length>0?at(H):at(ot,!1)})}i(F,w)},$$slots:{default:!0}})}),i(c,m)},$$slots:{default:!0}})}),i(v,$),St()}var ka=B('<button type="button" class="flex flex-1 flex-col items-center gap-1"><span class="text-[10px] text-[#44464f]"> </span> <div class="aspect-square w-full max-w-10 rounded-md transition-transform hover:scale-105"></div> <span class="text-[10px] text-[#44464f]"> </span></button>'),Da=B('<div class="flex flex-col gap-2"><div class="flex w-full justify-between gap-1"></div></div>'),Sa=B('<span class="flex-1 text-center text-[10px] text-[#44464f]"> </span>'),Ma=B('<button type="button" class="flex flex-1 flex-col items-center gap-0.5"><div></div> <span> </span></button>'),Aa=B('<div class="flex w-full justify-between gap-1"></div>'),Ca=B('<div class="flex flex-col gap-1"><div class="flex justify-between gap-1 px-1"></div> <!></div>'),Ta=B('<span class="absolute text-xs whitespace-nowrap"> </span>'),$a=B('<span class="text-[10px]"> </span>'),Pa=B('<div class="flex items-center justify-end pr-1"><!></div>'),Ra=B('<button type="button"></button>'),La=B('<div class="flex flex-col"></div>'),Ea=B('<div class="overflow-x-auto"><div class="inline-flex flex-col" style="min-width: fit-content;"><div class="mb-1 flex text-xs text-[#44464f]"><div class="relative flex" style="height: 16px;"></div></div> <div class="flex"><div class="flex shrink-0 flex-col text-xs text-[#44464f]"></div> <div class="flex"></div></div></div></div>'),Oa=B('<!> <div class="mt-3 flex items-center justify-end gap-1 text-xs text-[#44464f]"><span>Bad</span> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #ebedf0;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #e57373;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #ffb74d;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #fff176;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #aed581;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #66bb6a;"></div> <span>Good</span></div>',1),Wa=B("<!> <!>",1);function ja(v,a){Dt(a,!0);const e=o(()=>{switch(a.selectedTimeRange){case"week":return 7;case"month":return 30;case"3months":return 90;case"year":return 365}}),O=o(()=>a.selectedTimeRange==="week"),h=o(()=>a.selectedTimeRange==="month"),N=o(()=>{const p=new Tt;p.setHours(23,59,59,999);const S=Kt(a.entries),F=new Rt;for(const[A,H]of S){const ot=H.reduce((at,C)=>at+C.moodLevel,0)/H.length;F.set(A,{avgMood:ot,count:H.length})}const x=[],w=new Tt(p);for(w.setDate(w.getDate()-t(e)+1);w<=p;){const A=w.toISOString().split("T")[0],H=F.get(A);x.push({date:new Date(w),dateKey:A,avgMood:H?H.avgMood:null,count:H?H.count:0}),w.setDate(w.getDate()+1)}return x}),Y=o(()=>{if(t(O)||t(h))return[];const p=[],S=t(N)[0];if(!S)return p;const F=S.date.getDay();let x=[];for(let w=0;w<F;w++)x.push({date:new Date(0),dateKey:`empty-start-${w}`,avgMood:null,count:0,isEmpty:!0});for(const w of t(N))x.push(w),x.length===7&&(p.push(x),x=[]);if(x.length>0){for(;x.length<7;)x.push({date:new Date(0),dateKey:`empty-end-${x.length}`,avgMood:null,count:0,isEmpty:!0});p.push(x)}return p});function d(p,S){return S?"transparent":p===null?"#ebedf0":Ae(p)}function j(p){return p.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}function W(p){return p.toLocaleDateString("en-US",{weekday:"short"})}const $=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_=o(()=>{switch(a.selectedTimeRange){case"3months":case"year":return 18;default:return 18}}),r=o(()=>{switch(a.selectedTimeRange){case"3months":case"year":return 2;default:return 2}}),n=o(()=>{if(t(O)||t(h))return[];const p=[];let S=-1;return t(Y).forEach((F,x)=>{const w=F.find(A=>!A.isEmpty);if(w){const A=w.date.getMonth();A!==S&&(S=A,p.push({month:w.date.toLocaleDateString("en-US",{month:"short"}),weekIndex:x}))}}),p}),c=o(()=>{if(!t(h))return[];const p=[],S=t(N)[0];if(!S)return p;const F=S.date.getDay();let x=[];for(let w=0;w<F;w++)x.push({date:new Date(0),dateKey:`empty-start-${w}`,avgMood:null,count:0,isEmpty:!0});for(const w of t(N))x.push(w),x.length===7&&(p.push(x),x=[]);if(x.length>0){for(;x.length<7;)x.push({date:new Date(0),dateKey:`empty-end-${x.length}`,avgMood:null,count:0,isEmpty:!0});p.push(x)}return p});function s(p,S){S||(ie.setDate(p),le.setDate(p),Fe(`${He}/`))}let m=Ht(null);_e(()=>{a.selectedTimeRange,requestAnimationFrame(()=>{t(m)&&(t(m).scrollLeft=t(m).scrollWidth)})});var M=et(),L=E(M);ct(L,()=>Gt,(p,S)=>{S(p,{class:"w-full",children:(F,x)=>{var w=Wa(),A=E(w);ct(A,()=>jt,(ot,at)=>{at(ot,{children:(C,z)=>{var g=et(),l=E(g);ct(l,()=>Bt,(f,R)=>{R(f,{class:"text-2xl",children:(u,b)=>{Ct();var q=yt("Mood Activity");i(u,q)},$$slots:{default:!0}})}),i(C,g)},$$slots:{default:!0}})});var H=D(A,2);ct(H,()=>It,(ot,at)=>{at(ot,{children:(C,z)=>{var g=Oa(),l=E(g);{var f=u=>{var b=Da(),q=T(b);xt(q,21,()=>t(N),U=>U.dateKey,(U,I)=>{var X=ka();X.__click=()=>s(t(I).date);var st=T(X),G=T(st,!0);y(st);var Q=D(st,2),V=D(Q,2),lt=T(V,!0);y(V),y(X),ut((rt,P,k,J)=>{dt(G,rt),bt(Q,`background-color: ${P??""};`),Nt(Q,"title",k),dt(lt,J)},[()=>W(t(I).date),()=>d(t(I).avgMood),()=>`${j(t(I).date)}
${t(I).count>0?`Entries: ${t(I).count}
Average mood: ${t(I).avgMood?.toFixed(1)}`:"No entries"}`,()=>t(I).date.getDate()]),i(U,X)}),y(q),y(b),i(u,b)},R=u=>{var b=et(),q=E(b);{var U=X=>{var st=Ca(),G=T(st);xt(G,20,()=>$,V=>V,(V,lt)=>{var rt=Sa(),P=T(rt,!0);y(rt),ut(()=>dt(P,lt)),i(V,rt)}),y(G);var Q=D(G,2);xt(Q,17,()=>t(c),Wt,(V,lt)=>{var rt=Aa();xt(rt,21,()=>t(lt),P=>P.dateKey,(P,k)=>{var J=Ma();J.__click=()=>s(t(k).date,t(k).isEmpty);var Z=T(J),K=D(Z,2),tt=T(K,!0);y(K),y(J),ut((it,vt,gt)=>{J.disabled=t(k).isEmpty,kt(Z,1,`aspect-square w-full max-w-10 rounded-md transition-transform ${t(k).isEmpty?"":"cursor-pointer hover:scale-105"}`),bt(Z,`background-color: ${it??""};`),Nt(Z,"title",vt),kt(K,1,`text-[10px] text-[#44464f] ${t(k).isEmpty?"invisible":""}`),dt(tt,gt)},[()=>d(t(k).avgMood,t(k).isEmpty),()=>t(k).isEmpty?"":`${j(t(k).date)}
${t(k).count>0?`Entries: ${t(k).count}
Average mood: ${t(k).avgMood?.toFixed(1)}`:"No entries"}`,()=>t(k).date.getDate()]),i(P,J)}),y(rt),i(V,rt)}),y(st),i(X,st)},I=X=>{var st=Ea(),G=T(st),Q=T(G),V=T(Q);xt(V,21,()=>t(n),k=>k.weekIndex,(k,J)=>{var Z=Ta(),K=T(Z,!0);y(Z),ut(()=>{bt(Z,`left: ${t(J).weekIndex*(t(_)+t(r))}px;`),dt(K,t(J).month)}),i(k,Z)}),y(V),y(Q);var lt=D(Q,2),rt=T(lt);xt(rt,21,()=>$,Wt,(k,J,Z)=>{var K=Pa(),tt=T(K);{var it=vt=>{var gt=$a(),_t=T(gt,!0);y(gt),ut(()=>dt(_t,t(J))),i(vt,gt)};nt(tt,vt=>{Z%2===1&&vt(it)})}y(K),ut(()=>bt(K,`height: ${t(_)??""}px; width: ${a.selectedTimeRange==="year"?20:28}px;`)),i(k,K)}),y(rt);var P=D(rt,2);xt(P,21,()=>t(Y),Wt,(k,J)=>{var Z=La();xt(Z,21,()=>t(J),K=>K.dateKey,(K,tt)=>{var it=Ra();it.__click=()=>s(t(tt).date,t(tt).isEmpty),ut((vt,gt,_t)=>{kt(it,1,`rounded-sm ${t(tt).isEmpty?"cursor-default":"cursor-pointer"} transition-transform ${t(tt).isEmpty?"":"hover:scale-110"}`),bt(it,`width: ${t(_)??""}px; height: ${t(_)??""}px; background-color: ${vt??""};`),Nt(it,"title",gt),it.disabled=t(tt).isEmpty,Nt(it,"aria-label",_t)},[()=>d(t(tt).avgMood,t(tt).isEmpty),()=>t(tt).isEmpty?"":`${j(t(tt).date)}
${t(tt).count>0?`Entries: ${t(tt).count}
Average mood: ${t(tt).avgMood?.toFixed(1)}`:"No entries"}`,()=>t(tt).isEmpty?"":`View entries for ${j(t(tt).date)}`]),i(K,it)}),y(Z),ut(()=>bt(Z,`gap: ${t(r)??""}px;`)),i(k,Z)}),y(P),y(lt),y(G),y(st),Ne(st,k=>$t(m,k),()=>t(m)),ut(()=>{bt(Q,`padding-left: ${a.selectedTimeRange==="year"?28:36}px;`),bt(lt,`gap: ${t(r)??""}px;`),bt(rt,`gap: ${t(r)??""}px; margin-right: ${t(r)??""}px;`),bt(P,`gap: ${t(r)??""}px;`)}),i(X,st)};nt(q,X=>{t(h)?X(U):X(I,!1)},!0)}i(u,b)};nt(l,u=>{t(O)?u(f):u(R,!1)})}Ct(2),i(C,g)},$$slots:{default:!0}})}),i(F,w)},$$slots:{default:!0}})}),i(v,M),St()}oe(["click"]);var Ba=B('<button type="button"><!> <span> </span></button>'),Ia=B('<button type="button"> </button>'),Ga=B('<div class="flex h-screen flex-col bg-white"><main class="flex flex-1 flex-col gap-6 overflow-y-auto px-4 py-4"><div class="flex items-center justify-between"><h1 class="text-xl font-medium text-black">Insights</h1> <!></div> <div class="flex flex-wrap gap-2 py-2"><button type="button">Week</button> <button type="button">Month</button> <button type="button">3 Months</button> <button type="button">Year</button></div> <div class="flex flex-wrap gap-2"></div> <!> <!> <!> <!> <div class="flex flex-col gap-3"><div class="flex flex-wrap gap-2"></div> <!></div></main> <!></div>');function rr(v,a){Dt(a,!0);let e=Ht("3months"),O=Ht(pe(new Set)),h=Ht("sleepQuality");const N=[{value:"sleepQuality",label:"Sleep"},{value:"physicalActivity",label:"Activity"},{value:"socialInteractions",label:"Social"},{value:"pressure",label:"Pressure"}],Y=o(()=>{const C=new Date,z=new Tt(C);z.setHours(23,59,59,999);const g=new Tt(C);switch(t(e)){case"week":g.setDate(C.getDate()-7);break;case"month":g.setMonth(C.getMonth()-1);break;case"3months":g.setMonth(C.getMonth()-3);break;case"year":g.setFullYear(C.getFullYear()-1);break}return g.setHours(0,0,0,0),{start:g,end:z}}),d=o(()=>ie.allEntries.filter(C=>C.date>=t(Y).start&&C.date<=t(Y).end?t(O).size===0?!0:C.labels.some(g=>t(O).has(g.id)):!1)),j=o(()=>le.all.filter(C=>C.date>=t(Y).start&&C.date<=t(Y).end));function W(C){const z=new Se(t(O));z.has(C)?z.delete(C):z.add(C),$t(O,z,!0)}var $=Ga();ke("u6zn5i",C=>{be(()=>{we.title="Insights - MoodLog"})});var _=T($),r=T(_),n=D(T(r),2);Te(n,{}),y(r);var c=D(r,2),s=T(c);s.__click=()=>$t(e,"week");var m=D(s,2);m.__click=()=>$t(e,"month");var M=D(m,2);M.__click=()=>$t(e,"3months");var L=D(M,2);L.__click=()=>$t(e,"year"),y(c);var p=D(c,2);xt(p,21,()=>De.all,C=>C.id,(C,z)=>{const g=o(()=>de(t(z).icon)),l=o(()=>t(O).has(t(z).id));var f=Ba();f.__click=()=>W(t(z).id);var R=T(f);ct(R,()=>t(g),(q,U)=>{U(q,{class:"h-4 w-4",strokeWidth:2})});var u=D(R,2),b=T(u,!0);y(u),y(f),ut(()=>{kt(f,1,`flex items-center gap-2 rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(l)?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),dt(b,t(z).name)}),i(C,f)}),y(p);var S=D(p,2);Qe(S,{get entries(){return t(d)}});var F=D(S,2);ja(F,{get entries(){return t(d)},get selectedTimeRange(){return t(e)}});var x=D(F,2);la(x,{get entries(){return t(d)},get selectedTimeRange(){return t(e)}});var w=D(x,2);ga(w,{get entries(){return t(d)},get selectedTimeRange(){return t(e)}});var A=D(w,2),H=T(A);xt(H,21,()=>N,C=>C.value,(C,z)=>{var g=Ia();g.__click=()=>$t(h,t(z).value,!0);var l=T(g,!0);y(g),ut(()=>{kt(g,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(h)===t(z).value?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),dt(l,t(z).label)}),i(C,g)}),y(H);var ot=D(H,2);wa(ot,{get reflections(){return t(j)},get selectedTimeRange(){return t(e)},get selectedMetric(){return t(h)}}),y(A),y(_);var at=D(_,2);Ce(at,{currentTab:"insights"}),y($),ut(()=>{kt(s,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="week"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),kt(m,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="month"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),kt(M,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="3months"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),kt(L,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="year"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`)}),i(v,$),St()}oe(["click"]);export{rr as component};
