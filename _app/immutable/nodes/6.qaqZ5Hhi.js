import{c as z,a as d,f as P,t as St,s as lt,d as me,g as Nt}from"../chunks/B4gaaebp.js";import{p as Et,m as A,c as Ot,q as Wt,f as y,h as x,g as t,u as i,r as m,t as ut,o as Te,s as Ft,b as Pt,a as $e,d as Pe,$ as Re}from"../chunks/Dd77Lb4Z.js";import{a as zt,e as Ct,i as Xt,c as Tt,s as Lt,b as Le,h as Ee}from"../chunks/BnylaAzN.js";import{c as vt,p as yt,s as jt,r as he}from"../chunks/Dvhy9Jzs.js";import{S as Gt,l as Oe}from"../chunks/UajU_CNF.js";import{S as je}from"../chunks/ZXedDc6L.js";import{m as xe}from"../chunks/CE2ydpzQ.js";import{r as ye}from"../chunks/B6GDaxbh.js";import{c as te,d as Be,S as Ht,g as _e,f as ae,e as re,h as ne,i as oe,j as se,s as ie,a as We}from"../chunks/Bkrbnecd.js";import{N as Ge}from"../chunks/DT1lF0o4.js";import{H as Ie}from"../chunks/DEG-6tKa.js";import{i as J}from"../chunks/9XiK6310.js";import{l as qt,m as Qt,n as Ut,s as Jt,v as Ne,w as Fe,x as He,h as It,j as Rt,y as kt,z as Dt,g as le,B as pe,f as Bt,D as Ke,R as be,S as de,e as Ve,E as Ye,L as ze,F as Yt,C as Xe,G as fe,H as Zt,p as ee,I as qe,J as Qe,K as Ue,o as ce,q as ue,A as Kt,r as we,T as ve,u as ke,t as De,N as Je}from"../chunks/Y8IqYRfY.js";import{b as Ze}from"../chunks/PzMlk4C0.js";import{g as ta}from"../chunks/Syw8Cx2M.js";import{b as ea}from"../chunks/Dj7fd2o2.js";var aa=P('<div class="text-sm text-muted-foreground">No mood entries found for the selected criteria</div>'),ra=P('<div class="flex items-start justify-between"><div><div class="text-sm font-medium text-muted-foreground">Best Day</div> <div class="mt-1 text-lg font-semibold"> </div></div> <div class="text-right"><div class="text-2xl font-bold text-green-600"> </div> <div class="text-xs text-muted-foreground">avg mood</div></div></div>'),na=P('<div class="flex items-start justify-between border-t border-border pt-4"><div><div class="text-sm font-medium text-muted-foreground">Worst Day</div> <div class="mt-1 text-lg font-semibold"> </div></div> <div class="text-right"><div class="text-2xl font-bold text-red-600"> </div> <div class="text-xs text-muted-foreground">avg mood</div></div></div>'),oa=P('<div class="flex items-start justify-between border-t border-border pt-4"><div><div class="text-sm font-medium text-muted-foreground">Most Common Context</div> <div class="mt-1 flex items-center gap-2"><!> <span class="text-lg font-semibold"> </span></div></div> <div class="text-right"><div class="text-2xl font-bold text-[#485e92]"> </div> <div class="text-xs text-muted-foreground"> </div></div></div>'),sa=P('<div class="grid gap-4"><!> <!> <!></div>'),ia=P("<!> <!>",1);function la(h,a){Et(a,!0);const e=i(()=>{if(a.entries.length===0)return{bestDay:null,worstDay:null,mostCommonTag:null};const u=te(a.entries),E=Be(u);let R=E[0],M=E[0];E.forEach(n=>{n.averageMood>R.averageMood&&(R=n),n.averageMood<M.averageMood&&(M=n)});const D=new Ht;a.entries.forEach(n=>{n.labels.forEach(g=>{const c=D.get(g.id);c?c.count++:D.set(g.id,{name:g.name,icon:g.icon,count:1})})});let s=null;return D.forEach(n=>{(!s||n.count>s.count)&&(s=n)}),{bestDay:R,worstDay:M,mostCommonTag:s}});function $(u){return u.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}function p(u){return u>0?`+${u.toFixed(1)}`:u.toFixed(1)}var H=z(),K=A(H);vt(K,()=>Jt,(u,E)=>{E(u,{class:"w-full",children:(R,M)=>{var D=ia(),s=A(D);vt(s,()=>qt,(g,c)=>{c(g,{children:(w,S)=>{var C=z(),tt=A(C);vt(tt,()=>Qt,(O,q)=>{q(O,{class:"text-2xl",children:(j,Z)=>{Wt();var L=St("Highlights");d(j,L)},$$slots:{default:!0}})}),d(w,C)},$$slots:{default:!0}})});var n=y(s,2);vt(n,()=>Ut,(g,c)=>{c(g,{children:(w,S)=>{var C=z(),tt=A(C);{var O=j=>{var Z=aa();d(j,Z)},q=j=>{var Z=sa(),L=x(Z);{var et=l=>{var r=ra(),o=x(r),f=y(x(o),2),v=x(f,!0);m(f),m(o);var _=y(o,2),Q=x(_),at=x(Q,!0);m(Q),Wt(2),m(_),m(r),ut((B,Y)=>{lt(v,B),lt(at,Y)},[()=>$(t(e).bestDay.date),()=>p(t(e).bestDay.averageMood)]),d(l,r)};J(L,l=>{t(e).bestDay&&l(et)})}var ot=y(L,2);{var st=l=>{var r=na(),o=x(r),f=y(x(o),2),v=x(f,!0);m(f),m(o);var _=y(o,2),Q=x(_),at=x(Q,!0);m(Q),Wt(2),m(_),m(r),ut((B,Y)=>{lt(v,B),lt(at,Y)},[()=>$(t(e).worstDay.date),()=>p(t(e).worstDay.averageMood)]),d(l,r)};J(ot,l=>{t(e).worstDay&&l(st)})}var ft=y(ot,2);{var b=l=>{const r=i(()=>_e(t(e).mostCommonTag.icon));var o=oa(),f=x(o),v=y(x(f),2),_=x(v);vt(_,()=>t(r),(G,rt)=>{rt(G,{class:"h-5 w-5",strokeWidth:2})});var Q=y(_,2),at=x(Q,!0);m(Q),m(v),m(f);var B=y(f,2),Y=x(B),dt=x(Y,!0);m(Y);var W=y(Y,2),I=x(W,!0);m(W),m(B),m(o),ut(()=>{lt(at,t(e).mostCommonTag.name),lt(dt,t(e).mostCommonTag.count),lt(I,t(e).mostCommonTag.count===1?"entry":"entries")}),d(l,o)};J(ft,l=>{t(e).mostCommonTag&&l(b)})}m(Z),d(j,Z)};J(tt,j=>{a.entries.length===0?j(O):j(q,!1)})}d(w,C)},$$slots:{default:!0}})}),d(R,D)},$$slots:{default:!0}})}),d(h,H),Ot()}function Se(){var h=Ne().unknown(void 0),a=h.domain,e=h.range,$=0,p=1,H,K,u=!1,E=0,R=0,M=.5;delete h.unknown;function D(){var s=a().length,n=p<$,g=n?p:$,c=n?$:p;H=(c-g)/Math.max(1,s-E+R*2),u&&(H=Math.floor(H)),g+=(c-g-H*(s-E))*M,K=H*(1-E),u&&(g=Math.round(g),K=Math.round(K));var w=He(s).map(function(S){return g+H*S});return e(n?w.reverse():w)}return h.domain=function(s){return arguments.length?(a(s),D()):a()},h.range=function(s){return arguments.length?([$,p]=s,$=+$,p=+p,D()):[$,p]},h.rangeRound=function(s){return[$,p]=s,$=+$,p=+p,u=!0,D()},h.bandwidth=function(){return K},h.step=function(){return H},h.round=function(s){return arguments.length?(u=!!s,D()):u},h.padding=function(s){return arguments.length?(E=Math.min(1,R=+s),D()):E},h.paddingInner=function(s){return arguments.length?(E=Math.min(1,s),D()):E},h.paddingOuter=function(s){return arguments.length?(R=+s,D()):R},h.align=function(s){return arguments.length?(M=Math.max(0,Math.min(1,s)),D()):M},h.copy=function(){return Se(a(),[$,p]).round(u).paddingInner(E).paddingOuter(R).align(M)},Fe.apply(D(),arguments)}function da(h){const a=h?.all??0,e=h?.x??a,$=h?.y??a,p=h?.left??e,H=h?.right??e,K=h?.top??$,u=h?.bottom??$;return{left:p,right:H,bottom:u,top:K}}function ca(h,a){const e=i(()=>a?.());return $=>{const p=da(t(e)?.insets),H=h.xScale.domain(),K=h.yScale.domain(),u=It(t(e)?.x??h.x),E=It(t(e)?.y??h.y),R=It(t(e)?.x1??h.x1),M=It(t(e)?.y1??h.y1);if(Rt(h.yScale)){const D=ge(h.yScale(E($))??0)+(h.y1Scale?h.y1Scale(M($)):0)+p.top,s=Math.max(0,h.yScale.bandwidth?(h.y1Scale?h.y1Scale.bandwidth?.()??0:h.yScale.bandwidth())-p.bottom-p.top:0),n=u($);let g=0,c=0;Array.isArray(n)?(g=kt(n),c=Dt(n)):n==null?(g=0,c=0):n>0?(g=Dt([0,H[0]]),c=n):(g=n,c=kt([0,H[1]]));const w=h.xScale(g)+p.left,S=Math.max(0,h.xScale(c)-h.xScale(g)-p.left-p.right);return{x:w,y:D,width:S,height:s}}else{const D=ge(h.xScale(u($)))+(h.x1Scale?h.x1Scale(R($)):0)+p.left,s=Math.max(0,h.xScale.bandwidth?(h.x1Scale?h.x1Scale.bandwidth?.()??0:h.xScale.bandwidth())-p.left-p.right:0),n=E($);let g=0,c=0;Array.isArray(n)?(g=Dt(n),c=kt(n)):n==null?(g=0,c=0):n>0?(g=n,c=Dt([0,K[0]])):(g=kt([0,K[1]]),c=n);const w=h.yScale(g)+p.top,S=h.yScale(c)-h.yScale(g)-p.bottom-p.top;return{x:D,y:w,width:s,height:S}}}}function ge(h){return Array.isArray(h)?h[0]:h}function Me(h,a){Et(a,!0);const e=le();let $=yt(a,"x",19,()=>e.x),p=yt(a,"y",19,()=>e.y),H=yt(a,"stroke",3,"black"),K=yt(a,"strokeWidth",3,0),u=yt(a,"radius",3,0),E=yt(a,"rounded",3,"all"),R=he(a,["$$slots","$$events","$$legacy","data","x","y","x1","y1","fill","fillOpacity","stroke","strokeWidth","opacity","radius","rounded","motion","insets","initialX","initialY","initialHeight","initialWidth"]);const M=i(()=>H()===null||H()===void 0?"black":H()),D=i(()=>ca(e,()=>({x:$(),y:p(),x1:a.x1,y1:a.y1,insets:a.insets}))),s=i(()=>t(D)(a.data)??{x:0,y:0,width:0,height:0}),n=i(()=>Rt(e.xScale)),g=i(()=>It(t(n)?p():$())),c=i(()=>t(g)(a.data)),w=i(()=>Array.isArray(t(c))?Ke(t(c)):t(c)),S=i(()=>E()==="edge"?t(n)?t(w)>=0?"top":"bottom":t(w)>=0?"right":"left":E()),C=i(()=>["all","top","left","top-left"].includes(t(S))),tt=i(()=>["all","top","right","top-right"].includes(t(S))),O=i(()=>["all","bottom","left","bottom-left"].includes(t(S))),q=i(()=>["all","bottom","right","bottom-right"].includes(t(S))),j=i(()=>t(s).width),Z=i(()=>t(s).height),L=i(()=>2*u()),et=i(()=>`M${t(s).x+u()},${t(s).y} h${t(j)-t(L)}
      ${t(tt)?`a${u()},${u()} 0 0 1 ${u()},${u()}`:`h${u()}v${u()}`}
      v${t(Z)-t(L)}
      ${t(q)?`a${u()},${u()} 0 0 1 ${-u()},${u()}`:`v${u()}h${-u()}`}
      h${t(L)-t(j)}
      ${t(O)?`a${u()},${u()} 0 0 1 ${-u()},${-u()}`:`h${-u()}v${-u()}`}
      v${t(L)-t(Z)}
      ${t(C)?`a${u()},${u()} 0 0 1 ${u()},${-u()}`:`v${-u()}h${u()}`}
      z`.split(`
`).join(""));var ot=z(),st=A(ot);{var ft=l=>{{let r=i(()=>t(s).y+t(s).height),o=i(()=>t(s).x+t(s).width),f=i(()=>Bt(R,"bar"));pe(l,jt({get innerRadius(){return t(s).y},get outerRadius(){return t(r)},get startAngle(){return t(s).x},get endAngle(){return t(o)},get fill(){return a.fill},get fillOpacity(){return a.fillOpacity},get stroke(){return t(M)},get strokeWidth(){return K()},get opacity(){return a.opacity},get cornerRadius(){return u()}},()=>t(f)))}},b=l=>{var r=z(),o=A(r);{var f=_=>{{let Q=i(()=>t(S)==="none"?0:u()),at=i(()=>Bt(R,"bar"));be(_,jt({get fill(){return a.fill},get fillOpacity(){return a.fillOpacity},get stroke(){return t(M)},get strokeWidth(){return K()},get opacity(){return a.opacity},get rx(){return t(Q)},get motion(){return a.motion},get initialX(){return a.initialX},get initialY(){return a.initialY},get initialHeight(){return a.initialHeight},get initialWidth(){return a.initialWidth}},()=>t(s),()=>t(at)))}},v=_=>{const Q=i(()=>Ve(a.motion));{let at=i(()=>Bt(R,"bar"));de(_,jt({get pathData(){return t(et)},get fill(){return a.fill},get fillOpacity(){return a.fillOpacity},get stroke(){return t(M)},get strokeWidth(){return K()},get opacity(){return a.opacity},get motion(){return t(Q)}},()=>t(at)))}};J(o,_=>{t(S)==="all"||t(S)==="none"||u()===0?_(f):_(v,!1)},!0)}d(l,r)};J(st,l=>{e.radial?l(ft):l(b,!1)})}d(h,ot),Ot()}var ua=P("<!> <!> <!> <!>",1);function Ae(h,a){Et(a,!0);const e=le(),$=Ye();let p=yt(a,"x",19,()=>e.x),H=yt(a,"y",19,()=>e.y),K=yt(a,"points",3,!1),u=yt(a,"lines",3,!1),E=yt(a,"area",3,!1),R=yt(a,"bar",3,!1),M=yt(a,"motion",3,"spring");const D=i(()=>It(p())),s=i(()=>It(H())),n=i(()=>a.data??$.data),g=i(()=>t(D)(t(n))),c=i(()=>Array.isArray(t(g))?t(g).map(r=>e.xScale(r)):e.xScale(t(g))),w=i(()=>Rt(e.xScale)&&!e.radial?e.xScale.bandwidth()/2:0),S=i(()=>t(s)(t(n))),C=i(()=>Array.isArray(t(S))?t(S).map(r=>e.yScale(r)):e.yScale(t(S))),tt=i(()=>Rt(e.yScale)&&!e.radial?e.yScale.bandwidth()/2:0),O=i(()=>a.axis==null?Rt(e.yScale)?"y":"x":a.axis),q=i(()=>{let r=[];return t(n)&&((t(O)==="x"||t(O)==="both")&&(Array.isArray(t(c))?r=[...r,...t(c).filter(Zt).map((o,f)=>({x1:o+t(w),y1:kt(e.yRange),x2:o+t(w),y2:Dt(e.yRange)}))]:t(c)!=null&&(r=[...r,{x1:t(c)+t(w),y1:kt(e.yRange),x2:t(c)+t(w),y2:Dt(e.yRange)}])),(t(O)==="y"||t(O)==="both")&&(Array.isArray(t(C))?r=[...r,...t(C).filter(Zt).map((o,f)=>({x1:kt(e.xRange),y1:o+t(tt),x2:Dt(e.xRange),y2:o+t(tt)}))]:t(C)!=null&&(r=[...r,{x1:kt(e.xRange),y1:t(C)+t(tt),x2:Dt(e.xRange),y2:t(C)+t(tt)}])),e.radial&&(r=r.map(o=>{const[f,v]=ee(o.x1,o.y1),[_,Q]=ee(o.x2,o.y2);return{...o,x1:f,y1:v,x2:_,y2:Q}}))),r}),j=i(()=>{const r={x:0,y:0,width:0,height:0};if(!t(n))return r;if(t(O)==="x"||t(O)==="both"){if(Array.isArray(t(c)))r.width=Dt(t(c))-kt(t(c));else if(Rt(e.xScale))r.width=e.xScale.step();else{const o=e.flatData.findIndex(_=>Number(t(D)(_))===Number(t(D)(t(n)))),v=o+1===e.flatData.length?Dt(e.xDomain):t(D)(e.flatData[o+1]);r.width=(e.xScale(v)??0)-(t(c)??0)}r.x=(Array.isArray(t(c))?kt(t(c)):t(c))-(Rt(e.xScale)?e.xScale.padding()*e.xScale.step()/2:0),t(O)==="x"&&(r.y=kt(e.yRange),r.height=Dt(e.yRange)-kt(e.yRange))}if(t(O)==="y"||t(O)==="both"){if(Array.isArray(t(C)))r.height=Dt(t(C))-kt(t(C));else if(Rt(e.yScale))r.height=e.yScale.step();else{const o=e.flatData.findIndex(_=>Number(t(D)(_))===Number(t(D)(t(n)))),v=o+1===e.flatData.length?Dt(e.yDomain):t(D)(e.flatData[o+1]);r.height=(e.yScale(v)??0)-(t(C)??0)}r.y=(Array.isArray(t(C))?kt(t(C)):t(C))-(Rt(e.yScale)?e.yScale.padding()*e.yScale.step()/2:0),t(O)==="y"&&(r.width=Dt(e.xRange))}return r}),Z=i(()=>{let r=[];if(!t(n))return r;if(Array.isArray(t(c)))if(Array.isArray(t(n))){const o=t(n);Array.isArray(e.data)&&(r=e.data.map(v=>({series:v,point:v.find(_=>t(s)(_)===t(s)(o))})).filter(v=>v.point).map((v,_)=>({x:e.xScale(v.point[1])+t(w),y:t(C)+t(tt),fill:e.config.c?e.cGet(v.series):null,data:{x:v.point[1],y:t(S)}})))}else r=t(c).filter(Zt).map((o,f)=>{const v=e.config.x?.[f];return{x:o+t(w),y:t(C)+t(tt),fill:e.config.c?e.cGet({...t(n),$key:v}):null,data:{x:t(g),y:t(S)}}});else if(Array.isArray(t(C)))if(Array.isArray(t(n))){const o=t(n);Array.isArray(e.data)&&(r=e.data.map(v=>({series:v,point:v.find(_=>t(D)(_)===t(D)(o))})).filter(v=>v.point).map((v,_)=>({x:t(c)+t(w),y:e.yScale(v.point[1])+t(tt),fill:e.config.c?e.cGet(v.series):null,data:{x:t(g),y:v.point[1]}})))}else r=t(C).filter(Zt).map((o,f)=>{const v=e.config.y[f];return{x:t(c)+t(w),y:o+t(tt),fill:e.config.c?e.cGet({...t(n),$key:v}):null,data:{x:t(g),y:t(S)}}});else t(c)!=null&&t(C)!=null?r=[{x:t(c)+t(w),y:t(C)+t(tt),fill:e.config.c?e.cGet(t(n)):null,data:{x:t(g),y:t(S)}}]:r=[];return e.radial&&(r=r.map(o=>{const[f,v]=ee(o.x,o.y);return{...o,x:f,y:v}})),r}),L=i(()=>Bt(E(),"highlight-area")),et=i(()=>Bt(R(),"highlight-bar")),ot=i(()=>Bt(u(),"highlight-line")),st=i(()=>Bt(K(),"highlight-point"));var ft=z(),b=A(ft);{var l=r=>{var o=ua(),f=A(o);{var v=W=>{var I=z(),G=A(I);{var rt=k=>{var T=z(),U=A(T);zt(U,E,()=>({area:t(j)})),d(k,T)},X=k=>{var T=z(),U=A(T);{var it=V=>{{let F=i(()=>M()==="spring"?"spring":void 0),ct=i(()=>t(j).x+t(j).width),gt=i(()=>t(j).y+t(j).height),ht=i(()=>Yt(!t(L).fill&&"fill-surface-content/5",t(L).class)),Mt=i(()=>a.onAreaClick&&(nt=>a.onAreaClick(nt,{data:t(n)})));pe(V,{get motion(){return t(F)},get startAngle(){return t(j).x},get endAngle(){return t(ct)},get innerRadius(){return t(j).y},get outerRadius(){return t(gt)},get class(){return t(ht)},get onclick(){return t(Mt)}})}},N=V=>{{let F=i(()=>M()==="spring"?"spring":void 0),ct=i(()=>Yt(!t(L).fill&&"fill-surface-content/5",t(L).class)),gt=i(()=>a.onAreaClick&&(ht=>a.onAreaClick(ht,{data:t(n)})));be(V,jt({get motion(){return t(F)}},()=>t(j),()=>t(L),{get class(){return t(ct)},get onclick(){return t(gt)}}))}};J(U,V=>{e.radial?V(it):V(N,!1)},!0)}d(k,T)};J(G,k=>{typeof E()=="function"?k(rt):k(X,!1)})}d(W,I)};J(f,W=>{E()&&W(v)})}var _=y(f,2);{var Q=W=>{var I=z(),G=A(I);{var rt=k=>{var T=z(),U=A(T);zt(U,R),d(k,T)},X=k=>{{let T=i(()=>M()==="spring"?"spring":void 0),U=i(()=>Yt(!t(et).fill&&"fill-primary",t(et).class)),it=i(()=>a.onBarClick&&(N=>a.onBarClick(N,{data:t(n)})));Me(k,jt({get motion(){return t(T)},get data(){return t(n)}},()=>t(et),{get class(){return t(U)},get onclick(){return t(it)}}))}};J(G,k=>{typeof R()=="function"?k(rt):k(X,!1)})}d(W,I)};J(_,W=>{R()&&W(Q)})}var at=y(_,2);{var B=W=>{var I=z(),G=A(I);{var rt=k=>{var T=z(),U=A(T);zt(U,u,()=>({lines:t(q)})),d(k,T)},X=k=>{var T=z(),U=A(T);Ct(U,17,()=>t(q),Xt,(it,N)=>{{let V=i(()=>M()==="spring"?"spring":void 0),F=i(()=>Yt("stroke-surface-content/20 stroke-2 [stroke-dasharray:2,2] pointer-events-none",t(ot).class));ze(it,jt({get motion(){return t(V)},get x1(){return t(N).x1},get y1(){return t(N).y1},get x2(){return t(N).x2},get y2(){return t(N).y2}},()=>t(ot),{get class(){return t(F)}}))}}),d(k,T)};J(G,k=>{typeof u()=="function"?k(rt):k(X,!1)})}d(W,I)};J(at,W=>{u()&&W(B)})}var Y=y(at,2);{var dt=W=>{var I=z(),G=A(I);{var rt=k=>{var T=z(),U=A(T);zt(U,K,()=>({points:t(Z)})),d(k,T)},X=k=>{var T=z(),U=A(T);Ct(U,17,()=>t(Z),Xt,(it,N)=>{{let V=i(()=>M()==="spring"?"spring":void 0),F=i(()=>Yt("stroke-white [paint-order:stroke] drop-shadow-sm",!t(N).fill&&(typeof K()=="boolean"||!K().fill)&&"fill-primary",t(st).class)),ct=i(()=>a.onPointClick&&(nt=>{nt.stopPropagation()})),gt=i(()=>a.onPointClick&&(nt=>a.onPointClick(nt,{point:t(N),data:t(n)}))),ht=i(()=>a.onPointEnter&&(nt=>{a.onPointClick&&(fe(nt.target).style.cursor="pointer"),a.onPointEnter(nt,{point:t(N),data:t(n)})})),Mt=i(()=>a.onPointLeave&&(nt=>{a.onPointClick&&(fe(nt.target).style.cursor="default"),a.onPointLeave(nt,{point:t(N),data:t(n)})}));Xe(it,jt({get motion(){return t(V)},get cx(){return t(N).x},get cy(){return t(N).y},get fill(){return t(N).fill},r:4,strokeWidth:6},()=>t(st),{get class(){return t(F)},get onpointerdown(){return t(ct)},get onclick(){return t(gt)},get onpointerenter(){return t(ht)},get onpointerleave(){return t(Mt)}}))}}),d(k,T)};J(G,k=>{typeof K()=="function"?k(rt):k(X,!1)})}d(W,I)};J(Y,W=>{K()&&W(dt)})}d(r,o)};J(b,r=>{t(n)&&r(l)})}d(h,ft),Ot()}function va(h,a){Et(a,!0);let e=yt(a,"key",3,(M,D)=>D),$=yt(a,"onBarClick",3,()=>{}),p=yt(a,"radius",3,0),H=yt(a,"strokeWidth",3,0),K=yt(a,"stroke",3,"black"),u=he(a,["$$slots","$$events","$$legacy","fill","key","data","onBarClick","children","radius","strokeWidth","stroke"]);const E=le(),R=i(()=>Qe(a.data??E.data));{let M=i(()=>Ue("bars"));qe(h,{get class(){return t(M)},children:(D,s)=>{var n=z(),g=A(n);{var c=S=>{var C=z(),tt=A(C);zt(tt,()=>a.children),d(S,C)},w=S=>{var C=z(),tt=A(C);Ct(tt,19,()=>t(R),(O,q)=>e()(O,q),(O,q)=>{{let j=i(()=>a.fill??(E.config.c?E.cGet(t(q)):null)),Z=i(()=>Bt(u,"bars-bar"));Me(O,jt({get data(){return t(q)},get radius(){return p()},get strokeWidth(){return H()},get stroke(){return K()},get fill(){return t(j)},onclick:L=>$()(L,{data:t(q)})},()=>t(Z)))}}),d(S,C)};J(g,S=>{a.children?S(c):S(w,!1)})}d(D,n)},$$slots:{default:!0}})}Ot()}var fa=P("Average Mood <!>",1),ga=P("<!> <!> <!> <!>",1),ma=P('<div class="rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl"><div class="font-medium"><!></div> <div class="mt-1 flex items-center gap-2"><div class="h-2 w-2 rounded-full bg-[#485e92]"></div> <span class="text-muted-foreground"> </span></div> <div class="mt-0.5 text-[10px] text-muted-foreground"> </div></div>'),ha=P("<!> <!>",1),xa=P('<div class="h-[300px] w-full"><!></div>'),ya=P('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No mood entries found for the selected criteria</div>'),_a=P("<!> <!>",1);function pa(h,a){Et(a,!0);const e=i(()=>re(a.selectedTimeRange)),$=i(()=>se(a.entries)),p=i(()=>{if(a.entries.length===0)return[];const R=te(a.entries),M=Array.from(R.entries()).map(([s,n])=>{const g=n.reduce((c,w)=>c+w.moodLevel,0)/n.length;return{date:new Date(s+"T12:00:00"),averageMood:g,entryCount:n.length}}).sort((s,n)=>s.date.getTime()-n.date.getTime());if(t(e)==="day")return M.map(s=>({...s,endDate:void 0}));const D=new Ht;return M.forEach(s=>{const n=t(e)==="week"?ne(s.date):oe(s.date),g=t(e)==="week"?n.start.toISOString().split("T")[0]:`${n.start.getFullYear()}-${String(n.start.getMonth()+1).padStart(2,"0")}`;D.has(g)||D.set(g,{date:n.start,endDate:n.end,totalMood:0,entryCount:0});const c=D.get(g);c.totalMood+=s.averageMood*s.entryCount,c.entryCount+=s.entryCount}),Array.from(D.values()).map(s=>({date:s.date,averageMood:s.totalMood/s.entryCount,entryCount:s.entryCount,endDate:s.endDate})).sort((s,n)=>s.date.getTime()-n.date.getTime())}),H=i(()=>{if(t(p).length===0)return[new Date,new Date];const R=t(p).map(M=>M.date.getTime());return[new Date(Math.min(...R)),new Date(Math.max(...R))]}),K=i(()=>ie(t(p).length,a.selectedTimeRange,t(e)).map(M=>t(p)[M].date));var u=z(),E=A(u);vt(E,()=>Jt,(R,M)=>{M(R,{class:"w-full",children:(D,s)=>{var n=_a(),g=A(n);vt(g,()=>qt,(w,S)=>{S(w,{children:(C,tt)=>{var O=z(),q=A(O);vt(q,()=>Qt,(j,Z)=>{Z(j,{class:"text-2xl",children:(L,et)=>{Wt();var ot=fa(),st=y(A(ot));{var ft=l=>{var r=St("(by week)");d(l,r)},b=l=>{var r=z(),o=A(r);{var f=v=>{var _=St("(by month)");d(v,_)};J(o,v=>{t(e)==="month"&&v(f)},!0)}d(l,r)};J(st,l=>{t(e)==="week"?l(ft):l(b,!1)})}d(L,ot)},$$slots:{default:!0}})}),d(C,O)},$$slots:{default:!0}})});var c=y(g,2);vt(c,()=>Ut,(w,S)=>{S(w,{children:(C,tt)=>{var O=z(),q=A(O);{var j=L=>{var et=xa(),ot=x(et);{let st=i(De),ft=i(()=>[new Gt(t(H)[0]),new Gt(t(H)[1])]),b=i(ke);ce(ot,{get data(){return t(p)},x:"date",get xScale(){return t(st)},get xDomain(){return t(ft)},y:"averageMood",get yScale(){return t(b)},yDomain:[-10,10],padding:{top:16,bottom:32,left:48,right:16},tooltip:{mode:"bisect-x"},children:(l,r)=>{var o=ha(),f=A(o);ue(f,{children:(_,Q)=>{var at=ga(),B=A(at);Kt(B,{placement:"left",grid:!0,rule:!1,ticks:[-10,0,10],format:I=>{const G=Math.round(I);return G>=7?"Good":G<=-7?"Bad":G>=-3&&G<=3?"Neutral":""},class:"text-xs text-muted-foreground"});var Y=y(B,2);Kt(Y,{placement:"bottom",rule:!1,get ticks(){return t(K)},format:I=>{const G=t(p).find(rt=>rt.date.getTime()===I.getTime());return G?ae(G.date,G.endDate,t(e),a.selectedTimeRange,t($)):""},class:"text-xs text-muted-foreground"});var dt=y(Y,2);de(dt,{get curve(){return we},class:"fill-none stroke-[#485e92] stroke-2"});var W=y(dt,2);Ae(W,{points:!0,lines:!0}),d(_,at)},$$slots:{default:!0}});var v=y(f,2);{const _=(Q,at)=>{let B=()=>at?.().data;var Y=ma(),dt=x(Y),W=x(dt);{var I=it=>{var N=St();ut(V=>lt(N,V),[()=>B().date.toLocaleDateString("en-GB",{month:"short",day:"numeric",year:"numeric"})]),d(it,N)},G=it=>{var N=St();ut((V,F)=>lt(N,`${V??""}
                    -
                    ${F??""}`),[()=>B().date.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),()=>B().endDate.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]),d(it,N)};J(W,it=>{t(e)==="day"?it(I):it(G,!1)})}m(dt);var rt=y(dt,2),X=y(x(rt),2),k=x(X);m(X),m(rt);var T=y(rt,2),U=x(T);m(T),m(Y),ut(it=>{lt(k,`Avg Mood: ${B().averageMood>0?"+":""}${it??""}`),lt(U,`${B().entryCount??""}
                  ${B().entryCount===1?"entry":"entries"}`)},[()=>B().averageMood.toFixed(1)]),d(Q,Y)};vt(v,()=>ve,(Q,at)=>{at(Q,{variant:"none",children:_,$$slots:{default:!0}})})}d(l,o)},$$slots:{default:!0}})}m(et),d(L,et)},Z=L=>{var et=ya();d(L,et)};J(q,L=>{t(p).length>0?L(j):L(Z,!1)})}d(C,O)},$$slots:{default:!0}})}),d(D,n)},$$slots:{default:!0}})}),d(h,u),Ot()}var ba=P("Entry Count <!>",1),wa=P("<!> <!> <!>",1),ka=P('<div class="rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl"><div class="font-medium"><!></div> <div class="mt-1 flex items-center gap-2"><div class="h-2 w-2 rounded-full bg-[#485e92]"></div> <span class="text-muted-foreground"> </span></div></div>'),Da=P("<!> <!>",1),Sa=P('<div class="h-[300px] w-full"><!></div>'),Ma=P('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No mood entries found for the selected criteria</div>'),Aa=P("<!> <!>",1);function Ca(h,a){Et(a,!0);const e=i(()=>re(a.selectedTimeRange)),$=i(()=>se(a.entries)),p=i(()=>{if(a.entries.length===0)return[];const R=te(a.entries),M=Array.from(R.entries()).map(([s,n])=>({date:s,count:n.length,dateObj:new Date(s+"T12:00:00")})).sort((s,n)=>s.dateObj.getTime()-n.dateObj.getTime());if(t(e)==="day")return M.map(s=>({...s,endDate:void 0}));const D=new Ht;return M.forEach(s=>{const n=t(e)==="week"?ne(s.dateObj):oe(s.dateObj),g=t(e)==="week"?n.start.toISOString().split("T")[0]:`${n.start.getFullYear()}-${String(n.start.getMonth()+1).padStart(2,"0")}`;D.has(g)||D.set(g,{dateObj:n.start,endDate:n.end,count:0,entries:[]});const c=D.get(g);c.count+=s.count,c.entries.push(s.count)}),Array.from(D.values()).map(s=>({date:s.dateObj.toISOString().split("T")[0],count:s.count,dateObj:s.dateObj,endDate:s.endDate})).sort((s,n)=>s.dateObj.getTime()-n.dateObj.getTime())}),H=i(()=>{if(t(p).length===0)return 10;const R=Math.max(...t(p).map(M=>M.count));return Math.ceil(R*1.1)}),K=i(()=>ie(t(p).length,a.selectedTimeRange,t(e)).map(M=>t(p)[M].date));var u=z(),E=A(u);vt(E,()=>Jt,(R,M)=>{M(R,{class:"w-full",children:(D,s)=>{var n=Aa(),g=A(n);vt(g,()=>qt,(w,S)=>{S(w,{children:(C,tt)=>{var O=z(),q=A(O);vt(q,()=>Qt,(j,Z)=>{Z(j,{class:"text-2xl",children:(L,et)=>{Wt();var ot=ba(),st=y(A(ot));{var ft=l=>{var r=St("(by week)");d(l,r)},b=l=>{var r=z(),o=A(r);{var f=v=>{var _=St("(by month)");d(v,_)};J(o,v=>{t(e)==="month"&&v(f)},!0)}d(l,r)};J(st,l=>{t(e)==="week"?l(ft):l(b,!1)})}d(L,ot)},$$slots:{default:!0}})}),d(C,O)},$$slots:{default:!0}})});var c=y(g,2);vt(c,()=>Ut,(w,S)=>{S(w,{children:(C,tt)=>{var O=z(),q=A(O);{var j=L=>{var et=Sa(),ot=x(et);{let st=i(()=>Se().padding(.2)),ft=i(()=>[0,t(H)]);ce(ot,{get data(){return t(p)},x:"date",get xScale(){return t(st)},y:"count",get yDomain(){return t(ft)},padding:{top:16,bottom:32,left:48,right:16},children:(b,l)=>{var r=z(),o=A(r);vt(o,()=>Je,(f,v)=>{v(f,{mode:"band",children:(_,Q)=>{var at=Da(),B=A(at);ue(B,{children:(dt,W)=>{var I=wa(),G=A(I);Kt(G,{placement:"left",grid:!0,rule:!1,ticks:5,format:k=>Math.round(k).toString(),class:"text-xs text-muted-foreground"});var rt=y(G,2);Kt(rt,{placement:"bottom",rule:!1,get ticks(){return t(K)},format:k=>{const T=t(p).find(U=>U.date===k);return T?ae(T.dateObj,T.endDate,t(e),a.selectedTimeRange,t($)):k},class:"text-xs text-muted-foreground"});var X=y(rt,2);va(X,{radius:4,strokeWidth:0,class:"fill-[#485e92]"}),d(dt,I)},$$slots:{default:!0}});var Y=y(B,2);{const dt=(W,I)=>{let G=()=>I?.().data;var rt=ka(),X=x(rt),k=x(X);{var T=F=>{var ct=St();ut(gt=>lt(ct,gt),[()=>G().dateObj.toLocaleDateString("en-GB",{month:"short",day:"numeric",year:"numeric"})]),d(F,ct)},U=F=>{var ct=St();ut((gt,ht)=>lt(ct,`${gt??""}
                      -
                      ${ht??""}`),[()=>G().dateObj.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),()=>G().endDate.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]),d(F,ct)};J(k,F=>{t(e)==="day"?F(T):F(U,!1)})}m(X);var it=y(X,2),N=y(x(it),2),V=x(N);m(N),m(it),m(rt),ut(()=>lt(V,`${G().count??""}
                      ${G().count===1?"entry":"entries"}`)),d(W,rt)};vt(Y,()=>ve,(W,I)=>{I(W,{variant:"none",children:dt,$$slots:{default:!0}})})}d(_,at)},$$slots:{default:!0}})}),d(b,r)},$$slots:{default:!0}})}m(et),d(L,et)},Z=L=>{var et=Ma();d(L,et)};J(q,L=>{t(p).length>0?L(j):L(Z,!1)})}d(C,O)},$$slots:{default:!0}})}),d(D,n)},$$slots:{default:!0}})}),d(h,u),Ot()}var Ta=P(" <!>",1),$a=P("<!> <!> <!> <!>",1),Pa=P('<div class="rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl"><div class="font-medium"><!></div> <div class="mt-1 flex items-center gap-2"><div class="h-2 w-2 rounded-full bg-[#485e92]"></div> <span class="text-muted-foreground"> </span></div> <div class="mt-0.5 text-[10px] text-muted-foreground"> </div></div>'),Ra=P("<!> <!>",1),La=P('<div class="h-[300px] w-full"><!></div>'),Ea=P('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No reflections found for the selected criteria</div>'),Oa=P("<!> <!>",1);function ja(h,a){Et(a,!0);const e=i(()=>re(a.selectedTimeRange)),$=i(()=>se(a.reflections)),p={sleepQuality:{title:"Sleep Quality",lowLabel:"Poor",highLabel:"Excellent"},physicalActivity:{title:"Physical Activity",lowLabel:"Sedentary",highLabel:"Active"},socialInteractions:{title:"Social Interactions",lowLabel:"Draining",highLabel:"Energizing"},pressure:{title:"Pressure Level",lowLabel:"None",highLabel:"High"}},H=i(()=>p[a.selectedMetric]);function K(s){const n=new Ht;return s.forEach(g=>{const c=g.date.toISOString().split("T")[0],w=g[a.selectedMetric];n.has(c)||n.set(c,{value:0,count:0});const S=n.get(c);S.value+=w,S.count+=1}),n}const u=i(()=>{if(a.reflections.length===0)return[];const s=K(a.reflections),n=Array.from(s.entries()).map(([c,w])=>({date:new Date(c+"T12:00:00"),value:w.value/w.count,entryCount:w.count})).sort((c,w)=>c.date.getTime()-w.date.getTime());if(t(e)==="day")return n.map(c=>({...c,endDate:void 0}));const g=new Ht;return n.forEach(c=>{const w=t(e)==="week"?ne(c.date):oe(c.date),S=t(e)==="week"?w.start.toISOString().split("T")[0]:`${w.start.getFullYear()}-${String(w.start.getMonth()+1).padStart(2,"0")}`;g.has(S)||g.set(S,{date:w.start,endDate:w.end,totalValue:0,entryCount:0});const C=g.get(S);C.totalValue+=c.value*c.entryCount,C.entryCount+=c.entryCount}),Array.from(g.values()).map(c=>({date:c.date,value:c.totalValue/c.entryCount,entryCount:c.entryCount,endDate:c.endDate})).sort((c,w)=>c.date.getTime()-w.date.getTime())}),E=i(()=>{if(t(u).length===0)return[new Date,new Date];const s=t(u).map(n=>n.date.getTime());return[new Date(Math.min(...s)),new Date(Math.max(...s))]}),R=i(()=>ie(t(u).length,a.selectedTimeRange,t(e)).map(n=>t(u)[n].date));var M=z(),D=A(M);vt(D,()=>Jt,(s,n)=>{n(s,{class:"w-full",children:(g,c)=>{var w=Oa(),S=A(w);vt(S,()=>qt,(tt,O)=>{O(tt,{children:(q,j)=>{var Z=z(),L=A(Z);vt(L,()=>Qt,(et,ot)=>{ot(et,{class:"text-2xl",children:(st,ft)=>{Wt();var b=Ta(),l=A(b),r=y(l);{var o=v=>{var _=St("(by week)");d(v,_)},f=v=>{var _=z(),Q=A(_);{var at=B=>{var Y=St("(by month)");d(B,Y)};J(Q,B=>{t(e)==="month"&&B(at)},!0)}d(v,_)};J(r,v=>{t(e)==="week"?v(o):v(f,!1)})}ut(()=>lt(l,`${t(H).title??""} `)),d(st,b)},$$slots:{default:!0}})}),d(q,Z)},$$slots:{default:!0}})});var C=y(S,2);vt(C,()=>Ut,(tt,O)=>{O(tt,{children:(q,j)=>{var Z=z(),L=A(Z);{var et=st=>{var ft=La(),b=x(ft);{let l=i(De),r=i(()=>[new Gt(t(E)[0]),new Gt(t(E)[1])]),o=i(ke);ce(b,{get data(){return t(u)},x:"date",get xScale(){return t(l)},get xDomain(){return t(r)},y:"value",get yScale(){return t(o)},yDomain:[-10,10],padding:{top:16,bottom:32,left:64,right:16},tooltip:{mode:"bisect-x"},children:(f,v)=>{var _=Ra(),Q=A(_);ue(Q,{children:(B,Y)=>{var dt=$a(),W=A(dt);Kt(W,{placement:"left",grid:!0,rule:!1,ticks:[-10,0,10],format:X=>{const k=Math.round(X);return k>=7?t(H).highLabel:k<=-7?t(H).lowLabel:k>=-3&&k<=3?"Neutral":""},class:"text-xs text-muted-foreground"});var I=y(W,2);Kt(I,{placement:"bottom",rule:!1,get ticks(){return t(R)},format:X=>{const k=t(u).find(T=>T.date.getTime()===X.getTime());return k?ae(k.date,k.endDate,t(e),a.selectedTimeRange,t($)):""},class:"text-xs text-muted-foreground"});var G=y(I,2);de(G,{get curve(){return we},class:"fill-none stroke-[#485e92] stroke-2"});var rt=y(G,2);Ae(rt,{points:!0,lines:!0}),d(B,dt)},$$slots:{default:!0}});var at=y(Q,2);{const B=(Y,dt)=>{let W=()=>dt?.().data;var I=Pa(),G=x(I),rt=x(G);{var X=F=>{var ct=St();ut(gt=>lt(ct,gt),[()=>W().date.toLocaleDateString("en-GB",{month:"short",day:"numeric",year:"numeric"})]),d(F,ct)},k=F=>{var ct=St();ut((gt,ht)=>lt(ct,`${gt??""}
                    -
                    ${ht??""}`),[()=>W().date.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),()=>W().endDate.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]),d(F,ct)};J(rt,F=>{t(e)==="day"?F(X):F(k,!1)})}m(G);var T=y(G,2),U=y(x(T),2),it=x(U);m(U),m(T);var N=y(T,2),V=x(N);m(N),m(I),ut(F=>{lt(it,`${t(H).title??""}: ${W().value>0?"+":""}${F??""}`),lt(V,`${W().entryCount??""}
                  ${W().entryCount===1?"reflection":"reflections"}`)},[()=>W().value.toFixed(1)]),d(Y,I)};vt(at,()=>ve,(Y,dt)=>{dt(Y,{variant:"none",children:B,$$slots:{default:!0}})})}d(f,_)},$$slots:{default:!0}})}m(ft),d(st,ft)},ot=st=>{var ft=Ea();d(st,ft)};J(L,st=>{t(u).length>0?st(et):st(ot,!1)})}d(q,Z)},$$slots:{default:!0}})}),d(g,w)},$$slots:{default:!0}})}),d(h,M),Ot()}var Ba=P('<button type="button" class="flex flex-1 flex-col items-center gap-1"><span class="text-[10px] text-[#44464f]"> </span> <div class="aspect-square w-full max-w-10 rounded-md transition-transform hover:scale-105"></div> <span class="text-[10px] text-[#44464f]"> </span></button>'),Wa=P('<div class="flex flex-col gap-2"><div class="flex w-full justify-between gap-1"></div></div>'),Ga=P('<span class="flex-1 text-center text-[10px] text-[#44464f]"> </span>'),Ia=P('<button type="button" class="flex flex-1 flex-col items-center gap-0.5"><div></div> <span> </span></button>'),Na=P('<div class="flex w-full justify-between gap-1"></div>'),Fa=P('<div class="flex flex-col gap-1"><div class="flex justify-between gap-1 px-1"></div> <!></div>'),Ha=P('<span class="absolute text-xs whitespace-nowrap"> </span>'),Ka=P('<span class="text-[10px]"> </span>'),Va=P('<div class="flex items-center justify-end pr-1"><!></div>'),Ya=P('<button type="button"></button>'),za=P('<div class="flex flex-col"></div>'),Xa=P('<div class="overflow-x-auto"><div class="inline-flex flex-col" style="min-width: fit-content;"><div class="mb-1 flex text-xs text-[#44464f]"><div class="relative flex" style="height: 16px;"></div></div> <div class="flex"><div class="flex shrink-0 flex-col text-xs text-[#44464f]"></div> <div class="flex"></div></div></div></div>'),qa=P('<!> <div class="mt-3 flex items-center justify-end gap-1 text-xs text-[#44464f]"><span>Bad</span> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #ebedf0;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #e57373;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #ffb74d;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #fff176;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #aed581;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #66bb6a;"></div> <span>Good</span></div>',1),Qa=P('<div class="mt-1 flex items-center gap-2"><div class="h-2 w-2 rounded-full"></div> <span class="text-muted-foreground"> </span></div> <div class="mt-0.5 text-[10px] text-muted-foreground"> </div>',1),Ua=P('<div class="mt-1 text-muted-foreground">No entries</div>'),Ja=P('<div class="pointer-events-none absolute z-50 rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl"><div class="font-medium"> </div> <!></div>'),Za=P("<!> <!> <!>",1);function tr(h,a){Et(a,!0);let e=Ft(null),$=null,p=Ft(null);function H(b,l){$&&(clearTimeout($),$=null);const r=t(p)?.getBoundingClientRect();let o,f;"touches"in l?(o=l.touches[0].clientX-(r?.left??0),f=l.touches[0].clientY-(r?.top??0)):(o=l.clientX-(r?.left??0),f=l.clientY-(r?.top??0)),Pt(e,{date:b.date,avgMood:b.avgMood,count:b.count,x:o,y:f},!0)}function K(){$=setTimeout(()=>{Pt(e,null)},100)}function u(b,l){b.isEmpty||H(b,l)}function E(b,l){b.isEmpty||H(b,l)}function R(){K()}function M(b,l){b.isEmpty||H(b,l)}function D(){K()}const s=i(()=>{switch(a.selectedTimeRange){case"week":return 7;case"month":return 30;case"3months":return 90;case"year":return 365}}),n=i(()=>a.selectedTimeRange==="week"),g=i(()=>a.selectedTimeRange==="month"),c=i(()=>{const b=new Gt;b.setHours(23,59,59,999);const l=te(a.entries),r=new Ht;for(const[v,_]of l){const Q=_.reduce((at,B)=>at+B.moodLevel,0)/_.length;r.set(v,{avgMood:Q,count:_.length})}const o=[],f=new Gt(b);for(f.setDate(f.getDate()-t(s)+1);f<=b;){const v=f.toISOString().split("T")[0],_=r.get(v);o.push({date:new Date(f),dateKey:v,avgMood:_?_.avgMood:null,count:_?_.count:0}),f.setDate(f.getDate()+1)}return o}),w=i(()=>{if(t(n)||t(g))return[];const b=[],l=t(c)[0];if(!l)return b;const r=l.date.getDay();let o=[];for(let f=0;f<r;f++)o.push({date:new Date(0),dateKey:`empty-start-${f}`,avgMood:null,count:0,isEmpty:!0});for(const f of t(c))o.push(f),o.length===7&&(b.push(o),o=[]);if(o.length>0){for(;o.length<7;)o.push({date:new Date(0),dateKey:`empty-end-${o.length}`,avgMood:null,count:0,isEmpty:!0});b.push(o)}return b});function S(b,l){return l?"transparent":b===null?"#ebedf0":We(b)}function C(b){return b.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}function tt(b){return b.toLocaleDateString("en-US",{weekday:"short"})}const O=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],q=i(()=>{switch(a.selectedTimeRange){case"3months":case"year":return 18;default:return 18}}),j=i(()=>{switch(a.selectedTimeRange){case"3months":case"year":return 2;default:return 2}}),Z=i(()=>{if(t(n)||t(g))return[];const b=[];let l=-1;return t(w).forEach((r,o)=>{const f=r.find(v=>!v.isEmpty);if(f){const v=f.date.getMonth();v!==l&&(l=v,b.push({month:f.date.toLocaleDateString("en-US",{month:"short"}),weekIndex:o}))}}),b}),L=i(()=>{if(!t(g))return[];const b=[],l=t(c)[0];if(!l)return b;const r=l.date.getDay();let o=[];for(let f=0;f<r;f++)o.push({date:new Date(0),dateKey:`empty-start-${f}`,avgMood:null,count:0,isEmpty:!0});for(const f of t(c))o.push(f),o.length===7&&(b.push(o),o=[]);if(o.length>0){for(;o.length<7;)o.push({date:new Date(0),dateKey:`empty-end-${o.length}`,avgMood:null,count:0,isEmpty:!0});b.push(o)}return b});function et(b,l){l||(xe.setDate(b),ye.setDate(b),ta(`${ea}/`))}let ot=Ft(null);Te(()=>{a.selectedTimeRange,requestAnimationFrame(()=>{t(ot)&&(t(ot).scrollLeft=t(ot).scrollWidth)})});var st=z(),ft=A(st);vt(ft,()=>Jt,(b,l)=>{l(b,{class:"relative w-full",get ref(){return t(p)},set ref(r){Pt(p,r,!0)},children:(r,o)=>{var f=Za(),v=A(f);vt(v,()=>qt,(B,Y)=>{Y(B,{children:(dt,W)=>{var I=z(),G=A(I);vt(G,()=>Qt,(rt,X)=>{X(rt,{class:"text-2xl",children:(k,T)=>{Wt();var U=St("Mood Activity");d(k,U)},$$slots:{default:!0}})}),d(dt,I)},$$slots:{default:!0}})});var _=y(v,2);vt(_,()=>Ut,(B,Y)=>{Y(B,{children:(dt,W)=>{var I=qa(),G=A(I);{var rt=k=>{var T=Wa(),U=x(T);Ct(U,21,()=>t(c),it=>it.dateKey,(it,N)=>{var V=Ba();V.__click=()=>et(t(N).date),V.__mousemove=nt=>E(t(N),nt),V.__touchstart=nt=>M(t(N),nt),V.__touchend=D;var F=x(V),ct=x(F,!0);m(F);var gt=y(F,2),ht=y(gt,2),Mt=x(ht,!0);m(ht),m(V),ut((nt,$t,mt)=>{lt(ct,nt),Tt(gt,`background-color: ${$t??""};`),lt(Mt,mt)},[()=>tt(t(N).date),()=>S(t(N).avgMood),()=>t(N).date.getDate()]),Nt("mouseenter",V,nt=>u(t(N),nt)),Nt("mouseleave",V,R),d(it,V)}),m(U),m(T),d(k,T)},X=k=>{var T=z(),U=A(T);{var it=V=>{var F=Fa(),ct=x(F);Ct(ct,20,()=>O,ht=>ht,(ht,Mt)=>{var nt=Ga(),$t=x(nt,!0);m(nt),ut(()=>lt($t,Mt)),d(ht,nt)}),m(ct);var gt=y(ct,2);Ct(gt,17,()=>t(L),Xt,(ht,Mt)=>{var nt=Na();Ct(nt,21,()=>t(Mt),$t=>$t.dateKey,($t,mt)=>{var _t=Ia();_t.__click=()=>et(t(mt).date,t(mt).isEmpty),_t.__mousemove=xt=>E(t(mt),xt),_t.__touchstart=xt=>M(t(mt),xt),_t.__touchend=D;var bt=x(_t),wt=y(bt,2),pt=x(wt,!0);m(wt),m(_t),ut((xt,At)=>{_t.disabled=t(mt).isEmpty,Lt(bt,1,`aspect-square w-full max-w-10 rounded-md transition-transform ${t(mt).isEmpty?"":"cursor-pointer hover:scale-105"}`),Tt(bt,`background-color: ${xt??""};`),Lt(wt,1,`text-[10px] text-[#44464f] ${t(mt).isEmpty?"invisible":""}`),lt(pt,At)},[()=>S(t(mt).avgMood,t(mt).isEmpty),()=>t(mt).date.getDate()]),Nt("mouseenter",_t,xt=>u(t(mt),xt)),Nt("mouseleave",_t,R),d($t,_t)}),m(nt),d(ht,nt)}),m(F),d(V,F)},N=V=>{var F=Xa(),ct=x(F),gt=x(ct),ht=x(gt);Ct(ht,21,()=>t(Z),mt=>mt.weekIndex,(mt,_t)=>{var bt=Ha(),wt=x(bt,!0);m(bt),ut(()=>{Tt(bt,`left: ${t(_t).weekIndex*(t(q)+t(j))}px;`),lt(wt,t(_t).month)}),d(mt,bt)}),m(ht),m(gt);var Mt=y(gt,2),nt=x(Mt);Ct(nt,21,()=>O,Xt,(mt,_t,bt)=>{var wt=Va(),pt=x(wt);{var xt=At=>{var Vt=Ka(),Ce=x(Vt,!0);m(Vt),ut(()=>lt(Ce,t(_t))),d(At,Vt)};J(pt,At=>{bt%2===1&&At(xt)})}m(wt),ut(()=>Tt(wt,`height: ${t(q)??""}px; width: ${a.selectedTimeRange==="year"?20:28}px;`)),d(mt,wt)}),m(nt);var $t=y(nt,2);Ct($t,21,()=>t(w),Xt,(mt,_t)=>{var bt=za();Ct(bt,21,()=>t(_t),wt=>wt.dateKey,(wt,pt)=>{var xt=Ya();xt.__click=()=>et(t(pt).date,t(pt).isEmpty),xt.__mousemove=At=>E(t(pt),At),xt.__touchstart=At=>M(t(pt),At),xt.__touchend=D,ut((At,Vt)=>{Lt(xt,1,`rounded-sm ${t(pt).isEmpty?"cursor-default":"cursor-pointer"} transition-transform ${t(pt).isEmpty?"":"hover:scale-110"}`),Tt(xt,`width: ${t(q)??""}px; height: ${t(q)??""}px; background-color: ${At??""};`),xt.disabled=t(pt).isEmpty,Le(xt,"aria-label",Vt)},[()=>S(t(pt).avgMood,t(pt).isEmpty),()=>t(pt).isEmpty?"":`View entries for ${C(t(pt).date)}`]),Nt("mouseenter",xt,At=>u(t(pt),At)),Nt("mouseleave",xt,R),d(wt,xt)}),m(bt),ut(()=>Tt(bt,`gap: ${t(j)??""}px;`)),d(mt,bt)}),m($t),m(Mt),m(ct),m(F),Ze(F,mt=>Pt(ot,mt),()=>t(ot)),ut(()=>{Tt(gt,`padding-left: ${a.selectedTimeRange==="year"?28:36}px;`),Tt(Mt,`gap: ${t(j)??""}px;`),Tt(nt,`gap: ${t(j)??""}px; margin-right: ${t(j)??""}px;`),Tt($t,`gap: ${t(j)??""}px;`)}),d(V,F)};J(U,V=>{t(g)?V(it):V(N,!1)},!0)}d(k,T)};J(G,k=>{t(n)?k(rt):k(X,!1)})}Wt(2),d(dt,I)},$$slots:{default:!0}})});var Q=y(_,2);{var at=B=>{var Y=Ja(),dt=x(Y),W=x(dt,!0);m(dt);var I=y(dt,2);{var G=X=>{var k=Qa(),T=A(k),U=x(T),it=y(U,2),N=x(it);m(it),m(T);var V=y(T,2),F=x(V);m(V),ut((ct,gt)=>{Tt(U,`background-color: ${ct??""};`),lt(N,`Avg Mood: ${gt??""}`),lt(F,`${t(e).count??""}
          ${t(e).count===1?"entry":"entries"}`)},[()=>S(t(e).avgMood),()=>t(e).avgMood!==null?(t(e).avgMood>0?"+":"")+t(e).avgMood.toFixed(1):"N/A"]),d(X,k)},rt=X=>{var k=Ua();d(X,k)};J(I,X=>{t(e).count>0?X(G):X(rt,!1)})}m(Y),ut(X=>{Tt(Y,`left: ${t(e).x+10}px; top: ${t(e).y+10}px;`),lt(W,X)},[()=>t(e).date.toLocaleDateString("en-GB",{weekday:"short",month:"short",day:"numeric",year:"numeric"})]),d(B,Y)};J(Q,B=>{t(e)&&B(at)})}d(r,f)},$$slots:{default:!0}})}),d(h,st),Ot()}me(["click","mousemove","touchstart","touchend"]);var er=P('<button type="button"><!> <span> </span></button>'),ar=P('<button type="button"> </button>'),rr=P('<div class="flex h-screen flex-col bg-white"><main class="flex flex-1 flex-col gap-6 overflow-y-auto px-4 py-4 pb-24"><div class="flex items-center justify-between"><h1 class="text-xl font-medium text-black">Insights</h1> <!></div> <div class="sticky top-0 z-10 -mx-4 flex flex-col gap-2 px-4 py-2"><div class="flex flex-wrap gap-2"><button type="button">Week</button> <button type="button">Month</button> <button type="button">3 Months</button> <button type="button">Year</button></div> <div class="-mx-4 overflow-x-auto px-4"><div class="flex gap-2"></div></div></div> <!> <!> <!> <!> <div class="flex flex-col gap-3"><div class="flex flex-wrap gap-2"></div> <!></div></main> <!></div>');function pr(h,a){Et(a,!0);let e=Ft("3months"),$=Ft($e(new Set)),p=Ft("sleepQuality");const H=[{value:"sleepQuality",label:"Sleep"},{value:"physicalActivity",label:"Activity"},{value:"socialInteractions",label:"Social"},{value:"pressure",label:"Pressure"}],K=i(()=>{const l=new Date,r=new Gt(l);r.setHours(23,59,59,999);const o=new Gt(l);switch(t(e)){case"week":o.setDate(l.getDate()-7);break;case"month":o.setMonth(l.getMonth()-1);break;case"3months":o.setMonth(l.getMonth()-3);break;case"year":o.setFullYear(l.getFullYear()-1);break}return o.setHours(0,0,0,0),{start:o,end:r}}),u=i(()=>xe.allEntries.filter(l=>l.date>=t(K).start&&l.date<=t(K).end?t($).size===0?!0:l.labels.some(o=>t($).has(o.id)):!1)),E=i(()=>ye.all.filter(l=>l.date>=t(K).start&&l.date<=t(K).end));function R(l){const r=new je(t($));r.has(l)?r.delete(l):r.add(l),Pt($,r,!0)}var M=rr();Ee("u6zn5i",l=>{Pe(()=>{Re.title="Insights - MoodLog"})});var D=x(M),s=x(D),n=y(x(s),2);Ie(n,{}),m(s);var g=y(s,2),c=x(g),w=x(c);w.__click=()=>Pt(e,"week");var S=y(w,2);S.__click=()=>Pt(e,"month");var C=y(S,2);C.__click=()=>Pt(e,"3months");var tt=y(C,2);tt.__click=()=>Pt(e,"year"),m(c);var O=y(c,2),q=x(O);Ct(q,21,()=>Oe.all,l=>l.id,(l,r)=>{const o=i(()=>_e(t(r).icon)),f=i(()=>t($).has(t(r).id));var v=er();v.__click=()=>R(t(r).id);var _=x(v);vt(_,()=>t(o),(B,Y)=>{Y(B,{class:"h-4 w-4",strokeWidth:2})});var Q=y(_,2),at=x(Q,!0);m(Q),m(v),ut(()=>{Lt(v,1,`flex shrink-0 items-center gap-2 rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(f)?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),lt(at,t(r).name)}),d(l,v)}),m(q),m(O),m(g);var j=y(g,2);la(j,{get entries(){return t(u)}});var Z=y(j,2);tr(Z,{get entries(){return t(u)},get selectedTimeRange(){return t(e)}});var L=y(Z,2);pa(L,{get entries(){return t(u)},get selectedTimeRange(){return t(e)}});var et=y(L,2);Ca(et,{get entries(){return t(u)},get selectedTimeRange(){return t(e)}});var ot=y(et,2),st=x(ot);Ct(st,21,()=>H,l=>l.value,(l,r)=>{var o=ar();o.__click=()=>Pt(p,t(r).value,!0);var f=x(o,!0);m(o),ut(()=>{Lt(o,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(p)===t(r).value?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),lt(f,t(r).label)}),d(l,o)}),m(st);var ft=y(st,2);ja(ft,{get reflections(){return t(E)},get selectedTimeRange(){return t(e)},get selectedMetric(){return t(p)}}),m(ot),m(D);var b=y(D,2);Ge(b,{currentTab:"insights"}),m(M),ut(()=>{Lt(w,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="week"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),Lt(S,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="month"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),Lt(C,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="3months"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),Lt(tt,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="year"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`)}),d(h,M),Ot()}me(["click"]);export{pr as component};
