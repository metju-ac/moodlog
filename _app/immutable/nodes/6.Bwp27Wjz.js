import{c as Z,a as l,f as B,t as yt,s as lt,d as oe}from"../chunks/CL1gL8u8.js";import{p as Dt,m as L,c as St,q as Ct,f as D,h as M,g as t,u as o,r as m,t as ut,o as _e,s as Ht,b as $t,a as pe,d as be,$ as we}from"../chunks/Dd77Lb4Z.js";import{a as Ot,e as xt,i as Wt,c as bt,b as Nt,s as kt,h as ke}from"../chunks/BF1pAsR3.js";import{c as dt,p as ft,s as Mt,r as se}from"../chunks/Dvhy9Jzs.js";import{S as Tt,l as De}from"../chunks/UajU_CNF.js";import{S as Se}from"../chunks/ZXedDc6L.js";import{m as ie}from"../chunks/CE2ydpzQ.js";import{r as le}from"../chunks/B6GDaxbh.js";import{c as Kt,d as Me,S as Rt,g as de,f as zt,e as qt,h as Xt,i as Qt,j as Ut,s as Jt,a as Ae}from"../chunks/B1Vj_4uI.js";import{N as Ce}from"../chunks/CE_hq1Pt.js";import{H as Te}from"../chunks/7Lu4BvHs.js";import{i as rt}from"../chunks/9XiK6310.js";import{l as jt,m as Bt,n as It,s as Gt,v as $e,w as Pe,x as Re,h as Pt,j as wt,y as mt,z as ht,g as Zt,B as ce,f as At,D as Le,R as ue,S as te,e as Ee,E as Oe,L as We,F as Et,C as je,G as re,H as Ft,p as Yt,I as Be,J as Ie,K as Ge,o as ee,q as ae,A as Lt,r as ve,T as fe,u as ge,t as me}from"../chunks/ChxcPS2s.js";import{b as Ne}from"../chunks/PzMlk4C0.js";import{g as Fe}from"../chunks/D_4iCv4K.js";import{b as He}from"../chunks/BVvM3X8s.js";var Ke=B('<div class="text-sm text-muted-foreground">No mood entries found for the selected criteria</div>'),Ve=B('<div class="flex items-start justify-between"><div><div class="text-sm font-medium text-muted-foreground">Best Day</div> <div class="mt-1 text-lg font-semibold"> </div></div> <div class="text-right"><div class="text-2xl font-bold text-green-600"> </div> <div class="text-xs text-muted-foreground">avg mood</div></div></div>'),Ye=B('<div class="flex items-start justify-between border-t border-border pt-4"><div><div class="text-sm font-medium text-muted-foreground">Worst Day</div> <div class="mt-1 text-lg font-semibold"> </div></div> <div class="text-right"><div class="text-2xl font-bold text-red-600"> </div> <div class="text-xs text-muted-foreground">avg mood</div></div></div>'),ze=B('<div class="flex items-start justify-between border-t border-border pt-4"><div><div class="text-sm font-medium text-muted-foreground">Most Common Context</div> <div class="mt-1 flex items-center gap-2"><!> <span class="text-lg font-semibold"> </span></div></div> <div class="text-right"><div class="text-2xl font-bold text-[#485e92]"> </div> <div class="text-xs text-muted-foreground"> </div></div></div>'),qe=B('<div class="grid gap-4"><!> <!> <!></div>'),Xe=B("<!> <!>",1);function Qe(g,a){Dt(a,!0);const e=o(()=>{if(a.entries.length===0)return{bestDay:null,worstDay:null,mostCommonTag:null};const d=Kt(a.entries),j=Me(d);let O=j[0],T=j[0];j.forEach(n=>{n.averageMood>O.averageMood&&(O=n),n.averageMood<T.averageMood&&(T=n)});const _=new Rt;a.entries.forEach(n=>{n.labels.forEach(f=>{const i=_.get(f.id);i?i.count++:_.set(f.id,{name:f.name,icon:f.icon,count:1})})});let r=null;return _.forEach(n=>{(!r||n.count>r.count)&&(r=n)}),{bestDay:O,worstDay:T,mostCommonTag:r}});function E(d){return d.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}function x(d){return d>0?`+${d.toFixed(1)}`:d.toFixed(1)}var G=Z(),Y=L(G);dt(Y,()=>Gt,(d,j)=>{j(d,{class:"w-full",children:(O,T)=>{var _=Xe(),r=L(_);dt(r,()=>jt,(f,i)=>{i(f,{children:(h,A)=>{var R=Z(),b=L(R);dt(b,()=>Bt,(S,N)=>{N(S,{class:"text-2xl",children:(y,w)=>{Ct();var C=yt("Highlights");l(y,C)},$$slots:{default:!0}})}),l(h,R)},$$slots:{default:!0}})});var n=D(r,2);dt(n,()=>It,(f,i)=>{i(f,{children:(h,A)=>{var R=Z(),b=L(R);{var S=y=>{var w=Ke();l(y,w)},N=y=>{var w=qe(),C=M(w);{var H=v=>{var s=Ve(),c=M(s),$=D(M(c),2),u=M($,!0);m($),m(c);var p=D(c,2),z=M(p),X=M(z,!0);m(z),Ct(2),m(p),m(s),ut((W,K)=>{lt(u,W),lt(X,K)},[()=>E(t(e).bestDay.date),()=>x(t(e).bestDay.averageMood)]),l(v,s)};rt(C,v=>{t(e).bestDay&&v(H)})}var et=D(C,2);{var tt=v=>{var s=Ye(),c=M(s),$=D(M(c),2),u=M($,!0);m($),m(c);var p=D(c,2),z=M(p),X=M(z,!0);m(z),Ct(2),m(p),m(s),ut((W,K)=>{lt(u,W),lt(X,K)},[()=>E(t(e).worstDay.date),()=>x(t(e).worstDay.averageMood)]),l(v,s)};rt(et,v=>{t(e).worstDay&&v(tt)})}var st=D(et,2);{var ct=v=>{const s=o(()=>de(t(e).mostCommonTag.icon));var c=ze(),$=M(c),u=D(M($),2),p=M(u);dt(p,()=>t(s),(V,it)=>{it(V,{class:"h-5 w-5",strokeWidth:2})});var z=D(p,2),X=M(z,!0);m(z),m(u),m($);var W=D($,2),K=M(W),nt=M(K,!0);m(K);var I=D(K,2),q=M(I,!0);m(I),m(W),m(c),ut(()=>{lt(X,t(e).mostCommonTag.name),lt(nt,t(e).mostCommonTag.count),lt(q,t(e).mostCommonTag.count===1?"entry":"entries")}),l(v,c)};rt(st,v=>{t(e).mostCommonTag&&v(ct)})}m(w),l(y,w)};rt(b,y=>{a.entries.length===0?y(S):y(N,!1)})}l(h,R)},$$slots:{default:!0}})}),l(O,_)},$$slots:{default:!0}})}),l(g,G),St()}function he(){var g=$e().unknown(void 0),a=g.domain,e=g.range,E=0,x=1,G,Y,d=!1,j=0,O=0,T=.5;delete g.unknown;function _(){var r=a().length,n=x<E,f=n?x:E,i=n?E:x;G=(i-f)/Math.max(1,r-j+O*2),d&&(G=Math.floor(G)),f+=(i-f-G*(r-j))*T,Y=G*(1-j),d&&(f=Math.round(f),Y=Math.round(Y));var h=Re(r).map(function(A){return f+G*A});return e(n?h.reverse():h)}return g.domain=function(r){return arguments.length?(a(r),_()):a()},g.range=function(r){return arguments.length?([E,x]=r,E=+E,x=+x,_()):[E,x]},g.rangeRound=function(r){return[E,x]=r,E=+E,x=+x,d=!0,_()},g.bandwidth=function(){return Y},g.step=function(){return G},g.round=function(r){return arguments.length?(d=!!r,_()):d},g.padding=function(r){return arguments.length?(j=Math.min(1,O=+r),_()):j},g.paddingInner=function(r){return arguments.length?(j=Math.min(1,r),_()):j},g.paddingOuter=function(r){return arguments.length?(O=+r,_()):O},g.align=function(r){return arguments.length?(T=Math.max(0,Math.min(1,r)),_()):T},g.copy=function(){return he(a(),[E,x]).round(d).paddingInner(j).paddingOuter(O).align(T)},Pe.apply(_(),arguments)}function Ue(g){const a=g?.all??0,e=g?.x??a,E=g?.y??a,x=g?.left??e,G=g?.right??e,Y=g?.top??E,d=g?.bottom??E;return{left:x,right:G,bottom:d,top:Y}}function Je(g,a){const e=o(()=>a?.());return E=>{const x=Ue(t(e)?.insets),G=g.xScale.domain(),Y=g.yScale.domain(),d=Pt(t(e)?.x??g.x),j=Pt(t(e)?.y??g.y),O=Pt(t(e)?.x1??g.x1),T=Pt(t(e)?.y1??g.y1);if(wt(g.yScale)){const _=ne(g.yScale(j(E))??0)+(g.y1Scale?g.y1Scale(T(E)):0)+x.top,r=Math.max(0,g.yScale.bandwidth?(g.y1Scale?g.y1Scale.bandwidth?.()??0:g.yScale.bandwidth())-x.bottom-x.top:0),n=d(E);let f=0,i=0;Array.isArray(n)?(f=mt(n),i=ht(n)):n==null?(f=0,i=0):n>0?(f=ht([0,G[0]]),i=n):(f=n,i=mt([0,G[1]]));const h=g.xScale(f)+x.left,A=Math.max(0,g.xScale(i)-g.xScale(f)-x.left-x.right);return{x:h,y:_,width:A,height:r}}else{const _=ne(g.xScale(d(E)))+(g.x1Scale?g.x1Scale(O(E)):0)+x.left,r=Math.max(0,g.xScale.bandwidth?(g.x1Scale?g.x1Scale.bandwidth?.()??0:g.xScale.bandwidth())-x.left-x.right:0),n=j(E);let f=0,i=0;Array.isArray(n)?(f=ht(n),i=mt(n)):n==null?(f=0,i=0):n>0?(f=n,i=ht([0,Y[0]])):(f=mt([0,Y[1]]),i=n);const h=g.yScale(f)+x.top,A=g.yScale(i)-g.yScale(f)-x.bottom-x.top;return{x:_,y:h,width:r,height:A}}}}function ne(g){return Array.isArray(g)?g[0]:g}function xe(g,a){Dt(a,!0);const e=Zt();let E=ft(a,"x",19,()=>e.x),x=ft(a,"y",19,()=>e.y),G=ft(a,"stroke",3,"black"),Y=ft(a,"strokeWidth",3,0),d=ft(a,"radius",3,0),j=ft(a,"rounded",3,"all"),O=se(a,["$$slots","$$events","$$legacy","data","x","y","x1","y1","fill","fillOpacity","stroke","strokeWidth","opacity","radius","rounded","motion","insets","initialX","initialY","initialHeight","initialWidth"]);const T=o(()=>G()===null||G()===void 0?"black":G()),_=o(()=>Je(e,()=>({x:E(),y:x(),x1:a.x1,y1:a.y1,insets:a.insets}))),r=o(()=>t(_)(a.data)??{x:0,y:0,width:0,height:0}),n=o(()=>wt(e.xScale)),f=o(()=>Pt(t(n)?x():E())),i=o(()=>t(f)(a.data)),h=o(()=>Array.isArray(t(i))?Le(t(i)):t(i)),A=o(()=>j()==="edge"?t(n)?t(h)>=0?"top":"bottom":t(h)>=0?"right":"left":j()),R=o(()=>["all","top","left","top-left"].includes(t(A))),b=o(()=>["all","top","right","top-right"].includes(t(A))),S=o(()=>["all","bottom","left","bottom-left"].includes(t(A))),N=o(()=>["all","bottom","right","bottom-right"].includes(t(A))),y=o(()=>t(r).width),w=o(()=>t(r).height),C=o(()=>2*d()),H=o(()=>`M${t(r).x+d()},${t(r).y} h${t(y)-t(C)}
      ${t(b)?`a${d()},${d()} 0 0 1 ${d()},${d()}`:`h${d()}v${d()}`}
      v${t(w)-t(C)}
      ${t(N)?`a${d()},${d()} 0 0 1 ${-d()},${d()}`:`v${d()}h${-d()}`}
      h${t(C)-t(y)}
      ${t(S)?`a${d()},${d()} 0 0 1 ${-d()},${-d()}`:`h${-d()}v${-d()}`}
      v${t(C)-t(w)}
      ${t(R)?`a${d()},${d()} 0 0 1 ${d()},${-d()}`:`v${-d()}h${d()}`}
      z`.split(`
`).join(""));var et=Z(),tt=L(et);{var st=v=>{{let s=o(()=>t(r).y+t(r).height),c=o(()=>t(r).x+t(r).width),$=o(()=>At(O,"bar"));ce(v,Mt({get innerRadius(){return t(r).y},get outerRadius(){return t(s)},get startAngle(){return t(r).x},get endAngle(){return t(c)},get fill(){return a.fill},get fillOpacity(){return a.fillOpacity},get stroke(){return t(T)},get strokeWidth(){return Y()},get opacity(){return a.opacity},get cornerRadius(){return d()}},()=>t($)))}},ct=v=>{var s=Z(),c=L(s);{var $=p=>{{let z=o(()=>t(A)==="none"?0:d()),X=o(()=>At(O,"bar"));ue(p,Mt({get fill(){return a.fill},get fillOpacity(){return a.fillOpacity},get stroke(){return t(T)},get strokeWidth(){return Y()},get opacity(){return a.opacity},get rx(){return t(z)},get motion(){return a.motion},get initialX(){return a.initialX},get initialY(){return a.initialY},get initialHeight(){return a.initialHeight},get initialWidth(){return a.initialWidth}},()=>t(r),()=>t(X)))}},u=p=>{const z=o(()=>Ee(a.motion));{let X=o(()=>At(O,"bar"));te(p,Mt({get pathData(){return t(H)},get fill(){return a.fill},get fillOpacity(){return a.fillOpacity},get stroke(){return t(T)},get strokeWidth(){return Y()},get opacity(){return a.opacity},get motion(){return t(z)}},()=>t(X)))}};rt(c,p=>{t(A)==="all"||t(A)==="none"||d()===0?p($):p(u,!1)},!0)}l(v,s)};rt(tt,v=>{e.radial?v(st):v(ct,!1)})}l(g,et),St()}var Ze=B("<!> <!> <!> <!>",1);function ye(g,a){Dt(a,!0);const e=Zt(),E=Oe();let x=ft(a,"x",19,()=>e.x),G=ft(a,"y",19,()=>e.y),Y=ft(a,"points",3,!1),d=ft(a,"lines",3,!1),j=ft(a,"area",3,!1),O=ft(a,"bar",3,!1),T=ft(a,"motion",3,"spring");const _=o(()=>Pt(x())),r=o(()=>Pt(G())),n=o(()=>a.data??E.data),f=o(()=>t(_)(t(n))),i=o(()=>Array.isArray(t(f))?t(f).map(s=>e.xScale(s)):e.xScale(t(f))),h=o(()=>wt(e.xScale)&&!e.radial?e.xScale.bandwidth()/2:0),A=o(()=>t(r)(t(n))),R=o(()=>Array.isArray(t(A))?t(A).map(s=>e.yScale(s)):e.yScale(t(A))),b=o(()=>wt(e.yScale)&&!e.radial?e.yScale.bandwidth()/2:0),S=o(()=>a.axis==null?wt(e.yScale)?"y":"x":a.axis),N=o(()=>{let s=[];return t(n)&&((t(S)==="x"||t(S)==="both")&&(Array.isArray(t(i))?s=[...s,...t(i).filter(Ft).map((c,$)=>({x1:c+t(h),y1:mt(e.yRange),x2:c+t(h),y2:ht(e.yRange)}))]:t(i)!=null&&(s=[...s,{x1:t(i)+t(h),y1:mt(e.yRange),x2:t(i)+t(h),y2:ht(e.yRange)}])),(t(S)==="y"||t(S)==="both")&&(Array.isArray(t(R))?s=[...s,...t(R).filter(Ft).map((c,$)=>({x1:mt(e.xRange),y1:c+t(b),x2:ht(e.xRange),y2:c+t(b)}))]:t(R)!=null&&(s=[...s,{x1:mt(e.xRange),y1:t(R)+t(b),x2:ht(e.xRange),y2:t(R)+t(b)}])),e.radial&&(s=s.map(c=>{const[$,u]=Yt(c.x1,c.y1),[p,z]=Yt(c.x2,c.y2);return{...c,x1:$,y1:u,x2:p,y2:z}}))),s}),y=o(()=>{const s={x:0,y:0,width:0,height:0};if(!t(n))return s;if(t(S)==="x"||t(S)==="both"){if(Array.isArray(t(i)))s.width=ht(t(i))-mt(t(i));else if(wt(e.xScale))s.width=e.xScale.step();else{const c=e.flatData.findIndex(p=>Number(t(_)(p))===Number(t(_)(t(n)))),u=c+1===e.flatData.length?ht(e.xDomain):t(_)(e.flatData[c+1]);s.width=(e.xScale(u)??0)-(t(i)??0)}s.x=(Array.isArray(t(i))?mt(t(i)):t(i))-(wt(e.xScale)?e.xScale.padding()*e.xScale.step()/2:0),t(S)==="x"&&(s.y=mt(e.yRange),s.height=ht(e.yRange)-mt(e.yRange))}if(t(S)==="y"||t(S)==="both"){if(Array.isArray(t(R)))s.height=ht(t(R))-mt(t(R));else if(wt(e.yScale))s.height=e.yScale.step();else{const c=e.flatData.findIndex(p=>Number(t(_)(p))===Number(t(_)(t(n)))),u=c+1===e.flatData.length?ht(e.yDomain):t(_)(e.flatData[c+1]);s.height=(e.yScale(u)??0)-(t(R)??0)}s.y=(Array.isArray(t(R))?mt(t(R)):t(R))-(wt(e.yScale)?e.yScale.padding()*e.yScale.step()/2:0),t(S)==="y"&&(s.width=ht(e.xRange))}return s}),w=o(()=>{let s=[];if(!t(n))return s;if(Array.isArray(t(i)))if(Array.isArray(t(n))){const c=t(n);Array.isArray(e.data)&&(s=e.data.map(u=>({series:u,point:u.find(p=>t(r)(p)===t(r)(c))})).filter(u=>u.point).map((u,p)=>({x:e.xScale(u.point[1])+t(h),y:t(R)+t(b),fill:e.config.c?e.cGet(u.series):null,data:{x:u.point[1],y:t(A)}})))}else s=t(i).filter(Ft).map((c,$)=>{const u=e.config.x?.[$];return{x:c+t(h),y:t(R)+t(b),fill:e.config.c?e.cGet({...t(n),$key:u}):null,data:{x:t(f),y:t(A)}}});else if(Array.isArray(t(R)))if(Array.isArray(t(n))){const c=t(n);Array.isArray(e.data)&&(s=e.data.map(u=>({series:u,point:u.find(p=>t(_)(p)===t(_)(c))})).filter(u=>u.point).map((u,p)=>({x:t(i)+t(h),y:e.yScale(u.point[1])+t(b),fill:e.config.c?e.cGet(u.series):null,data:{x:t(f),y:u.point[1]}})))}else s=t(R).filter(Ft).map((c,$)=>{const u=e.config.y[$];return{x:t(i)+t(h),y:c+t(b),fill:e.config.c?e.cGet({...t(n),$key:u}):null,data:{x:t(f),y:t(A)}}});else t(i)!=null&&t(R)!=null?s=[{x:t(i)+t(h),y:t(R)+t(b),fill:e.config.c?e.cGet(t(n)):null,data:{x:t(f),y:t(A)}}]:s=[];return e.radial&&(s=s.map(c=>{const[$,u]=Yt(c.x,c.y);return{...c,x:$,y:u}})),s}),C=o(()=>At(j(),"highlight-area")),H=o(()=>At(O(),"highlight-bar")),et=o(()=>At(d(),"highlight-line")),tt=o(()=>At(Y(),"highlight-point"));var st=Z(),ct=L(st);{var v=s=>{var c=Ze(),$=L(c);{var u=I=>{var q=Z(),V=L(q);{var it=P=>{var k=Z(),Q=L(k);Ot(Q,j,()=>({area:t(y)})),l(P,k)},at=P=>{var k=Z(),Q=L(k);{var U=J=>{{let ot=o(()=>T()==="spring"?"spring":void 0),vt=o(()=>t(y).x+t(y).width),gt=o(()=>t(y).y+t(y).height),_t=o(()=>Et(!t(C).fill&&"fill-surface-content/5",t(C).class)),Vt=o(()=>a.onAreaClick&&(pt=>a.onAreaClick(pt,{data:t(n)})));ce(J,{get motion(){return t(ot)},get startAngle(){return t(y).x},get endAngle(){return t(vt)},get innerRadius(){return t(y).y},get outerRadius(){return t(gt)},get class(){return t(_t)},get onclick(){return t(Vt)}})}},F=J=>{{let ot=o(()=>T()==="spring"?"spring":void 0),vt=o(()=>Et(!t(C).fill&&"fill-surface-content/5",t(C).class)),gt=o(()=>a.onAreaClick&&(_t=>a.onAreaClick(_t,{data:t(n)})));ue(J,Mt({get motion(){return t(ot)}},()=>t(y),()=>t(C),{get class(){return t(vt)},get onclick(){return t(gt)}}))}};rt(Q,J=>{e.radial?J(U):J(F,!1)},!0)}l(P,k)};rt(V,P=>{typeof j()=="function"?P(it):P(at,!1)})}l(I,q)};rt($,I=>{j()&&I(u)})}var p=D($,2);{var z=I=>{var q=Z(),V=L(q);{var it=P=>{var k=Z(),Q=L(k);Ot(Q,O),l(P,k)},at=P=>{{let k=o(()=>T()==="spring"?"spring":void 0),Q=o(()=>Et(!t(H).fill&&"fill-primary",t(H).class)),U=o(()=>a.onBarClick&&(F=>a.onBarClick(F,{data:t(n)})));xe(P,Mt({get motion(){return t(k)},get data(){return t(n)}},()=>t(H),{get class(){return t(Q)},get onclick(){return t(U)}}))}};rt(V,P=>{typeof O()=="function"?P(it):P(at,!1)})}l(I,q)};rt(p,I=>{O()&&I(z)})}var X=D(p,2);{var W=I=>{var q=Z(),V=L(q);{var it=P=>{var k=Z(),Q=L(k);Ot(Q,d,()=>({lines:t(N)})),l(P,k)},at=P=>{var k=Z(),Q=L(k);xt(Q,17,()=>t(N),Wt,(U,F)=>{{let J=o(()=>T()==="spring"?"spring":void 0),ot=o(()=>Et("stroke-surface-content/20 stroke-2 [stroke-dasharray:2,2] pointer-events-none",t(et).class));We(U,Mt({get motion(){return t(J)},get x1(){return t(F).x1},get y1(){return t(F).y1},get x2(){return t(F).x2},get y2(){return t(F).y2}},()=>t(et),{get class(){return t(ot)}}))}}),l(P,k)};rt(V,P=>{typeof d()=="function"?P(it):P(at,!1)})}l(I,q)};rt(X,I=>{d()&&I(W)})}var K=D(X,2);{var nt=I=>{var q=Z(),V=L(q);{var it=P=>{var k=Z(),Q=L(k);Ot(Q,Y,()=>({points:t(w)})),l(P,k)},at=P=>{var k=Z(),Q=L(k);xt(Q,17,()=>t(w),Wt,(U,F)=>{{let J=o(()=>T()==="spring"?"spring":void 0),ot=o(()=>Et("stroke-white [paint-order:stroke] drop-shadow-sm",!t(F).fill&&(typeof Y()=="boolean"||!Y().fill)&&"fill-primary",t(tt).class)),vt=o(()=>a.onPointClick&&(pt=>{pt.stopPropagation()})),gt=o(()=>a.onPointClick&&(pt=>a.onPointClick(pt,{point:t(F),data:t(n)}))),_t=o(()=>a.onPointEnter&&(pt=>{a.onPointClick&&(re(pt.target).style.cursor="pointer"),a.onPointEnter(pt,{point:t(F),data:t(n)})})),Vt=o(()=>a.onPointLeave&&(pt=>{a.onPointClick&&(re(pt.target).style.cursor="default"),a.onPointLeave(pt,{point:t(F),data:t(n)})}));je(U,Mt({get motion(){return t(J)},get cx(){return t(F).x},get cy(){return t(F).y},get fill(){return t(F).fill},r:4,strokeWidth:6},()=>t(tt),{get class(){return t(ot)},get onpointerdown(){return t(vt)},get onclick(){return t(gt)},get onpointerenter(){return t(_t)},get onpointerleave(){return t(Vt)}}))}}),l(P,k)};rt(V,P=>{typeof Y()=="function"?P(it):P(at,!1)})}l(I,q)};rt(K,I=>{Y()&&I(nt)})}l(s,c)};rt(ct,s=>{t(n)&&s(v)})}l(g,st),St()}function ta(g,a){Dt(a,!0);let e=ft(a,"key",3,(T,_)=>_),E=ft(a,"onBarClick",3,()=>{}),x=ft(a,"radius",3,0),G=ft(a,"strokeWidth",3,0),Y=ft(a,"stroke",3,"black"),d=se(a,["$$slots","$$events","$$legacy","fill","key","data","onBarClick","children","radius","strokeWidth","stroke"]);const j=Zt(),O=o(()=>Ie(a.data??j.data));{let T=o(()=>Ge("bars"));Be(g,{get class(){return t(T)},children:(_,r)=>{var n=Z(),f=L(n);{var i=A=>{var R=Z(),b=L(R);Ot(b,()=>a.children),l(A,R)},h=A=>{var R=Z(),b=L(R);xt(b,19,()=>t(O),(S,N)=>e()(S,N),(S,N)=>{{let y=o(()=>a.fill??(j.config.c?j.cGet(t(N)):null)),w=o(()=>At(d,"bars-bar"));xe(S,Mt({get data(){return t(N)},get radius(){return x()},get strokeWidth(){return G()},get stroke(){return Y()},get fill(){return t(y)},onclick:C=>E()(C,{data:t(N)})},()=>t(w)))}}),l(A,R)};rt(f,A=>{a.children?A(i):A(h,!1)})}l(_,n)},$$slots:{default:!0}})}St()}var ea=B("Average Mood <!>",1),aa=B("<!> <!> <!> <!>",1),ra=B('<div class="rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl"><div class="font-medium"><!></div> <div class="mt-1 flex items-center gap-2"><div class="h-2 w-2 rounded-full bg-[#485e92]"></div> <span class="text-muted-foreground"> </span></div> <div class="mt-0.5 text-[10px] text-muted-foreground"> </div></div>'),na=B("<!> <!>",1),oa=B('<div class="h-[300px] w-full"><!></div>'),sa=B('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No mood entries found for the selected criteria</div>'),ia=B("<!> <!>",1);function la(g,a){Dt(a,!0);const e=o(()=>qt(a.selectedTimeRange)),E=o(()=>Ut(a.entries)),x=o(()=>{if(a.entries.length===0)return[];const O=Kt(a.entries),T=Array.from(O.entries()).map(([r,n])=>{const f=n.reduce((i,h)=>i+h.moodLevel,0)/n.length;return{date:new Date(r+"T12:00:00"),averageMood:f,entryCount:n.length}}).sort((r,n)=>r.date.getTime()-n.date.getTime());if(t(e)==="day")return T.map(r=>({...r,endDate:void 0}));const _=new Rt;return T.forEach(r=>{const n=t(e)==="week"?Xt(r.date):Qt(r.date),f=t(e)==="week"?n.start.toISOString().split("T")[0]:`${n.start.getFullYear()}-${String(n.start.getMonth()+1).padStart(2,"0")}`;_.has(f)||_.set(f,{date:n.start,endDate:n.end,totalMood:0,entryCount:0});const i=_.get(f);i.totalMood+=r.averageMood*r.entryCount,i.entryCount+=r.entryCount}),Array.from(_.values()).map(r=>({date:r.date,averageMood:r.totalMood/r.entryCount,entryCount:r.entryCount,endDate:r.endDate})).sort((r,n)=>r.date.getTime()-n.date.getTime())}),G=o(()=>{if(t(x).length===0)return[new Date,new Date];const O=t(x).map(T=>T.date.getTime());return[new Date(Math.min(...O)),new Date(Math.max(...O))]}),Y=o(()=>Jt(t(x).length,a.selectedTimeRange,t(e)).map(T=>t(x)[T].date));var d=Z(),j=L(d);dt(j,()=>Gt,(O,T)=>{T(O,{class:"w-full",children:(_,r)=>{var n=ia(),f=L(n);dt(f,()=>jt,(h,A)=>{A(h,{children:(R,b)=>{var S=Z(),N=L(S);dt(N,()=>Bt,(y,w)=>{w(y,{class:"text-2xl",children:(C,H)=>{Ct();var et=ea(),tt=D(L(et));{var st=v=>{var s=yt("(by week)");l(v,s)},ct=v=>{var s=Z(),c=L(s);{var $=u=>{var p=yt("(by month)");l(u,p)};rt(c,u=>{t(e)==="month"&&u($)},!0)}l(v,s)};rt(tt,v=>{t(e)==="week"?v(st):v(ct,!1)})}l(C,et)},$$slots:{default:!0}})}),l(R,S)},$$slots:{default:!0}})});var i=D(f,2);dt(i,()=>It,(h,A)=>{A(h,{children:(R,b)=>{var S=Z(),N=L(S);{var y=C=>{var H=oa(),et=M(H);{let tt=o(me),st=o(()=>[new Tt(t(G)[0]),new Tt(t(G)[1])]),ct=o(ge);ee(et,{get data(){return t(x)},x:"date",get xScale(){return t(tt)},get xDomain(){return t(st)},y:"averageMood",get yScale(){return t(ct)},yDomain:[-10,10],padding:{top:16,bottom:32,left:48,right:16},tooltip:{mode:"bisect-x"},children:(v,s)=>{var c=na(),$=L(c);ae($,{children:(p,z)=>{var X=aa(),W=L(X);Lt(W,{placement:"left",grid:!0,rule:!1,ticks:[-10,0,10],format:q=>{const V=Math.round(q);return V>=7?"Good":V<=-7?"Bad":V>=-3&&V<=3?"Neutral":""},class:"text-xs text-muted-foreground"});var K=D(W,2);Lt(K,{placement:"bottom",rule:!1,get ticks(){return t(Y)},format:q=>{const V=t(x).find(it=>it.date.getTime()===q.getTime());return V?zt(V.date,V.endDate,t(e),a.selectedTimeRange,t(E)):""},class:"text-xs text-muted-foreground"});var nt=D(K,2);te(nt,{get curve(){return ve},class:"fill-none stroke-[#485e92] stroke-2"});var I=D(nt,2);ye(I,{points:!0,lines:!0}),l(p,X)},$$slots:{default:!0}});var u=D($,2);{const p=(z,X)=>{let W=()=>X?.().data;var K=ra(),nt=M(K),I=M(nt);{var q=U=>{var F=yt();ut(J=>lt(F,J),[()=>W().date.toLocaleDateString("en-GB",{month:"short",day:"numeric",year:"numeric"})]),l(U,F)},V=U=>{var F=yt();ut((J,ot)=>lt(F,`${J??""}
                    -
                    ${ot??""}`),[()=>W().date.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),()=>W().endDate.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]),l(U,F)};rt(I,U=>{t(e)==="day"?U(q):U(V,!1)})}m(nt);var it=D(nt,2),at=D(M(it),2),P=M(at);m(at),m(it);var k=D(it,2),Q=M(k);m(k),m(K),ut(U=>{lt(P,`Avg Mood: ${W().averageMood>0?"+":""}${U??""}`),lt(Q,`${W().entryCount??""}
                  ${W().entryCount===1?"entry":"entries"}`)},[()=>W().averageMood.toFixed(1)]),l(z,K)};dt(u,()=>fe,(z,X)=>{X(z,{variant:"none",children:p,$$slots:{default:!0}})})}l(v,c)},$$slots:{default:!0}})}m(H),l(C,H)},w=C=>{var H=sa();l(C,H)};rt(N,C=>{t(x).length>0?C(y):C(w,!1)})}l(R,S)},$$slots:{default:!0}})}),l(_,n)},$$slots:{default:!0}})}),l(g,d),St()}var da=B("Entry Count <!>",1),ca=B("<!> <!> <!>",1),ua=B('<div class="h-[300px] w-full"><!></div>'),va=B('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No mood entries found for the selected criteria</div>'),fa=B("<!> <!>",1);function ga(g,a){Dt(a,!0);const e=o(()=>qt(a.selectedTimeRange)),E=o(()=>Ut(a.entries)),x=o(()=>{if(a.entries.length===0)return[];const O=Kt(a.entries),T=Array.from(O.entries()).map(([r,n])=>({date:r,count:n.length,dateObj:new Date(r+"T12:00:00")})).sort((r,n)=>r.dateObj.getTime()-n.dateObj.getTime());if(t(e)==="day")return T.map(r=>({...r,endDate:void 0}));const _=new Rt;return T.forEach(r=>{const n=t(e)==="week"?Xt(r.dateObj):Qt(r.dateObj),f=t(e)==="week"?n.start.toISOString().split("T")[0]:`${n.start.getFullYear()}-${String(n.start.getMonth()+1).padStart(2,"0")}`;_.has(f)||_.set(f,{dateObj:n.start,endDate:n.end,count:0,entries:[]});const i=_.get(f);i.count+=r.count,i.entries.push(r.count)}),Array.from(_.values()).map(r=>({date:r.dateObj.toISOString().split("T")[0],count:r.count,dateObj:r.dateObj,endDate:r.endDate})).sort((r,n)=>r.dateObj.getTime()-n.dateObj.getTime())}),G=o(()=>{if(t(x).length===0)return 10;const O=Math.max(...t(x).map(T=>T.count));return Math.ceil(O*1.1)}),Y=o(()=>Jt(t(x).length,a.selectedTimeRange,t(e)).map(T=>t(x)[T].date));var d=Z(),j=L(d);dt(j,()=>Gt,(O,T)=>{T(O,{class:"w-full",children:(_,r)=>{var n=fa(),f=L(n);dt(f,()=>jt,(h,A)=>{A(h,{children:(R,b)=>{var S=Z(),N=L(S);dt(N,()=>Bt,(y,w)=>{w(y,{class:"text-2xl",children:(C,H)=>{Ct();var et=da(),tt=D(L(et));{var st=v=>{var s=yt("(by week)");l(v,s)},ct=v=>{var s=Z(),c=L(s);{var $=u=>{var p=yt("(by month)");l(u,p)};rt(c,u=>{t(e)==="month"&&u($)},!0)}l(v,s)};rt(tt,v=>{t(e)==="week"?v(st):v(ct,!1)})}l(C,et)},$$slots:{default:!0}})}),l(R,S)},$$slots:{default:!0}})});var i=D(f,2);dt(i,()=>It,(h,A)=>{A(h,{children:(R,b)=>{var S=Z(),N=L(S);{var y=C=>{var H=ua(),et=M(H);{let tt=o(()=>he().padding(.2)),st=o(()=>[0,t(G)]);ee(et,{get data(){return t(x)},x:"date",get xScale(){return t(tt)},y:"count",get yDomain(){return t(st)},padding:{top:16,bottom:32,left:48,right:16},children:(ct,v)=>{ae(ct,{children:(s,c)=>{var $=ca(),u=L($);Lt(u,{placement:"left",grid:!0,rule:!1,ticks:5,format:X=>Math.round(X).toString(),class:"text-xs text-muted-foreground"});var p=D(u,2);Lt(p,{placement:"bottom",rule:!1,get ticks(){return t(Y)},format:X=>{const W=t(x).find(K=>K.date===X);return W?zt(W.dateObj,W.endDate,t(e),a.selectedTimeRange,t(E)):X},class:"text-xs text-muted-foreground"});var z=D(p,2);ta(z,{radius:4,strokeWidth:0,class:"fill-[#485e92]"}),l(s,$)},$$slots:{default:!0}})},$$slots:{default:!0}})}m(H),l(C,H)},w=C=>{var H=va();l(C,H)};rt(N,C=>{t(x).length>0?C(y):C(w,!1)})}l(R,S)},$$slots:{default:!0}})}),l(_,n)},$$slots:{default:!0}})}),l(g,d),St()}var ma=B(" <!>",1),ha=B("<!> <!> <!> <!>",1),xa=B('<div class="rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl"><div class="font-medium"><!></div> <div class="mt-1 flex items-center gap-2"><div class="h-2 w-2 rounded-full bg-[#485e92]"></div> <span class="text-muted-foreground"> </span></div> <div class="mt-0.5 text-[10px] text-muted-foreground"> </div></div>'),ya=B("<!> <!>",1),_a=B('<div class="h-[300px] w-full"><!></div>'),pa=B('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No reflections found for the selected criteria</div>'),ba=B("<!> <!>",1);function wa(g,a){Dt(a,!0);const e=o(()=>qt(a.selectedTimeRange)),E=o(()=>Ut(a.reflections)),x={sleepQuality:{title:"Sleep Quality",lowLabel:"Poor",highLabel:"Excellent"},physicalActivity:{title:"Physical Activity",lowLabel:"Sedentary",highLabel:"Active"},socialInteractions:{title:"Social Interactions",lowLabel:"Draining",highLabel:"Energizing"},pressure:{title:"Pressure Level",lowLabel:"None",highLabel:"High"}},G=o(()=>x[a.selectedMetric]);function Y(r){const n=new Rt;return r.forEach(f=>{const i=f.date.toISOString().split("T")[0],h=f[a.selectedMetric];n.has(i)||n.set(i,{value:0,count:0});const A=n.get(i);A.value+=h,A.count+=1}),n}const d=o(()=>{if(a.reflections.length===0)return[];const r=Y(a.reflections),n=Array.from(r.entries()).map(([i,h])=>({date:new Date(i+"T12:00:00"),value:h.value/h.count,entryCount:h.count})).sort((i,h)=>i.date.getTime()-h.date.getTime());if(t(e)==="day")return n.map(i=>({...i,endDate:void 0}));const f=new Rt;return n.forEach(i=>{const h=t(e)==="week"?Xt(i.date):Qt(i.date),A=t(e)==="week"?h.start.toISOString().split("T")[0]:`${h.start.getFullYear()}-${String(h.start.getMonth()+1).padStart(2,"0")}`;f.has(A)||f.set(A,{date:h.start,endDate:h.end,totalValue:0,entryCount:0});const R=f.get(A);R.totalValue+=i.value*i.entryCount,R.entryCount+=i.entryCount}),Array.from(f.values()).map(i=>({date:i.date,value:i.totalValue/i.entryCount,entryCount:i.entryCount,endDate:i.endDate})).sort((i,h)=>i.date.getTime()-h.date.getTime())}),j=o(()=>{if(t(d).length===0)return[new Date,new Date];const r=t(d).map(n=>n.date.getTime());return[new Date(Math.min(...r)),new Date(Math.max(...r))]}),O=o(()=>Jt(t(d).length,a.selectedTimeRange,t(e)).map(n=>t(d)[n].date));var T=Z(),_=L(T);dt(_,()=>Gt,(r,n)=>{n(r,{class:"w-full",children:(f,i)=>{var h=ba(),A=L(h);dt(A,()=>jt,(b,S)=>{S(b,{children:(N,y)=>{var w=Z(),C=L(w);dt(C,()=>Bt,(H,et)=>{et(H,{class:"text-2xl",children:(tt,st)=>{Ct();var ct=ma(),v=L(ct),s=D(v);{var c=u=>{var p=yt("(by week)");l(u,p)},$=u=>{var p=Z(),z=L(p);{var X=W=>{var K=yt("(by month)");l(W,K)};rt(z,W=>{t(e)==="month"&&W(X)},!0)}l(u,p)};rt(s,u=>{t(e)==="week"?u(c):u($,!1)})}ut(()=>lt(v,`${t(G).title??""} `)),l(tt,ct)},$$slots:{default:!0}})}),l(N,w)},$$slots:{default:!0}})});var R=D(A,2);dt(R,()=>It,(b,S)=>{S(b,{children:(N,y)=>{var w=Z(),C=L(w);{var H=tt=>{var st=_a(),ct=M(st);{let v=o(me),s=o(()=>[new Tt(t(j)[0]),new Tt(t(j)[1])]),c=o(ge);ee(ct,{get data(){return t(d)},x:"date",get xScale(){return t(v)},get xDomain(){return t(s)},y:"value",get yScale(){return t(c)},yDomain:[-10,10],padding:{top:16,bottom:32,left:64,right:16},tooltip:{mode:"bisect-x"},children:($,u)=>{var p=ya(),z=L(p);ae(z,{children:(W,K)=>{var nt=ha(),I=L(nt);Lt(I,{placement:"left",grid:!0,rule:!1,ticks:[-10,0,10],format:at=>{const P=Math.round(at);return P>=7?t(G).highLabel:P<=-7?t(G).lowLabel:P>=-3&&P<=3?"Neutral":""},class:"text-xs text-muted-foreground"});var q=D(I,2);Lt(q,{placement:"bottom",rule:!1,get ticks(){return t(O)},format:at=>{const P=t(d).find(k=>k.date.getTime()===at.getTime());return P?zt(P.date,P.endDate,t(e),a.selectedTimeRange,t(E)):""},class:"text-xs text-muted-foreground"});var V=D(q,2);te(V,{get curve(){return ve},class:"fill-none stroke-[#485e92] stroke-2"});var it=D(V,2);ye(it,{points:!0,lines:!0}),l(W,nt)},$$slots:{default:!0}});var X=D(z,2);{const W=(K,nt)=>{let I=()=>nt?.().data;var q=xa(),V=M(q),it=M(V);{var at=ot=>{var vt=yt();ut(gt=>lt(vt,gt),[()=>I().date.toLocaleDateString("en-GB",{month:"short",day:"numeric",year:"numeric"})]),l(ot,vt)},P=ot=>{var vt=yt();ut((gt,_t)=>lt(vt,`${gt??""}
                    -
                    ${_t??""}`),[()=>I().date.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),()=>I().endDate.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]),l(ot,vt)};rt(it,ot=>{t(e)==="day"?ot(at):ot(P,!1)})}m(V);var k=D(V,2),Q=D(M(k),2),U=M(Q);m(Q),m(k);var F=D(k,2),J=M(F);m(F),m(q),ut(ot=>{lt(U,`${t(G).title??""}: ${I().value>0?"+":""}${ot??""}`),lt(J,`${I().entryCount??""}
                  ${I().entryCount===1?"reflection":"reflections"}`)},[()=>I().value.toFixed(1)]),l(K,q)};dt(X,()=>fe,(K,nt)=>{nt(K,{variant:"none",children:W,$$slots:{default:!0}})})}l($,p)},$$slots:{default:!0}})}m(st),l(tt,st)},et=tt=>{var st=pa();l(tt,st)};rt(C,tt=>{t(d).length>0?tt(H):tt(et,!1)})}l(N,w)},$$slots:{default:!0}})}),l(f,h)},$$slots:{default:!0}})}),l(g,T),St()}var ka=B('<button type="button" class="flex flex-1 flex-col items-center gap-1"><span class="text-[10px] text-[#44464f]"> </span> <div class="aspect-square w-full max-w-10 rounded-md transition-transform hover:scale-105"></div> <span class="text-[10px] text-[#44464f]"> </span></button>'),Da=B('<div class="flex flex-col gap-2"><div class="flex w-full justify-between gap-1"></div></div>'),Sa=B('<span class="flex-1 text-center text-[10px] text-[#44464f]"> </span>'),Ma=B('<button type="button" class="flex flex-1 flex-col items-center gap-0.5"><div></div> <span> </span></button>'),Aa=B('<div class="flex w-full justify-between gap-1"></div>'),Ca=B('<div class="flex flex-col gap-1"><div class="flex justify-between gap-1 px-1"></div> <!></div>'),Ta=B('<span class="absolute text-xs whitespace-nowrap"> </span>'),$a=B('<span class="text-[10px]"> </span>'),Pa=B('<div class="flex items-center justify-end pr-1"><!></div>'),Ra=B('<button type="button"></button>'),La=B('<div class="flex flex-col"></div>'),Ea=B('<div class="overflow-x-auto"><div class="inline-flex flex-col" style="min-width: fit-content;"><div class="mb-1 flex text-xs text-[#44464f]"><div class="relative flex" style="height: 16px;"></div></div> <div class="flex"><div class="flex shrink-0 flex-col text-xs text-[#44464f]"></div> <div class="flex"></div></div></div></div>'),Oa=B('<!> <div class="mt-3 flex items-center justify-end gap-1 text-xs text-[#44464f]"><span>Bad</span> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #ebedf0;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #e57373;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #ffb74d;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #fff176;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #aed581;"></div> <div class="h-[11px] w-[11px] rounded-sm" style="background-color: #66bb6a;"></div> <span>Good</span></div>',1),Wa=B("<!> <!>",1);function ja(g,a){Dt(a,!0);const e=o(()=>{switch(a.selectedTimeRange){case"week":return 7;case"month":return 30;case"3months":return 90;case"year":return 365}}),E=o(()=>a.selectedTimeRange==="week"),x=o(()=>a.selectedTimeRange==="month"),G=o(()=>{const b=new Tt;b.setHours(23,59,59,999);const S=Kt(a.entries),N=new Rt;for(const[C,H]of S){const et=H.reduce((tt,st)=>tt+st.moodLevel,0)/H.length;N.set(C,{avgMood:et,count:H.length})}const y=[],w=new Tt(b);for(w.setDate(w.getDate()-t(e)+1);w<=b;){const C=w.toISOString().split("T")[0],H=N.get(C);y.push({date:new Date(w),dateKey:C,avgMood:H?H.avgMood:null,count:H?H.count:0}),w.setDate(w.getDate()+1)}return y}),Y=o(()=>{if(t(E)||t(x))return[];const b=[],S=t(G)[0];if(!S)return b;const N=S.date.getDay();let y=[];for(let w=0;w<N;w++)y.push({date:new Date(0),dateKey:`empty-start-${w}`,avgMood:null,count:0,isEmpty:!0});for(const w of t(G))y.push(w),y.length===7&&(b.push(y),y=[]);if(y.length>0){for(;y.length<7;)y.push({date:new Date(0),dateKey:`empty-end-${y.length}`,avgMood:null,count:0,isEmpty:!0});b.push(y)}return b});function d(b,S){return S?"transparent":b===null?"#ebedf0":Ae(b)}function j(b){return b.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}function O(b){return b.toLocaleDateString("en-US",{weekday:"short"})}const T=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_=o(()=>{switch(a.selectedTimeRange){case"3months":case"year":return 18;default:return 18}}),r=o(()=>{switch(a.selectedTimeRange){case"3months":case"year":return 2;default:return 2}}),n=o(()=>{if(t(E)||t(x))return[];const b=[];let S=-1;return t(Y).forEach((N,y)=>{const w=N.find(C=>!C.isEmpty);if(w){const C=w.date.getMonth();C!==S&&(S=C,b.push({month:w.date.toLocaleDateString("en-US",{month:"short"}),weekIndex:y}))}}),b}),f=o(()=>{if(!t(x))return[];const b=[],S=t(G)[0];if(!S)return b;const N=S.date.getDay();let y=[];for(let w=0;w<N;w++)y.push({date:new Date(0),dateKey:`empty-start-${w}`,avgMood:null,count:0,isEmpty:!0});for(const w of t(G))y.push(w),y.length===7&&(b.push(y),y=[]);if(y.length>0){for(;y.length<7;)y.push({date:new Date(0),dateKey:`empty-end-${y.length}`,avgMood:null,count:0,isEmpty:!0});b.push(y)}return b});function i(b,S){S||(ie.setDate(b),le.setDate(b),Fe(`${He}/`))}let h=Ht(null);_e(()=>{a.selectedTimeRange,requestAnimationFrame(()=>{t(h)&&(t(h).scrollLeft=t(h).scrollWidth)})});var A=Z(),R=L(A);dt(R,()=>Gt,(b,S)=>{S(b,{class:"w-full",children:(N,y)=>{var w=Wa(),C=L(w);dt(C,()=>jt,(et,tt)=>{tt(et,{children:(st,ct)=>{var v=Z(),s=L(v);dt(s,()=>Bt,(c,$)=>{$(c,{class:"text-2xl",children:(u,p)=>{Ct();var z=yt("Mood Activity");l(u,z)},$$slots:{default:!0}})}),l(st,v)},$$slots:{default:!0}})});var H=D(C,2);dt(H,()=>It,(et,tt)=>{tt(et,{children:(st,ct)=>{var v=Oa(),s=L(v);{var c=u=>{var p=Da(),z=M(p);xt(z,21,()=>t(G),X=>X.dateKey,(X,W)=>{var K=ka();K.__click=()=>i(t(W).date);var nt=M(K),I=M(nt,!0);m(nt);var q=D(nt,2),V=D(q,2),it=M(V,!0);m(V),m(K),ut((at,P,k,Q)=>{lt(I,at),bt(q,`background-color: ${P??""};`),Nt(q,"title",k),lt(it,Q)},[()=>O(t(W).date),()=>d(t(W).avgMood),()=>`${j(t(W).date)}
${t(W).count>0?`Entries: ${t(W).count}
Average mood: ${t(W).avgMood?.toFixed(1)}`:"No entries"}`,()=>t(W).date.getDate()]),l(X,K)}),m(z),m(p),l(u,p)},$=u=>{var p=Z(),z=L(p);{var X=K=>{var nt=Ca(),I=M(nt);xt(I,20,()=>T,V=>V,(V,it)=>{var at=Sa(),P=M(at,!0);m(at),ut(()=>lt(P,it)),l(V,at)}),m(I);var q=D(I,2);xt(q,17,()=>t(f),Wt,(V,it)=>{var at=Aa();xt(at,21,()=>t(it),P=>P.dateKey,(P,k)=>{var Q=Ma();Q.__click=()=>i(t(k).date,t(k).isEmpty);var U=M(Q),F=D(U,2),J=M(F,!0);m(F),m(Q),ut((ot,vt,gt)=>{Q.disabled=t(k).isEmpty,kt(U,1,`aspect-square w-full max-w-10 rounded-md transition-transform ${t(k).isEmpty?"":"cursor-pointer hover:scale-105"}`),bt(U,`background-color: ${ot??""};`),Nt(U,"title",vt),kt(F,1,`text-[10px] text-[#44464f] ${t(k).isEmpty?"invisible":""}`),lt(J,gt)},[()=>d(t(k).avgMood,t(k).isEmpty),()=>t(k).isEmpty?"":`${j(t(k).date)}
${t(k).count>0?`Entries: ${t(k).count}
Average mood: ${t(k).avgMood?.toFixed(1)}`:"No entries"}`,()=>t(k).date.getDate()]),l(P,Q)}),m(at),l(V,at)}),m(nt),l(K,nt)},W=K=>{var nt=Ea(),I=M(nt),q=M(I),V=M(q);xt(V,21,()=>t(n),k=>k.weekIndex,(k,Q)=>{var U=Ta(),F=M(U,!0);m(U),ut(()=>{bt(U,`left: ${t(Q).weekIndex*(t(_)+t(r))}px;`),lt(F,t(Q).month)}),l(k,U)}),m(V),m(q);var it=D(q,2),at=M(it);xt(at,21,()=>T,Wt,(k,Q,U)=>{var F=Pa(),J=M(F);{var ot=vt=>{var gt=$a(),_t=M(gt,!0);m(gt),ut(()=>lt(_t,t(Q))),l(vt,gt)};rt(J,vt=>{U%2===1&&vt(ot)})}m(F),ut(()=>bt(F,`height: ${t(_)??""}px; width: ${a.selectedTimeRange==="year"?20:28}px;`)),l(k,F)}),m(at);var P=D(at,2);xt(P,21,()=>t(Y),Wt,(k,Q)=>{var U=La();xt(U,21,()=>t(Q),F=>F.dateKey,(F,J)=>{var ot=Ra();ot.__click=()=>i(t(J).date,t(J).isEmpty),ut((vt,gt,_t)=>{kt(ot,1,`rounded-sm ${t(J).isEmpty?"cursor-default":"cursor-pointer"} transition-transform ${t(J).isEmpty?"":"hover:scale-110"}`),bt(ot,`width: ${t(_)??""}px; height: ${t(_)??""}px; background-color: ${vt??""};`),Nt(ot,"title",gt),ot.disabled=t(J).isEmpty,Nt(ot,"aria-label",_t)},[()=>d(t(J).avgMood,t(J).isEmpty),()=>t(J).isEmpty?"":`${j(t(J).date)}
${t(J).count>0?`Entries: ${t(J).count}
Average mood: ${t(J).avgMood?.toFixed(1)}`:"No entries"}`,()=>t(J).isEmpty?"":`View entries for ${j(t(J).date)}`]),l(F,ot)}),m(U),ut(()=>bt(U,`gap: ${t(r)??""}px;`)),l(k,U)}),m(P),m(it),m(I),m(nt),Ne(nt,k=>$t(h,k),()=>t(h)),ut(()=>{bt(q,`padding-left: ${a.selectedTimeRange==="year"?28:36}px;`),bt(it,`gap: ${t(r)??""}px;`),bt(at,`gap: ${t(r)??""}px; margin-right: ${t(r)??""}px;`),bt(P,`gap: ${t(r)??""}px;`)}),l(K,nt)};rt(z,K=>{t(x)?K(X):K(W,!1)},!0)}l(u,p)};rt(s,u=>{t(E)?u(c):u($,!1)})}Ct(2),l(st,v)},$$slots:{default:!0}})}),l(N,w)},$$slots:{default:!0}})}),l(g,A),St()}oe(["click"]);var Ba=B('<button type="button"><!> <span> </span></button>'),Ia=B('<button type="button"> </button>'),Ga=B('<div class="flex h-screen flex-col bg-white"><main class="flex flex-1 flex-col gap-6 overflow-y-auto px-4 py-4 pb-24"><div class="flex items-center justify-between"><h1 class="text-xl font-medium text-black">Insights</h1> <!></div> <div class="sticky top-0 z-10 -mx-4 flex flex-col gap-2 px-4 py-2"><div class="flex flex-wrap gap-2"><button type="button">Week</button> <button type="button">Month</button> <button type="button">3 Months</button> <button type="button">Year</button></div> <div class="-mx-4 overflow-x-auto px-4"><div class="flex gap-2"></div></div></div> <!> <!> <!> <!> <div class="flex flex-col gap-3"><div class="flex flex-wrap gap-2"></div> <!></div></main> <!></div>');function rr(g,a){Dt(a,!0);let e=Ht("3months"),E=Ht(pe(new Set)),x=Ht("sleepQuality");const G=[{value:"sleepQuality",label:"Sleep"},{value:"physicalActivity",label:"Activity"},{value:"socialInteractions",label:"Social"},{value:"pressure",label:"Pressure"}],Y=o(()=>{const v=new Date,s=new Tt(v);s.setHours(23,59,59,999);const c=new Tt(v);switch(t(e)){case"week":c.setDate(v.getDate()-7);break;case"month":c.setMonth(v.getMonth()-1);break;case"3months":c.setMonth(v.getMonth()-3);break;case"year":c.setFullYear(v.getFullYear()-1);break}return c.setHours(0,0,0,0),{start:c,end:s}}),d=o(()=>ie.allEntries.filter(v=>v.date>=t(Y).start&&v.date<=t(Y).end?t(E).size===0?!0:v.labels.some(c=>t(E).has(c.id)):!1)),j=o(()=>le.all.filter(v=>v.date>=t(Y).start&&v.date<=t(Y).end));function O(v){const s=new Se(t(E));s.has(v)?s.delete(v):s.add(v),$t(E,s,!0)}var T=Ga();ke("u6zn5i",v=>{be(()=>{we.title="Insights - MoodLog"})});var _=M(T),r=M(_),n=D(M(r),2);Te(n,{}),m(r);var f=D(r,2),i=M(f),h=M(i);h.__click=()=>$t(e,"week");var A=D(h,2);A.__click=()=>$t(e,"month");var R=D(A,2);R.__click=()=>$t(e,"3months");var b=D(R,2);b.__click=()=>$t(e,"year"),m(i);var S=D(i,2),N=M(S);xt(N,21,()=>De.all,v=>v.id,(v,s)=>{const c=o(()=>de(t(s).icon)),$=o(()=>t(E).has(t(s).id));var u=Ba();u.__click=()=>O(t(s).id);var p=M(u);dt(p,()=>t(c),(W,K)=>{K(W,{class:"h-4 w-4",strokeWidth:2})});var z=D(p,2),X=M(z,!0);m(z),m(u),ut(()=>{kt(u,1,`flex shrink-0 items-center gap-2 rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t($)?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),lt(X,t(s).name)}),l(v,u)}),m(N),m(S),m(f);var y=D(f,2);Qe(y,{get entries(){return t(d)}});var w=D(y,2);ja(w,{get entries(){return t(d)},get selectedTimeRange(){return t(e)}});var C=D(w,2);la(C,{get entries(){return t(d)},get selectedTimeRange(){return t(e)}});var H=D(C,2);ga(H,{get entries(){return t(d)},get selectedTimeRange(){return t(e)}});var et=D(H,2),tt=M(et);xt(tt,21,()=>G,v=>v.value,(v,s)=>{var c=Ia();c.__click=()=>$t(x,t(s).value,!0);var $=M(c,!0);m(c),ut(()=>{kt(c,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(x)===t(s).value?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),lt($,t(s).label)}),l(v,c)}),m(tt);var st=D(tt,2);wa(st,{get reflections(){return t(j)},get selectedTimeRange(){return t(e)},get selectedMetric(){return t(x)}}),m(et),m(_);var ct=D(_,2);Ce(ct,{currentTab:"insights"}),m(T),ut(()=>{kt(h,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="week"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),kt(A,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="month"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),kt(R,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="3months"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`),kt(b,1,`rounded-lg border border-[#c5c6d0] px-3 py-1.5 text-sm font-medium transition-colors ${t(e)==="year"?"bg-[#d9dff6] text-[#404659]":"bg-white text-[#44464f] hover:bg-gray-50"}`)}),l(g,T),St()}oe(["click"]);export{rr as component};
