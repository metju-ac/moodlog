import{p as Nt,f as Y,a as M,c as X,t as lt,g as Ot,d as Bt}from"./-oWnhBs4.js";import{p as et,g as r,u as s,m as E,d as S,c as rt,n as zt,t as it,e as T,r as N,l as Yt,b as Ft,s as Rt,a2 as kt}from"./DxSztoeM.js";import{i as J}from"./BRMXUoVx.js";import{s as at}from"./CDp-2XP4.js";import{e as ut,i as bt}from"./CiOcEGFZ.js";import{p as O,s as ot,r as ft,c as K}from"./CRSDCZzM.js";import{c as Xt,a as tt}from"./knLRfhgA.js";import{h as Vt,i as It,j as Wt,k as jt,m as Ht,e as At,M as ct,n as dt,o as st,p as qt,q as Kt,r as Zt,s as Mt,u as Jt,v as wt,C as Qt,a as Ut,b as pt,c as $t,d as te,S as ee,A as Ct,f as re,T as ae,g as ne,t as ie,l as oe}from"./BubDc5rO.js";import{S as nt,m as se}from"./Dt1uHZYc.js";import{C as le,M as ce}from"./BIApOF2s.js";import{C as de}from"./I8qydgAQ.js";class Pt{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e);break}}this._x0=t,this._y0=e}}function ue(a){return new Pt(a,!0)}function fe(a){return new Pt(a,!1)}function Lt(a,t){return Math.abs(a.x-t.x)<1e-6&&Math.abs(a.y-t.y)<1e-6}function xe(a,t){return Lt(a,t)?"":`M ${a.x} ${a.y} L ${t.x} ${t.y}`}function V(a){return Math.abs(a)<1e-6}function xt({source:a,target:t,sweep:e}){return e==="horizontal-vertical"?`M ${a.x} ${a.y} L ${t.x} ${a.y} L ${t.x} ${t.y}`:`M ${a.x} ${a.y} L ${a.x} ${t.y} L ${t.x} ${t.y}`}function ye(a){const{radius:t,dx:e,dy:h,source:l,target:c,sweep:v}=a,i=Math.max(0,Math.min(t,Math.abs(e),Math.abs(h)));if(V(i))return xt(a);const y=Math.sign(e),m=Math.sign(h);if(v==="horizontal-vertical"){const u={x:c.x-i*y,y:l.y},x={x:c.x,y:l.y+i*m};return`M ${l.x} ${l.y} L ${u.x} ${u.y} L ${x.x} ${x.y} L ${c.x} ${c.y}`}else{const u={x:l.x,y:c.y-i*m},x={x:l.x+i*y,y:c.y};return`M ${l.x} ${l.y} L ${u.x} ${u.y} L ${x.x} ${x.y} L ${c.x} ${c.y}`}}function ve(a){const{radius:t,dx:e,dy:h,source:l,target:c,sweep:v}=a,i=Math.max(0,Math.min(t,Math.abs(e),Math.abs(h)));if(V(i))return xt(a);const y=Math.sign(e),m=Math.sign(h);if(v==="horizontal-vertical"){const u={x:c.x-i*y,y:l.y},x={x:c.x,y:l.y+i*m},D=y*m>0?1:0;return`M ${l.x} ${l.y} L ${u.x} ${u.y} A ${i} ${i} 0 0 ${D} ${x.x} ${x.y} L ${c.x} ${c.y}`}else{const u={x:l.x,y:c.y-i*m},x={x:l.x+i*y,y:c.y},D=y*m>0?0:1;return`M ${l.x} ${l.y} L ${u.x} ${u.y} A ${i} ${i} 0 0 ${D} ${x.x} ${x.y} L ${c.x} ${c.y}`}}const St={square:xt,beveled:ye,rounded:ve};function he(a){const{source:t,target:e,type:h}=a;if(Lt(t,e))return"";const l=e.x-t.x,c=e.y-t.y;return h==="straight"||V(l)||V(c)?xe(t,e):(St[h]||St.square)({...a,dx:l,dy:c})}const Dt="M0,0L0,0";function ge({source:a,target:t,sweep:e,curve:h}){const l=t.x-a.x,c=t.y-a.y,v=Vt().curve(h);let i=[];const y=V(l)||V(c);if(e==="none"||y?i=[[a.x,a.y],[t.x,t.y]]:e==="horizontal-vertical"?i=[[a.x,a.y],[t.x,a.y],[t.x,t.y]]:e==="vertical-horizontal"&&(i=[[a.x,a.y],[a.x,t.y],[t.x,t.y]]),i.length===2&&V(l)&&V(l))return Dt;const m=v(i);return!m||m.includes("NaN")?Dt:m}var me=Y("<!> <!> <!> <!>",1);function _e(a,t){const e=Nt();et(t,!0);let h=O(t,"source",19,()=>({x:0,y:0})),l=O(t,"target",19,()=>({x:100,y:100})),c=O(t,"type",3,"rounded"),v=O(t,"radius",3,20),i=O(t,"curve",3,It),y=O(t,"pathRef",15),m=ft(t,["$$slots","$$events","$$legacy","source","target","sweep","type","radius","curve","pathRef","pathData","marker","markerStart","markerMid","markerEnd","motion"]);const u=s(()=>t.sweep?t.sweep:c()==="d3"?"none":"horizontal-vertical"),x=s(()=>t.markerStart||t.marker?dt("marker-start",e):""),D=s(()=>t.markerMid||t.marker?dt("marker-mid",e):""),b=s(()=>t.markerEnd||t.marker?dt("marker-end",e):""),n=Wt(t.motion),w=n?{type:n.type,options:{interpolate:Ht,...n.options}}:void 0,A=s(()=>t.pathData?t.pathData:c()==="d3"?ge({source:h(),target:l(),sweep:r(u),curve:i()}):he({source:h(),target:l(),sweep:r(u),type:c(),radius:v()})),o=jt("",()=>r(A),w||{type:"none"});var d=me(),f=E(d);{let C=s(()=>r(x)?`url(#${r(x)})`:void 0),P=s(()=>r(D)?`url(#${r(D)})`:void 0),L=s(()=>r(b)?`url(#${r(b)})`:void 0),B=s(()=>st(m,"connector"));At(f,ot({get pathData(){return o.current},get"marker-start"(){return r(C)},get"marker-mid"(){return r(P)},get"marker-end"(){return r(L)}},()=>r(B),()=>m,{get pathRef(){return y()},set pathRef(F){y(F)}}))}var _=S(f,2);ct(_,{get id(){return r(x)},get marker(){return t.markerStart}});var g=S(_,2);ct(g,{get id(){return r(D)},get marker(){return t.markerMid}});var k=S(g,2);ct(k,{get id(){return r(b)},get marker(){return t.markerEnd}}),M(a,d),rt()}const Z={x:0,y:0};function ke(a,t){et(t,!0);let e=O(t,"sankey",3,!1),h=O(t,"type",3,"d3"),l=O(t,"sweep",3,"none"),c=ft(t,["$$slots","$$events","$$legacy","data","sankey","source","target","orientation","x","y","curve","explicitCoords","type","sweep"]);const v=s(()=>t.source?t.source:e()?n=>({node:n.source,y:n.y0,isSource:!0}):n=>n.source),i=s(()=>t.target?t.target:e()?n=>({node:n.target,y:n.y1,isSource:!1}):n=>n.target),y=s(()=>t.orientation?t.orientation:e()?"horizontal":"vertical"),m=s(()=>t.curve?t.curve:r(y)==="horizontal"?ue:fe),u=s(()=>t.x?t.x:e()?n=>n.isSource?n.node.x1:n.node.x0:n=>r(y)==="horizontal"?n.y:n.x),x=s(()=>t.y?t.y:e()?n=>n.y:n=>r(y)==="horizontal"?n.x:n.y),D=s(()=>{if(t.explicitCoords)return{x:t.explicitCoords.x1,y:t.explicitCoords.y1};if(!t.data)return Z;try{const n=r(v)(t.data);if(n==null)return Z;const w=r(u)(n),A=r(x)(n);return{x:Number.isFinite(w)?w:0,y:Number.isFinite(A)?A:0}}catch(n){return console.error("Error accessing source coordinates:",n,"Data:",t.data),Z}}),b=s(()=>{if(t.explicitCoords)return{x:t.explicitCoords.x2,y:t.explicitCoords.y2};if(!t.data)return Z;try{const n=r(i)(t.data);if(n==null)return Z;const w=r(u)(n),A=r(x)(n);return{x:Number.isFinite(w)?w:0,y:Number.isFinite(A)?A:0}}catch(n){return console.error("Error accessing target coordinates:",n,"Data:",t.data),Z}});{let n=s(()=>st(c,"link"));_e(a,ot({get source(){return r(D)},get target(){return r(b)},get type(){return h()},get curve(){return r(m)},get sweep(){return l()}},()=>r(n)))}rt()}var be=Y("<!> <!>",1);function Me(a,t){et(t,!0);const e=qt();let h=O(t,"r",3,5),l=O(t,"links",3,!1),c=ft(t,["$$slots","$$events","$$legacy","data","x","y","r","offsetX","offsetY","links","fill","fillOpacity","stroke","strokeWidth","opacity","children"]);function v(o,d,f){return typeof d=="function"?d(o,e):d??(Jt(f)&&!e.radial?f.bandwidth()/2:0)}const i=s(()=>t.x?Mt(t.x):e.x),y=s(()=>t.y?Mt(t.y):e.y),m=s(()=>t.data??e.data),u=(o,d,f)=>{const _=e.xScale(o),g=e.yScale(d);return{x:_+v(_,t.offsetX,e.xScale),y:g+v(g,t.offsetY,e.yScale),r:e.config.r?e.rGet(f):h(),xValue:o,yValue:d,data:f}},x=s(()=>r(m).flatMap(o=>{const d=r(i)(o),f=r(y)(o);return Array.isArray(d)?d.filter(Boolean).map(_=>u(_,f,o)):Array.isArray(f)?f.filter(Boolean).map(_=>u(d,_,o)):d!=null&&f!=null?u(d,f,o):[]})),D=s(()=>r(m).flatMap(o=>{const d=r(i)(o),f=r(y)(o);if(Array.isArray(d)){const[_,g]=wt(e.xGet(o)),k=e.yGet(o)+v(e.yGet(o),t.offsetY,e.yScale);return{source:{x:_+v(_,t.offsetX,e.xScale)+(e.config.r?e.rGet(o):h()),y:k},target:{x:g+v(g,t.offsetX,e.xScale)-(e.config.r?e.rGet(o):h()),y:k},data:o}}else if(Array.isArray(f)){const _=e.xGet(o)+v(e.xGet(o),t.offsetX,e.xScale),[g,k]=wt(e.yGet(o));return{source:{x:_,y:g+v(g,t.offsetY,e.yScale)},target:{x:_,y:k+v(k,t.offsetY,e.yScale)},data:o}}}));var b=X(),n=E(b);{var w=o=>{var d=X(),f=E(d);Xt(f,()=>t.children,()=>({points:r(x)})),M(o,d)},A=o=>{var d=be(),f=E(d);{var _=k=>{var C=X(),P=E(C);ut(P,17,()=>r(D),bt,(L,B)=>{{let F=s(()=>t.fill??(e.config.c?e.cGet(r(B).data):null)),G=s(()=>st(l(),"points-link"));ke(L,ot({get data(){return r(B)},get stroke(){return r(F)}},()=>r(G)))}}),M(k,C)};J(f,k=>{l()&&k(_)})}var g=S(f,2);ut(g,17,()=>r(x),bt,(k,C)=>{const P=s(()=>Zt(r(C).x,r(C).y));{let L=s(()=>e.radial?r(P)[0]:r(C).x),B=s(()=>e.radial?r(P)[1]:r(C).y),F=s(()=>t.fill??(e.config.c?e.cGet(r(C).data):null)),G=s(()=>st(c,"point"));Kt(k,ot({get cx(){return r(L)},get cy(){return r(B)},get r(){return r(C).r},get fill(){return r(F)},get fillOpacity(){return t.fillOpacity},get stroke(){return t.stroke},get strokeWidth(){return t.strokeWidth},get opacity(){return t.opacity}},()=>r(G)))}}),M(o,d)};J(n,o=>{t.children?o(w):o(A,!1)})}M(a,b),rt()}var we=Y("<!> <!>",1),Ce=Ot('<circle fill="#485e92" class="transition-all duration-200"></circle>'),Se=Y('<div class="rounded-lg border border-border/50 bg-background px-3 py-2 text-xs shadow-xl"><div class="font-medium"> </div> <div class="mt-1 flex items-center gap-2"><div class="h-2 w-2 rounded-full bg-[#485e92]"></div> <span class="text-muted-foreground"> </span></div> <div class="mt-0.5 text-[10px] text-muted-foreground"> </div></div>'),De=Y("<!> <!> <!> <!> <!>",1),Ae=Y('<div class="h-[300px] w-full"><!></div>'),Pe=Y('<div class="flex h-[300px] w-full items-center justify-center text-sm text-muted-foreground">No mood entries for this day</div>'),Le=Y("<!> <!>",1);function Ee(a,t){et(t,!0);const e=s(()=>t.entries.length===0?[]:[...t.entries].sort((i,y)=>i.date.getTime()-y.date.getTime()).map(i=>({date:i.date,mood:i.moodLevel,id:i.id,title:i.title,isSelected:i.id===t.selectedEntryId}))),h=s(()=>{if(r(e).length===0){const m=new Date,u=new nt(m);u.setHours(0,0,0,0);const x=new nt(m);return x.setHours(24,0,0,0),[u,x]}const v=r(e)[0].date,i=new nt(v);i.setHours(0,0,0,0);const y=new nt(v);return y.setHours(24,0,0,0),[i,y]});var l=X(),c=E(l);K(c,()=>ne,(v,i)=>{i(v,{class:"w-full",children:(y,m)=>{var u=Le(),x=E(u);K(x,()=>Qt,(b,n)=>{n(b,{children:(w,A)=>{var o=we(),d=E(o);K(d,()=>Ut,(_,g)=>{g(_,{children:(k,C)=>{zt();var P=lt("Daily Mood Overview");M(k,P)},$$slots:{default:!0}})});var f=S(d,2);K(f,()=>pt,(_,g)=>{g(_,{children:(k,C)=>{var P=X(),L=E(P);{var B=G=>{var Q=lt();it(()=>at(Q,`Showing ${r(e).length??""} mood ${r(e).length===1?"entry":"entries"} for today`)),M(G,Q)},F=G=>{var Q=lt("No mood entries recorded yet");M(G,Q)};J(L,G=>{r(e).length>0?G(B):G(F,!1)})}M(k,P)},$$slots:{default:!0}})}),M(w,o)},$$slots:{default:!0}})});var D=S(x,2);K(D,()=>$t,(b,n)=>{n(b,{children:(w,A)=>{var o=X(),d=E(o);{var f=g=>{var k=Ae(),C=T(k);{let P=s(ie),L=s(oe);te(C,{get data(){return r(e)},x:"date",get xScale(){return r(P)},get xDomain(){return r(h)},y:"mood",get yScale(){return r(L)},yDomain:[-10,10],padding:{top:16,bottom:32,left:48,right:16},children:(B,F)=>{ee(B,{children:(G,Q)=>{var yt=De(),vt=E(yt);Ct(vt,{placement:"left",grid:!0,rule:!1,ticks:[-10,-5,0,5,10],format:W=>{const z=Math.round(W);return z>0?`+${z}`:String(z)},class:"text-xs text-muted-foreground"});var ht=S(vt,2);Ct(ht,{placement:"bottom",rule:!1,ticks:7,format:W=>W.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}),class:"text-xs text-muted-foreground"});var gt=S(ht,2);At(gt,{get curve(){return re},class:"fill-none stroke-[#485e92] stroke-2"});var mt=S(gt,2);Me(mt,{r:4,fill:"#485e92",children:(z,U)=>{let j=()=>U?.().points;var H=X(),p=E(H);ut(p,17,j,$=>$.data.id,($,I)=>{const q=s(()=>r(I).data);var R=Ce();it(()=>{tt(R,"cx",r(I).x),tt(R,"cy",r(I).y),tt(R,"r",r(q).isSelected?9:4),tt(R,"stroke",r(q).isSelected?"white":"none"),tt(R,"stroke-width",r(q).isSelected?3:0)}),M($,R)}),M(z,H)},$$slots:{default:!0}});var Et=S(mt,2);{const W=(z,U)=>{let j=()=>U?.().data;var H=Se(),p=T(H),$=T(p,!0);N(p);var I=S(p,2),q=S(T(I),2),R=T(q);N(q),N(I);var _t=S(I,2),Gt=T(_t,!0);N(_t),N(H),it(Tt=>{at($,j().title),at(R,`Mood: ${j().mood>0?"+":""}${j().mood??""}`),at(Gt,Tt)},[()=>j().date.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]),M(z,H)};K(Et,()=>ae,(z,U)=>{U(z,{variant:"none",children:W,$$slots:{default:!0}})})}M(G,yt)},$$slots:{default:!0}})},$$slots:{default:!0}})}N(k),M(g,k)},_=g=>{var k=Pe();M(g,k)};J(d,g=>{r(e).length>0?g(f):g(_,!1)})}M(w,o)},$$slots:{default:!0}})}),M(y,u)},$$slots:{default:!0}})}),M(a,l),rt()}var Ge=Y('<div class="flex w-full flex-col items-end gap-2.5"><div class="flex gap-1.5"><button type="button" class="flex h-12 w-[52px] items-center justify-center rounded-full bg-[#d9dff6] transition-colors hover:bg-[#c5cbe8] disabled:cursor-not-allowed disabled:opacity-50" aria-label="Previous entry"><!></button> <button type="button" class="flex h-12 w-[52px] items-center justify-center rounded-full bg-[#d9dff6] transition-colors hover:bg-[#c5cbe8] disabled:cursor-not-allowed disabled:opacity-50" aria-label="Next entry"><!></button></div> <!></div> <div class="w-full"><!></div>',1);function We(a,t){et(t,!0);let e=Rt(0);const h=s(()=>se.entries.filter(b=>b.date.getDate()===t.date.getDate()&&b.date.getMonth()===t.date.getMonth()&&b.date.getFullYear()===t.date.getFullYear()).sort((b,n)=>b.date.getTime()-n.date.getTime())),l=s(()=>r(h)[r(e)]),c=s(()=>r(h).length>0),v=s(()=>r(e)>0),i=s(()=>r(e)<r(h).length-1);function y(){r(v)&&kt(e,-1)}function m(){r(i)&&kt(e)}Yt(()=>{t.date,Ft(e,0)});var u=X(),x=E(u);{var D=b=>{var n=Ge(),w=E(n),A=T(w),o=T(A);o.__click=y;var d=T(o);le(d,{class:"h-6 w-6 text-[#404659]",strokeWidth:2}),N(o);var f=S(o,2);f.__click=m;var _=T(f);de(_,{class:"h-6 w-6 text-[#404659]",strokeWidth:2}),N(f),N(A);var g=S(A,2);{var k=L=>{ce(L,{get entry(){return r(l)}})};J(g,L=>{r(l)&&L(k)})}N(w);var C=S(w,2),P=T(C);{let L=s(()=>r(l)?.id);Ee(P,{get entries(){return r(h)},get selectedEntryId(){return r(L)}})}N(C),it(()=>{o.disabled=!r(v),f.disabled=!r(i)}),M(b,n)};J(x,b=>{r(c)&&b(D)})}M(a,u),rt()}Bt(["click"]);export{We as D};
