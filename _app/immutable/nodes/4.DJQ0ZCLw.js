import{d as se,f as V,a as N}from"../chunks/-oWnhBs4.js";import{p as ie,l as z,g as e,u as x,s as f,a as ne,b as o,m as le,e as i,c as de,d as n,n as B,r as a,t as ce,f as pe}from"../chunks/DxSztoeM.js";import{s as fe}from"../chunks/CDp-2XP4.js";import{e as me,N as ue,l as F}from"../chunks/C84P5iXu.js";import{a as ve,b as ge,c as xe}from"../chunks/CRSDCZzM.js";import{r as be,s as he}from"../chunks/knLRfhgA.js";import{b as P}from"../chunks/DekmaY3e.js";import{g as $}from"../chunks/DxIQwYva.js";import{b as D}from"../chunks/BS_ylcLv.js";import{p as _e}from"../chunks/BGHV0_RS.js";import{M as ye}from"../chunks/Bs0JuHgd.js";import{F as we}from"../chunks/B0R_wGu9.js";import{T as Se,D as $e}from"../chunks/DY6dNppP.js";import{m as k}from"../chunks/BaeFtoQF.js";import{g as De}from"../chunks/Cl5IR1kn.js";import{S as ke}from"../chunks/CVEBjHpG.js";import{S as je}from"../chunks/Ru0iS4VV.js";const Le=!1,Qe=Object.freeze(Object.defineProperty({__proto__:null,prerender:Le},Symbol.toStringTag,{value:"Module"}));var Ce=V("<button><!> <span> </span></button>"),Ee=V('<div class="flex h-screen flex-col bg-white"><main class="flex flex-1 flex-col justify-between overflow-y-auto px-4 py-2.5"><div class="flex w-full flex-col gap-5 pt-2.5 pb-4"><h1 class="text-center text-[22px] leading-7 font-normal text-black">Edit your mood entry</h1> <div class="relative w-full"><input type="text" id="title-input" placeholder="Input" class="h-14 w-full rounded border-[3px] border-indigo-700 px-4 text-base text-gray-900 transition-colors outline-none focus:border-indigo-800"/> <label for="title-input" class="absolute -top-2.5 left-3 bg-white px-1 text-xs text-indigo-700">Title</label></div> <!> <div class="flex h-12 w-full flex-wrap items-center gap-1 py-2"></div> <div class="relative w-full"><textarea id="notes-textarea" placeholder="Input" rows="12" class="w-full resize-none rounded border-[3px] border-indigo-700 px-4 py-3 text-base text-gray-900 transition-colors outline-none focus:border-indigo-800"></textarea> <label for="notes-textarea" class="absolute -top-2.5 left-3 bg-white px-1 text-xs text-indigo-700">Notes for this entry</label></div></div> <div class="flex w-full items-center justify-between pb-4"><button class="flex h-14 w-[72px] items-center justify-center rounded-full bg-red-600 text-white shadow-lg transition-transform hover:scale-105 hover:bg-red-700 active:scale-95" aria-label="Delete mood entry"><!></button> <!></div></main> <!></div> <!>',1);function Re(W,A){ie(A,!0);const q=()=>ge(_e,"$page",G),[G,H]=ve(),m=x(()=>q().params.id||""),s=x(()=>k.getEntryById(e(m)));let l=f(!1);z(()=>{(!e(s)||!e(m))&&$(`${D}/`)});let d=f(""),u=f(""),v=f(0),c=f(ne(new Set));z(()=>{e(s)&&(o(d,e(s).title,!0),o(u,e(s).description,!0),o(v,e(s).moodLevel*10),o(c,new Set(e(s).labels.map(t=>t.id)),!0))});const J=x(()=>Math.round(e(v)/10));function K(t){const r=new ke(e(c));r.has(t)?r.delete(t):r.add(t),o(c,r,!0)}function Q(){if(!e(d).trim()){alert("Please enter a title");return}if(!e(s))return;const t=F.all.filter(r=>e(c).has(r.id));k.updateEntry(e(m),{id:e(s).id,title:e(d).trim(),description:e(u).trim(),labels:t,moodLevel:e(J),date:e(s).date}),$(`${D}/`)}function R(){o(l,!0)}function U(){k.deleteEntry(e(m)),o(l,!1),$(`${D}/`)}function X(){o(l,!1)}var j=Ee(),b=le(j),h=i(b),_=i(h),y=n(i(_),2),L=i(y);be(L),B(2),a(y);var C=n(y,2);ye(C,{get value(){return e(v)},onValueChange:t=>o(v,t,!0)});var w=n(C,2);me(w,21,()=>F.all,t=>t.id,(t,r)=>{const oe=x(()=>De(e(r).icon));var p=Ce();p.__click=()=>K(e(r).id);var I=i(p);xe(I,()=>e(oe),(S,ae)=>{ae(S,{class:"h-4 w-4",strokeWidth:2})});var M=n(I,2),re=i(M,!0);a(M),a(p),ce(S=>{he(p,1,`flex h-8 items-center gap-2 rounded-lg border px-3 py-1.5 text-sm font-medium transition-colors ${S??""}`),fe(re,e(r).name)},[()=>e(c).has(e(r).id)?"border-indigo-700 bg-indigo-50 text-indigo-900":"border-gray-300 text-gray-700 hover:bg-gray-50"]),N(t,p)}),a(w);var E=n(w,2),O=i(E);pe(O),B(2),a(E),a(_);var T=n(_,2),g=i(T);g.__click=R;var Y=i(g);Se(Y,{class:"h-6 w-6",strokeWidth:2}),a(g);var Z=n(g,2);we(Z,{get icon(){return je},onclick:Q,label:"Save mood entry"}),a(T),a(h);var ee=n(h,2);ue(ee,{currentTab:"reflections"}),a(b);var te=n(b,2);$e(te,{title:"Delete mood entry?",onConfirm:U,onCancel:X,get isOpen(){return e(l)},set isOpen(t){o(l,t,!0)}}),P(L,()=>e(d),t=>o(d,t)),P(O,()=>e(u),t=>o(u,t)),N(W,j),de(),H()}se(["click"]);export{Re as component,Qe as universal};
